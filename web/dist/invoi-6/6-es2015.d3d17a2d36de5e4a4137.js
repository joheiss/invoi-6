(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{kkST:function(e,t,n){"use strict";n.r(t),n.d(t,"clearState",(function(){return Th})),n.d(t,"metaReducers",(function(){return wh})),n.d(t,"InvoicingModule",(function(){return Dh}));var c,a=n("l7P3"),i=n("9jGm"),o=n("KZX/"),r=n("TIaw"),s=n("tyNb"),l=n("fXoL");c=$localize`:␟6eaff43622783690eb1378edc67cb0c18a738dc3␟1297952410119052522: confirmations works!
`;let b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-confirmations"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Tb(0,"p"),l.Xb(1,c),l.Sb())},styles:[""],changeDetection:0}),e})();var d=n("R0sL"),u=n("HgwG");const m=Object(d.a)({selectId:e=>e.id,sortComparer:(e,t)=>e.id.localeCompare(t.id)}),f=m.getInitialState({loaded:!1,loading:!1,error:void 0}),{selectEntities:h}=m.getSelectors();var g=n("CE/k");const p=Object(d.a)({selectId:e=>e.id,sortComparer:(e,t)=>e.name.localeCompare(t.name)}),v=p.getInitialState({loaded:!1,loading:!1,current:void 0,error:void 0}),{selectIds:C,selectEntities:O,selectAll:j}=p.getSelectors();var y=n("Avje");const S=Object(d.a)({selectId:e=>e.id,sortComparer:!1}),T=S.getInitialState({loaded:!1,loading:!1,current:void 0,error:void 0}),{selectEntities:w,selectAll:D}=S.getSelectors();var I=n("m2JN");const $=Object(d.a)({selectId:e=>e.id,sortComparer:(e,t)=>t.issuedAt.getTime()-e.issuedAt.getTime()||e.id.localeCompare(t.id)}),x=$.getInitialState({loaded:!1,loading:!1,current:void 0,error:void 0}),{selectEntities:P,selectAll:_}=$.getSelectors();var k=n("cGgE");const M=Object(d.a)({selectId:e=>e.path,sortComparer:(e,t)=>e.path.localeCompare(t.path)}),z=M.getInitialState({loaded:!1,loading:!1,error:void 0}),{selectEntities:A,selectAll:B}=M.getSelectors();var R=n("ZnGM");const E=Object(d.a)({selectId:e=>e.id,sortComparer:(e,t)=>e.id.localeCompare(t.id)}),N=E.getInitialState({loaded:!1,loading:!1,current:void 0,error:void 0}),{selectEntities:F,selectAll:L}=E.getSelectors();var X=n("uKI6");const q=Object(d.a)({selectId:e=>e.id,sortComparer:(e,t)=>t.id.localeCompare(e.id)}),H=q.getInitialState({loaded:!1,loading:!1,error:void 0}),{selectIds:U,selectEntities:V,selectAll:G,selectTotal:Y}=q.getSelectors(),Z={numberRanges:function(e=f,t){switch(t.type){case u.c:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0});case u.a:return m.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case u.b:return m.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case u.e:return m.removeOne(t.payload.id,e);default:return e}},receivers:function(e=v,t){switch(t.type){case g.u:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0,current:void 0});case g.a:return p.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case g.r:return p.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case g.w:return p.removeOne(t.payload.id,e);case g.c:{const n={isDirty:!0,receiver:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case g.s:{const n={isDirty:!0,receiver:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case g.x:{const n={isDirty:!1,receiver:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case g.b:{const n={isDirty:!0,receiver:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}default:return e}},contracts:function(e=T,t){switch(t.type){case y.u:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0,current:void 0});case y.a:return S.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case y.r:return S.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case y.w:return S.removeOne(t.payload.id,e);case y.c:{const n={isDirty:!0,contract:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case y.s:{const n={isDirty:!0,contract:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case y.y:{const n={isDirty:!1,contract:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case y.b:{const n={isDirty:!0,contract:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case y.x:return S.removeAll(Object.assign(Object.assign({},e),{loading:!1,loaded:!1,current:void 0}));default:return e}},invoices:function(e=x,t){switch(t.type){case I.C:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0,current:void 0});case I.a:return $.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case I.x:if(t.payload.id===e.current.invoice.id){const n=Object.assign({},e.current.invoice,t.payload),c={isDirty:e.current.isDirty,invoice:n};return $.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0,current:c}))}return $.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case I.E:return $.removeOne(t.payload.id,e);case I.c:{const n={isDirty:!0,invoice:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case I.y:{const n={isDirty:!0,invoice:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case I.z:{const n={isDirty:!0,invoice:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case I.F:{const n={isDirty:!1,invoice:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case I.b:{const n={isDirty:!0,invoice:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}default:return e}},documentLinks:function(e=z,t){switch(t.type){case k.m:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0});case k.a:return M.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case k.k:return M.updateOne({id:t.payload.path,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case k.q:return M.removeOne(t.payload.path,e);default:return e}},settings:function(e=N,t){switch(t.type){case R.p:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0,current:void 0});case R.a:return E.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case R.n:return E.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case R.r:return E.removeOne(t.payload.id,e);case R.c:{const n={isDirty:!0,setting:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case R.o:{const n={isDirty:!0,setting:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case R.s:{const n={isDirty:!1,setting:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}case R.b:{const n={isDirty:!0,setting:t.payload};return Object.assign(Object.assign({},e),{current:n,error:void 0})}default:return e}},revenues:function(e=H,t){switch(t.type){case X.c:return Object.assign(Object.assign({},e),{loading:!0,loaded:!1,error:void 0});case X.a:return q.addOne(t.payload,Object.assign(Object.assign({},e),{loaded:!0,loading:!1,error:void 0}));case X.b:return q.updateOne({id:t.payload.id,changes:t.payload},Object.assign(Object.assign({},e),{error:void 0}));case X.e:return q.removeOne(t.payload.id,e);default:return e}}},Q=Object(a.o)("invoicing");var J=n("S6UB"),K=n("eIep"),W=n("5+tZ"),ee=n("lJxs"),te=n("dNeE");const ne={"contract-create-fail":{text:"Der Vertrag konnte nicht angelegt werden. [$%]",usage:"error"},"contract-delete-fail":{text:"Der Vertrag konnte nicht gel\xf6scht werden. [$%]",usage:"error"},"contract-delete-success":{text:"Der Vertrag $% wurde gel\xf6scht.",usage:"success"},"contract-update-fail":{text:"Der Vertrag konnte nicht ge\xe4ndert werden. [$%]",usage:"error"},"contract-update-success":{text:"Der Vertrag $% wurde ge\xe4ndert.",usage:"success"},"file-delete-fail":{text:"Die Datei $% konnte nicht gel\xf6scht werden.",usage:"error"},"file-delete-success":{text:"Die Datei $% wurde gel\xf6scht.",usage:"success"},"file-download-fail":{text:"Die Datei $% konnte nicht heruntergeladen werden.",usage:"error"},"file-download-success":{text:"Die Datei $% wurde heruntergeladen.",usage:"success"},"file-upload-fail":{text:"Die Datei $% konnte nicht hochgeladen werden.",usage:"error"},"file-upload-success":{text:"Die Datei $% wurde hochgeladen.",usage:"success"},"invoice-create-fail":{text:"Die Rechnung konnte nicht angelegt werden. [$%]",usage:"error"},"invoice-delete-fail":{text:"Die Rechnung $% konnte nicht gel\xf6scht werden.",usage:"error"},"invoice-delete-success":{text:"Die Rechnung $% wurde gel\xf6scht.",usage:"success"},"invoice-email-fail":{text:"Die Rechnung konnte nicht per Email versandt werden.",usage:"error"},"invoice-email-success":{text:"Die Rechnung wurde per Email versandt.",usage:"success"},"invoice-update-fail":{text:"Die Rechnung $% konnte nicht ge\xe4ndert werden.",usage:"error"},"invoice-update-success":{text:"Die Rechnung $% wurde ge\xe4ndert.",usage:"success"},"invoice-pdf-created":{text:"Das PDF f\xfcr die Rechnung wurde erstellt und gespeichert.",usage:"success"},"invoice-pdf-failed":{text:"Das PDF f\xfcr die Rechnung konnte nicht erstellt werden.",usage:"error"},"permission-denied":{text:"Die Aktion wurde mangels ausreichender Berechtigung abgebrochen.",usage:"error"},"receiver-create-fail":{text:"Der Rechnungsempf\xe4nger konnte nicht angelegt werden. [$%]",usage:"error"},"receiver-create-success":{text:"Der Rechnungsempf\xe4nger $% wurde angelegt.",usage:"success"},"receiver-delete-fail":{text:"Der Rechnungsempf\xe4nger konnte nicht gel\xf6scht werden. [$%]",usage:"error"},"receiver-delete-success":{text:"Der Rechnungsempf\xe4nger $% wurde gel\xf6scht.",usage:"success"},"receiver-update-fail":{text:"Der Rechnungsempf\xe4nger konnte nicht ge\xe4ndert werden. [$%]",usage:"error"},"receiver-update-success":{text:"Der Rechnungsempf\xe4nger $% wurde ge\xe4ndert.",usage:"success"},"setting-delete-fail":{text:"Die Einstellung $% konnte nicht gel\xf6scht werden. [$%]",usage:"error"},"setting-delete-success":{text:"Die Einstellung $% wurde gel\xf6scht.",usage:"success"},"setting-update-fail":{text:"Die Einstellung konnte nicht ge\xe4ndert werden. [$%]",usage:"error"},"setting-update-success":{text:"Die Einstellung $% wurde ge\xe4ndert.",usage:"success"},"storage/object-not-found":{text:"Die Datei existiert nicht. ",usage:"error"}};var ce=n("bnn5");class ae{constructor(e,t,n){this.fbStore=e,this.collectionName=t,this.collectionOrderBy=n,this.col=this.fbStore.assignCollection(t,n),this.messages=new ce.Messages(ne)}queryAll(){return this.fbStore.queryAll(this.col)}create(e){return Object(te.from)(this.fbStore.documentExists(this.col,e).then(t=>{if(t)throw new Error(`Document with id ${e.id} already exists. Check number ranges.`);return this.fbStore.createDocument(this.col,e)}))}delete(e){return Object(te.from)(this.fbStore.documentExists(this.col,e).then(t=>{if(!t)throw new Error(`Document with id ${e.id} does not exist.`);return this.fbStore.deleteDocument(this.col,e)}))}update(e){return this.fbStore.updateDocument(this.col,e)}getMessage(e,t){return t&&t.length>0?this.messages.getMessageWithParams(e,t):this.messages.getMessage(e)}}var ie=n("trtW");let oe=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbStore=t}}return e.COLLECTION_NAME="receivers",e.COLLECTION_ORDERBY={fieldName:"id",direction:"asc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();var re=function(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(c=Object.getOwnPropertySymbols(e);a<c.length;a++)t.indexOf(c[a])<0&&Object.prototype.propertyIsEnumerable.call(e,c[a])&&(n[c[a]]=e[c[a]])}return n};let se=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbStore=t}static mapToBDO(e){const t=ce.ContractTermFactory.fromDates(e.startDate,e.endDate),n=re(e,["startDate","endDate"]);return Object.assign(Object.assign({},n),{term:t})}static mapToDTO(e){const t=re(e,["term"]);return Object.assign(Object.assign({},t),{startDate:e.term.startDate,endDate:e.term.endDate})}}return e.COLLECTION_NAME="contracts",e.COLLECTION_ORDERBY={fieldName:"issuedAt",direction:"desc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();var le=n("ZDzL");let be=(()=>{class e extends ae{constructor(t,n){super(n,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbFunctions=t,this.fbStore=n}createInvoicePDF(e){return this.fbFunctions.createInvoicePDF(e)}sendInvoiceEmail(e){return this.fbFunctions.sendInvoiceEmail(e)}}return e.COLLECTION_NAME="invoices",e.COLLECTION_ORDERBY={fieldName:"issuedAt",direction:"desc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(le.a),l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),de=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbStore=t}}return e.COLLECTION_NAME="settings",e.COLLECTION_ORDERBY={fieldName:"id",direction:"asc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),ue=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME),this.fbStore=t}}return e.COLLECTION_NAME="number-ranges",e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),me=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbStore=t}queryForObject(e){return this.fbStore.queryAllDocumentLinksForObject(e)}create(e){return this.fbStore.createDocumentLink(e)}}return e.COLLECTION_NAME="document-links",e.COLLECTION_ORDERBY={fieldName:"path",direction:"asc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),fe=(()=>{class e extends ae{constructor(t){super(t,e.COLLECTION_NAME,e.COLLECTION_ORDERBY),this.fbStore=t}}return e.COLLECTION_NAME="revenues",e.COLLECTION_ORDERBY={fieldName:"id",direction:"desc"},e.\u0275fac=function(t){return new(t||e)(l.Zb(ie.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();const he=[ue,oe,se,be,de,me,fe];var ge=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},pe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ve=(()=>{class e{constructor(e,t){this.actions$=e,this.numberRangesService=t,this.queryNumberRanges$=this.actions$.pipe(Object(i.e)(u.c),Object(K.a)(e=>this.numberRangesService.queryAll()),Object(W.a)(e=>e),Object(ee.a)(e=>({type:"[Invoicing] Number Range "+e.type,payload:Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id})}))),this.updateNumberRange$=this.actions$.pipe(Object(i.e)(u.f),Object(ee.a)(e=>e),Object(K.a)(e=>this.numberRangesService.update(e)),Object(ee.a)(()=>new u.g))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(ue))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),ge([Object(i.b)(),pe("design:type",Object)],e.prototype,"queryNumberRanges$",void 0),ge([Object(i.b)(),pe("design:type",Object)],e.prototype,"updateNumberRange$",void 0),e})();var Ce=n("pLZG"),Oe=n("vkgz"),je=n("JIr8"),ye=n("YZbJ"),Se=n("LzxC"),Te=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},we=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},De=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Ie=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$e=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},xe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pe=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},_e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ke=function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Me=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ze=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Ae=[ve,(()=>{class e{constructor(e,t,n){this.actions$=e,this.receiversService=t,this.store=n,this.queryReceivers$=this.actions$.pipe(Object(i.e)(g.u),Object(ee.a)(e=>e.payload),Object(K.a)(()=>this.store.pipe(Object(a.r)(Se.b)).pipe(Object(Ce.a)(e=>!!e),Object(Oe.a)(e=>this.auth=e),Object(K.a)(e=>this.receiversService.queryAll()),Object(W.a)(e=>e),Object(Ce.a)(e=>e.payload.doc.data().organization===this.auth.organization),Object(ee.a)(e=>({type:"[Invoicing] Receiver "+e.type,payload:Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id})}))))),this.updateReceiver$=this.actions$.pipe(Object(i.e)(g.z),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.receiversService.update(e).pipe(Object(ee.a)(e=>new g.E(e)),Object(je.a)(e=>(console.error(e),Object(te.of)(new g.D(e))))))),this.updateReceiverSuccess$=this.actions$.pipe(Object(i.e)(g.B),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.receiversService.getMessage("receiver-update-success",[e.id])}),new ye.c({path:["/invoicing/receivers"]})])),this.updateReceiverFail$=this.actions$.pipe(Object(i.e)(g.A),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.receiversService.getMessage("receiver-update-fail",[e.message])})])),this.createReceiver$=this.actions$.pipe(Object(i.e)(g.d),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.receiversService.create(e).pipe(Object(ee.a)(e=>new g.k(e)),Object(je.a)(e=>Object(te.of)(new g.j(e)))))),this.createReceiverSuccess$=this.actions$.pipe(Object(i.e)(g.f),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.c({path:["/invoicing/receivers",e.id]})])),this.createReceiverFail$=this.actions$.pipe(Object(i.e)(g.e),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.receiversService.getMessage("receiver-create-fail",[e.message])})])),this.deleteReceiver$=this.actions$.pipe(Object(i.e)(g.l),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.receiversService.delete(e).pipe(Object(ee.a)(()=>new g.q(e)),Object(je.a)(e=>Object(te.of)(new g.p(e)))))),this.deleteReceiverSuccess$=this.actions$.pipe(Object(i.e)(g.n),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.receiversService.getMessage("receiver-delete-success",[e.id])}),new ye.c({path:["/invoicing/receivers"]})])),this.deleteReceiverFail$=this.actions$.pipe(Object(i.e)(g.m),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.receiversService.getMessage("receiver-delete-fail",[e.message])})])),this.copyReceiverSuccess$=this.actions$.pipe(Object(i.e)(g.c),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/receivers","copy"]}))),this.newReceiverSuccess$=this.actions$.pipe(Object(i.e)(g.s),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/receivers","new"]})))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(oe),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"queryReceivers$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"updateReceiver$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"updateReceiverSuccess$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"updateReceiverFail$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"createReceiver$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"createReceiverSuccess$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"createReceiverFail$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"deleteReceiver$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"deleteReceiverSuccess$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"deleteReceiverFail$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"copyReceiverSuccess$",void 0),Te([Object(i.b)(),we("design:type",Object)],e.prototype,"newReceiverSuccess$",void 0),e})(),(()=>{class e{constructor(e,t,n){this.actions$=e,this.contractsService=t,this.store=n,this.queryContracts$=this.actions$.pipe(Object(i.e)(y.u),Object(ee.a)(e=>e.payload),Object(K.a)(()=>this.store.pipe(Object(a.r)(Se.b)).pipe(Object(Ce.a)(e=>!!e),Object(Oe.a)(e=>this.auth=e),Object(K.a)(e=>this.contractsService.queryAll()),Object(W.a)(e=>e),Object(Ce.a)(e=>e.payload.doc.data().organization===this.auth.organization),Object(ee.a)(e=>{const t="[Invoicing] Contract "+e.type,n=Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id});return n.issuedAt=n.issuedAt.toDate(),n.startDate=n.startDate.toDate(),n.endDate=n.endDate.toDate(),{type:t,payload:se.mapToBDO(n)}})))),this.updateContract$=this.actions$.pipe(Object(i.e)(y.A),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.contractsService.update(se.mapToDTO(e)).pipe(Object(ee.a)(e=>new y.F(e)),Object(je.a)(e=>Object(te.of)(new y.E(e)))))),this.updateContractSuccess$=this.actions$.pipe(Object(i.e)(y.C),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.contractsService.getMessage("contract-update-success",[e.id])}),new ye.c({path:["/invoicing/contracts"]})])),this.updateContractFail$=this.actions$.pipe(Object(i.e)(y.B),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.contractsService.getMessage("contract-update-fail",[e.message])})])),this.createContract$=this.actions$.pipe(Object(i.e)(y.d),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.contractsService.create(se.mapToDTO(e)).pipe(Object(ee.a)(e=>new y.k(e)),Object(je.a)(e=>Object(te.of)(new y.j(e)))))),this.createContractSuccess$=this.actions$.pipe(Object(i.e)(y.f),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.c({path:["/invoicing/contracts",e.id]})])),this.createContractFail$=this.actions$.pipe(Object(i.e)(y.e),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.contractsService.getMessage("contract-create-fail",[e.message])})])),this.deleteContract$=this.actions$.pipe(Object(i.e)(y.l),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.contractsService.delete(se.mapToDTO(e)).pipe(Object(ee.a)(()=>new y.q(e)),Object(je.a)(e=>Object(te.of)(new y.p(e)))))),this.deleteContractSuccess$=this.actions$.pipe(Object(i.e)(y.n),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.contractsService.getMessage("contract-delete-success",[e.id])}),new ye.c({path:["/invoicing/contracts"]})])),this.deleteContractFail$=this.actions$.pipe(Object(i.e)(y.m),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.contractsService.getMessage("contract-delete-fail",[e.message])})])),this.copyContractSuccess$=this.actions$.pipe(Object(i.e)(y.c),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/contracts","copy"]}))),this.newContractSuccess$=this.actions$.pipe(Object(i.e)(y.s),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/contracts","new"]})))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(se),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"queryContracts$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"updateContract$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"updateContractSuccess$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"updateContractFail$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"createContract$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"createContractSuccess$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"createContractFail$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"deleteContract$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"deleteContractSuccess$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"deleteContractFail$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"copyContractSuccess$",void 0),De([Object(i.b)(),Ie("design:type",Object)],e.prototype,"newContractSuccess$",void 0),e})(),(()=>{class e{constructor(e,t,n){this.actions$=e,this.invoicesService=t,this.store=n,this.queryInvoices$=this.actions$.pipe(Object(i.e)(I.C),Object(ee.a)(e=>e.payload),Object(K.a)(()=>this.store.pipe(Object(a.r)(Se.b)).pipe(Object(Ce.a)(e=>!!e),Object(Oe.a)(e=>this.auth=e),Object(K.a)(e=>this.invoicesService.queryAll()),Object(W.a)(e=>e),Object(Ce.a)(e=>e.payload.doc.data().organization===this.auth.organization),Object(ee.a)(e=>{const t="[Invoicing] Invoice "+e.type,n=Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id});return n.issuedAt=n.issuedAt.toDate(),{type:t,payload:n}})))),this.updateInvoice$=this.actions$.pipe(Object(i.e)(I.N),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.invoicesService.update(e).pipe(Object(ee.a)(e=>new I.S(e)),Object(je.a)(e=>(console.error(e),Object(te.of)(new I.R(e))))))),this.updateInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.P),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-update-success",[e.id])}),new ye.c({path:["/invoicing/invoices"]})])),this.updateInvoiceFail$=this.actions$.pipe(Object(i.e)(I.O),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-update-fail",[e.message])})])),this.createInvoice$=this.actions$.pipe(Object(i.e)(I.d),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.invoicesService.create(e).pipe(Object(ee.a)(e=>new I.q(e)),Object(je.a)(e=>Object(te.of)(new I.m(e)))))),this.createInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.i),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.c({path:["/invoicing/invoices",e.id]})])),this.createInvoiceFail$=this.actions$.pipe(Object(i.e)(I.e),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-create-fail",[e.message])})])),this.deleteInvoice$=this.actions$.pipe(Object(i.e)(I.r),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.invoicesService.delete(e).pipe(Object(ee.a)(e=>new I.w(e)),Object(je.a)(e=>Object(te.of)(new I.v(e)))))),this.deleteInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.t),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-delete-success",[e.id])}),new ye.c({path:["/invoicing/invoices"]})])),this.deleteInvoiceFail$=this.actions$.pipe(Object(i.e)(I.s),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-delete-fail",[e.message])})])),this.copyInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.c),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/invoices","copy"]}))),this.newInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.y),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/invoices","new"]}))),this.newQuickInvoiceSuccess$=this.actions$.pipe(Object(i.e)(I.z),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/invoices","quick"]}))),this.createInvoicePdf$=this.actions$.pipe(Object(i.e)(I.f),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.invoicesService.createInvoicePDF(e).pipe(Object(ee.a)(e=>new I.p(e)),Object(je.a)(e=>Object(te.of)(new I.o(e)))))),this.createInvoicePdfFail$=this.actions$.pipe(Object(i.e)(I.g),Object(Oe.a)(e=>console.error(e)),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-pdf-failed")})])),this.createInvoicePdfSuccess$=this.actions$.pipe(Object(i.e)(I.h),Object(Oe.a)(()=>console.log("*** CreateInvoicePdfSuccess")),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.invoicesService.getMessage("invoice-pdf-created")})])),this.sendInvoiceEmail$=this.actions$.pipe(Object(i.e)(I.G),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.invoicesService.sendInvoiceEmail(e).pipe(Object(Oe.a)(()=>this.store.dispatch(new ye.h)),Object(ee.a)(e=>new I.M(e)),Object(je.a)(e=>Object(te.of)(new I.L(e)))))),this.sendInvoiceEmailFail$=this.actions$.pipe(Object(i.e)(I.H),Object(Oe.a)(e=>console.error(e)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>[new ye.e({message:this.invoicesService.getMessage("invoice-email-fail")})])),this.sendInvoiceEmailSuccess$=this.actions$.pipe(Object(i.e)(I.I),Object(Oe.a)(()=>console.log("*** SendInvoiceEmailSuccess")),Object(ee.a)(e=>e.payload),Object(K.a)(e=>[new ye.e({message:this.invoicesService.getMessage("invoice-email-success")})]))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(be),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"queryInvoices$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"updateInvoice$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"updateInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"updateInvoiceFail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoice$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoiceFail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"deleteInvoice$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"deleteInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"deleteInvoiceFail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"copyInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"newInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"newQuickInvoiceSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoicePdf$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoicePdfFail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"createInvoicePdfSuccess$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"sendInvoiceEmail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"sendInvoiceEmailFail$",void 0),$e([Object(i.b)(),xe("design:type",Object)],e.prototype,"sendInvoiceEmailSuccess$",void 0),e})(),(()=>{class e{constructor(e,t,n){this.actions$=e,this.settingsService=t,this.store=n,this.querySettings$=this.actions$.pipe(Object(i.e)(R.p),Object(K.a)(e=>this.settingsService.queryAll()),Object(W.a)(e=>e),Object(ee.a)(e=>{const t="[Invoicing] Setting "+e.type,n=Object.assign({},e.payload.doc.data());return n.values.forEach(e=>{e.validFrom&&(e.validFrom=e.validFrom.toDate()),e.validTo&&(e.validTo=e.validTo.toDate())}),{type:t,payload:n}})),this.updateSetting$=this.actions$.pipe(Object(i.e)(R.t),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.settingsService.update(e).pipe(Object(ee.a)(e=>new R.y(e)),Object(je.a)(e=>(console.error(e),Object(te.of)(new R.x(e))))))),this.updateSettingSuccess$=this.actions$.pipe(Object(i.e)(R.v),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.settingsService.getMessage("setting-update-success",[e.id])})])),this.updateSettingFail$=this.actions$.pipe(Object(i.e)(R.u),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.settingsService.getMessage("setting-update-fail",[e.message])})])),this.createSetting$=this.actions$.pipe(Object(i.e)(R.d),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.settingsService.create(e).pipe(Object(ee.a)(e=>new R.h(e)),Object(je.a)(e=>Object(te.of)(new R.g(e)))))),this.createSettingSuccess$=this.actions$.pipe(Object(i.e)(R.f),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.c({path:["/invoicing/settings",e.id]})])),this.createSettingFail$=this.actions$.pipe(Object(i.e)(R.e),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.settingsService.getMessage("setting-create-fail",[e.message])})])),this.deleteSetting$=this.actions$.pipe(Object(i.e)(R.i),Object(Oe.a)(()=>this.store.dispatch(new ye.g)),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.settingsService.delete(e).pipe(Object(ee.a)(()=>new R.m(e)),Object(je.a)(e=>Object(te.of)(new R.l(e)))))),this.deleteSettingSuccess$=this.actions$.pipe(Object(i.e)(R.k),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.settingsService.getMessage("setting-deleted",[e.id])})])),this.deleteSettingFail$=this.actions$.pipe(Object(i.e)(R.j),Object(ee.a)(e=>e.payload),Object(W.a)(e=>[new ye.h,new ye.e({message:this.settingsService.getMessage("setting-delete-fail",[e.message])})])),this.copySettingSuccess$=this.actions$.pipe(Object(i.e)(R.c),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/settings","copy"]}))),this.newSettingSuccess$=this.actions$.pipe(Object(i.e)(R.o),Object(ee.a)(e=>e.payload),Object(ee.a)(e=>new ye.c({path:["/invoicing/settings","new"]})))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(de),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"querySettings$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"updateSetting$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"updateSettingSuccess$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"updateSettingFail$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"createSetting$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"createSettingSuccess$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"createSettingFail$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"deleteSetting$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"deleteSettingSuccess$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"deleteSettingFail$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"copySettingSuccess$",void 0),Pe([Object(i.b)(),_e("design:type",Object)],e.prototype,"newSettingSuccess$",void 0),e})(),(()=>{class e{constructor(e,t){this.actions$=e,this.documentLinksService=t,this.queryDocumentLinks$=this.actions$.pipe(Object(i.e)(k.m),Object(K.a)(e=>this.documentLinksService.queryAll()),Object(W.a)(e=>e),Object(ee.a)(e=>({type:"[Invoicing] Document Link "+e.type,payload:Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id})}))),this.queryDocumentLinksForObject$=this.actions$.pipe(Object(i.e)(k.n),Object(ee.a)(e=>e),Object(K.a)(e=>this.documentLinksService.queryForObject(e.payload)),Object(W.a)(e=>e),Object(ee.a)(e=>({type:"[Invoicing] Document Link "+e.type,payload:Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id})}))),this.updateDocumentLink$=this.actions$.pipe(Object(i.e)(k.r),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.documentLinksService.update(e).pipe(Object(ee.a)(e=>new k.u(e)),Object(je.a)(e=>(console.error(e),Object(te.of)(new k.t(e))))))),this.createDocumentLink$=this.actions$.pipe(Object(i.e)(k.b),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.documentLinksService.create(e).pipe(Object(ee.a)(e=>new k.f(e)),Object(je.a)(e=>Object(te.of)(new k.e(e)))))),this.deleteDocumentLink$=this.actions$.pipe(Object(i.e)(k.g),Object(ee.a)(e=>e.payload),Object(K.a)(e=>this.documentLinksService.delete(e).pipe(Object(ee.a)(()=>new k.j(e)),Object(je.a)(e=>Object(te.of)(new k.i(e))))))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(me))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),ke([Object(i.b)(),Me("design:type",Object)],e.prototype,"queryDocumentLinks$",void 0),ke([Object(i.b)(),Me("design:type",Object)],e.prototype,"queryDocumentLinksForObject$",void 0),ke([Object(i.b)(),Me("design:type",Object)],e.prototype,"updateDocumentLink$",void 0),ke([Object(i.b)(),Me("design:type",Object)],e.prototype,"createDocumentLink$",void 0),ke([Object(i.b)(),Me("design:type",Object)],e.prototype,"deleteDocumentLink$",void 0),e})(),(()=>{class e{constructor(e,t,n){this.actions$=e,this.revenuesService=t,this.store=n,this.queryRevenues$=this.actions$.pipe(Object(i.e)(X.c),Object(ee.a)(e=>e.payload),Object(K.a)(()=>this.store.pipe(Object(a.r)(Se.b)).pipe(Object(Ce.a)(e=>!!e),Object(Oe.a)(e=>this.auth=e),Object(K.a)(e=>this.revenuesService.queryAll()),Object(W.a)(e=>e),Object(Ce.a)(e=>e.payload.doc.data().organization===this.auth.organization),Object(ee.a)(e=>({type:"[Invoicing] Revenue "+e.type,payload:Object.assign(Object.assign({},e.payload.doc.data()),{id:e.payload.doc.id.substring(0,4)})})))))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(i.a),l.Zb(fe),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),function(e,t,n,c){var a,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,c);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([Object(i.b)(),ze("design:type",Object)],e.prototype,"queryRevenues$",void 0),e})()],Be=Object(a.p)(Q,e=>e.numberRanges),Re=Object(a.p)(Be,h),Ee=Object(a.p)(Be,e=>e.loaded),Ne=Object(a.p)(Q,e=>e.receivers),Fe=Object(a.p)(Ne,C),Le=Object(a.p)(Ne,O),Xe=Object(a.p)(Ne,j),qe=(Object(a.p)(Xe,e=>ce.ReceiverFactory.fromDataArray(e)),Object(a.p)(Ne,e=>e.loaded)),He=Object(a.p)(Ne,e=>e.current.receiver),Ue=Object(a.p)(He,e=>e&&ce.ReceiverFactory.fromData(e)),Ve=(Object(a.p)(Le,ye.i,(e,t)=>t.state&&e[t.state.params.id]),Object(a.p)(Le,Fe,(e,t)=>t.map(t=>e[t]))),Ge=Object(a.p)(Ve,e=>ce.ReceiverFactory.fromDataArray(e)),Ye=Object(a.p)(Ge,e=>e.filter(e=>e.isActive())),Ze=Object(a.p)(Q,e=>e.contracts),Qe=Object(a.p)(Ze,w),Je=Object(a.p)(Ze,D),Ke=Object(a.p)(Je,e=>ce.ContractFactory.fromDataArray(e)),We=Object(a.p)(Ze,e=>e.loaded),et=Object(a.p)(Ze,e=>e.current.contract),tt=Object(a.p)(et,e=>e&&ce.ContractFactory.fromData(e)),nt=(Object(a.p)(Qe,ye.i,(e,t)=>t.state&&e[t.state.params.id]),Object(a.p)(Ke,e=>e.filter(e=>e.term.isActive||e.term.isFuture).map(e=>e.data))),ct=Object(a.p)(Ke,e=>e.filter(e=>e.term.isInvoiceable).map(e=>e.data)),at=(Object(a.p)(Ke,e=>e.filter(e=>!e.term.isActive&&!e.term.isFuture).map(e=>e.data)),Object(a.p)(Q,e=>e.invoices)),it=Object(a.p)(at,P),ot=Object(a.p)(at,_),rt=Object(a.p)(ot,e=>ce.InvoiceFactory.fromDataArray(e)),st=Object(a.p)(at,e=>e.loaded),lt=Object(a.p)(at,e=>e.current.invoice),bt=Object(a.p)(lt,e=>e&&ce.InvoiceFactory.fromData(e)),dt=Object(a.p)(it,ye.i,(e,t)=>t.state&&e[t.state.params.id]),ut=Object(a.p)(rt,e=>e.filter(e=>e.isOpen()).map(e=>e.data)),mt=Object(a.p)(ut,e=>e.map(e=>ce.InvoiceFactory.fromData(e))),ft=(Object(a.p)(mt,e=>e.filter(e=>e.isBilled()).map(e=>e.data)),Object(a.p)(mt,e=>e.filter(e=>e.isDue()).map(e=>e.data)),Object(a.p)(rt,e=>e.filter(e=>e.isPaid()).map(e=>e.data)),Object(a.p)(dt,e=>e&&e.status!==ce.InvoiceStatus.paid)),ht=Object(a.p)(Q,e=>e.documentLinks),gt=(Object(a.p)(ht,A),Object(a.p)(ht,B)),pt=Object(a.p)(ht,e=>e.loaded),vt=Object(a.p)(Q,e=>e.settings),Ct=Object(a.p)(vt,F),Ot=Object(a.p)(vt,L),jt=Object(a.p)(vt,e=>e.loaded),yt=Object(a.p)(Ct,e=>e.countries),St=Object(a.p)(Ct,e=>e.vat),Tt=Object(a.p)(rt,Le,(e,t)=>e.filter(e=>e.isOpen()).map(e=>ce.OpenInvoiceFactory.fromInvoice(e,t[e.header.receiverId].name).data).sort((e,t)=>e.dueDate.getTime()-t.dueDate.getTime())),wt=Object(a.p)(He,Je,(e,t)=>e&&t&&t.filter(t=>t.customerId===e.id)),Dt=Object(a.p)(wt,e=>e&&e.sort((e,t)=>t.id.localeCompare(e.id)).slice(0,5)),It=Object(a.p)(Dt,e=>e&&ce.ContractFactory.fromDataArray(e)),$t=Object(a.p)(He,nt,(e,t)=>e&&t&&t.filter(t=>t.customerId===e.id)),xt=Object(a.p)($t,e=>e&&ce.ContractFactory.fromDataArray(e)),Pt=Object(a.p)(He,ct,(e,t)=>e&&t&&t.filter(t=>t.customerId===e.id)),_t=Object(a.p)(Pt,e=>e&&ce.ContractFactory.fromDataArray(e)),kt=Object(a.p)(He,ot,(e,t)=>e&&t&&t.filter(t=>t.receiverId===e.id)),Mt=Object(a.p)(kt,e=>e&&ce.InvoiceFactory.fromDataArray(e)),zt=Object(a.p)(Mt,e=>e&&e.filter(e=>e.isOpen()).map(e=>e.data)),At=Object(a.p)(zt,e=>e&&ce.InvoiceFactory.fromDataArray(e)),Bt=Object(a.p)(kt,e=>e&&e.length>0&&[e.reduce((e,t)=>e&&e.id>=t.id?e:e=t)]),Rt=Object(a.p)(Bt,e=>e&&e.map(e=>ce.InvoiceFactory.fromData(e))),Et=Object(a.p)(et,Le,(e,t)=>e&&t[e.customerId]),Nt=Object(a.p)(Et,e=>e&&ce.ReceiverFactory.fromData(e)),Ft=Object(a.p)(et,ot,(e,t)=>e&&t&&t.filter(t=>t.contractId===e.id)),Lt=Object(a.p)(Ft,e=>e&&ce.InvoiceFactory.fromDataArray(e)),Xt=Object(a.p)(Ft,e=>e&&e.length),qt=Object(a.p)(Ft,e=>e&&e.filter(e=>e.status!==ce.InvoiceStatus.paid)),Ht=Object(a.p)(qt,e=>e&&ce.InvoiceFactory.fromDataArray(e)),Ut=Object(a.p)(Xt,e=>0===e),Vt=Object(a.p)(lt,Le,(e,t)=>e&&t[e.receiverId]),Gt=Object(a.p)(Vt,e=>e&&ce.ReceiverFactory.fromData(e)),Yt=Object(a.p)(lt,Qe,(e,t)=>e&&t[e.contractId]),Zt=Object(a.p)(Yt,e=>e&&ce.ContractFactory.fromData(e)),Qt=Object(a.p)(Yt,ct,(e,t)=>(console.log("selectSelectableContractsForInvoice: ",e,t),!e||t.findIndex(t=>t.id===e.id)>=0?t:[e,...t])),Jt=Object(a.p)(Qt,e=>ce.ContractFactory.fromDataArray(e)),Kt=Object(a.p)(kt,e=>e?e.length:0),Wt=Object(a.p)(wt,e=>e?e.length:0),en=Object(a.p)(Wt,Kt,(e,t)=>e+t===0),tn=Object(a.p)(Pt,e=>{const t=ce.ContractFactory.fromDataArray(e).filter(e=>e.term.isInvoiceable);return!(!t||1!==t.length)}),nn=Object(a.p)(Qe,Le,it,(e,t,n)=>ce.ContractSummariesFactory.fromEntities(t,e,n)),cn=Object(a.p)(nn,e=>Object.keys(e).map(t=>e[+t])),an=Object(a.p)(cn,e=>e.sort((e,t)=>t.object.header.issuedAt.getTime()-e.object.header.issuedAt.getTime()||t.object.header.id.localeCompare(e.object.header.id))),on=Object(a.p)(it,Le,(e,t)=>ce.InvoiceSummariesFactory.fromEntities(t,e)),rn=Object(a.p)(on,e=>Object.keys(e).map(t=>e[t])),sn=Object(a.p)(rn,e=>e.sort((e,t)=>t.object.header.issuedAt.getTime()-e.object.header.issuedAt.getTime()||t.object.header.id.localeCompare(e.object.header.id))),ln=Object(a.p)(Le,Qe,it,(e,t,n)=>ce.ReceiverSummariesFactory.fromEntities(e,t,n)),bn=Object(a.p)(ln,Fe,(e,t)=>t.map(t=>e[t])),dn=Object(a.p)(lt,gt,(e,t)=>t.filter(t=>t.owner==="invoices/"+e.id)),un=Object(a.p)(et,gt,(e,t)=>t.filter(t=>t.owner==="contracts/"+e.id)),mn=Object(a.p)(He,gt,(e,t)=>t.filter(t=>t.owner==="receivers/"+e.id)),fn=Object(a.p)(lt,dn,(e,t)=>{if(e.status!==ce.InvoiceStatus.created)return!1;const n=t.filter(e=>e.attachToEmail&&e.type===ce.DocumentLinkType.Invoice);return!(!n||0===n.length)}),hn=Object(a.p)(Q,e=>e.revenues),gn=(Object(a.p)(hn,U),Object(a.p)(hn,V),Object(a.p)(hn,G)),pn=Object(a.p)(gn,e=>ce.RevenueFactory.fromDataArray(e)),vn=Object(a.p)(pn,e=>e.filter(e=>+e.year>(new Date).getFullYear()-3)),Cn=(Object(a.p)(hn,Y),Object(a.p)(hn,e=>e.loading),Object(a.p)(hn,e=>e.loaded));Object(a.p)(hn,e=>e.error);var On=n("AytR");let jn=(()=>{class e{constructor(e,t){this.store=e,this.language=t.substr(0,2)}getSettings(){return this.store.pipe(Object(a.r)(Ot))}getSupportedLanguages(){return On.a.supportedLanguages}getCountrySettings(){return this.store.pipe(Object(a.r)(yt))}getCountries(){return this.store.pipe(Object(a.r)(yt),Object(ee.a)(e=>this.mapCountriesToArray(e)))}getVatSettings(){return this.store.pipe(Object(a.r)(St))}throwError(e){this.store.dispatch(new J.N(e))}update(e){this.store.dispatch(new J.M(e))}mapCountriesToArray(e){const t=[];return e.values.forEach(e=>{t.push({isoCode:e.isoCode,name:e.names[this.language]})}),t}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h),l.Zb(l.w))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();const yn=[jn];var Sn=n("IzEk"),Tn=n("MtjB"),wn=n("bOdf"),Dn=n("BFxc"),In=n("v8Ou");class $n{constructor(e){this.store=e,this.setLoggedInUserFromAuth()}change(e){this.store.dispatch(this.buildChangeSuccessEvent(e))}create(e){this.store.dispatch(this.buildCreateCommand(e))}delete(e){this.store.dispatch(this.buildDeleteCommand(e))}isUserAllowedToEdit(){return this.auth&&this.auth.roles&&this.auth.roles.indexOf("sales-user")>=0}new(e){const t=Object.assign({},this.getTemplate());this.store.dispatch(this.buildNewEvent(t))}update(e){this.store.dispatch(this.buildUpdateCommand(e))}setLoggedInUserFromAuth(){this.store.pipe(Object(a.r)(Se.b)).subscribe(e=>this.auth=e)}}class xn extends $n{constructor(e){super(e),this.store=e}change(e){this.store.dispatch(this.buildChangeSuccessEvent(e.data))}copy(e){const t=Object.assign({},e.data,Object.assign({},this.getDefaultValues()),{organization:this.auth.organization});this.store.dispatch(this.buildCopySuccessEvent(t))}create(e){e.header.id=this.getNextId(e),e.header.organization=this.auth.organization,e.header.isDeletable=!0,this.store.dispatch(this.buildCreateCommand(e.data))}delete(e){this.store.dispatch(new In.d({do:this.buildDeleteCommand(e.data),title:this.getConfirmationQuestion(e.header.id)}))}getCurrent(){return this.store.pipe(Object(a.r)(this.getCurrentSelector()))}getSummary(){return this.store.pipe(Object(a.r)(this.getSummarySelector()))}isChangeable(){return this.store.pipe(Object(a.r)(this.getIsChangeableSelector()))}isDeletable(){return this.store.pipe(Object(a.r)(this.getIsDeletableSelector()))}new(e){const t=Object.assign({},this.getTemplate());this.store.dispatch(this.buildNewEvent(t))}update(e){this.store.dispatch(this.buildUpdateCommand(e.data))}}class Pn extends xn{constructor(e){super(e),this.store=e}addItem(e){console.log("process add item"),e.items.push(this.newItem(e)),this.change(e)}newItem(e){const t=Object.assign({},{id:e.getNextItemId()},Object.assign({},this.getItemTemplate()));return this.buildItem(t)}removeItem(e,t){e.items=e.items.filter(e=>e.data.id!==t),this.change(e)}}let _n=(()=>{class e extends Pn{constructor(e){super(e),this.store=e,this.currentData=ce.Invoice.defaultValues(),this.setNextIdsFromNumberRanges()}change(e){this.processChanges(e).subscribe(e=>{console.log("changed: ",e),this.currentData=e.data,this.store.dispatch(this.buildChangeSuccessEvent(e.data))})}createPdf(e){this.store.dispatch(new J.l(e.data))}getContract(){return this.store.pipe(Object(a.r)(Zt))}getContracts(){return this.store.pipe(Object(a.r)(Jt))}getCurrent(){return this.store.pipe(Object(a.r)(this.getCurrentSelector()))}getReceiver(){return this.store.pipe(Object(a.r)(Gt))}getReceivers(){return this.store.pipe(Object(a.r)(Ye))}isSendable(){return this.store.pipe(Object(a.r)(fn))}newInvoiceFromContract(e){const t=ce.InvoiceFactory.fromContract(e);this.getVatPercentage(t).pipe(Object(Sn.a)(1),Object(Oe.a)(e=>{t.vatPercentage=e,t.items.forEach(t=>t.vatPercentage=e)}),Object(Oe.a)(()=>this.store.dispatch(new J.u(t.data)))).subscribe()}sendEmail(e){this.store.dispatch(new J.H(e.data))}buildChangeSuccessEvent(e){return new J.c(e)}buildCopySuccessEvent(e){return new J.g(e)}buildCreateCommand(e){return new J.k(e)}buildDeleteCommand(e){return new J.p(e)}buildItem(e){return ce.InvoiceItemFactory.fromData(e)}buildNewEvent(e){return new J.t(e)}buildUpdateCommand(e){return new J.K(e)}getConfirmationQuestion(e){return`Soll die Rechnung ${e} wirklich gel\xf6scht werden?`}getCurrentSelector(){return bt}getDefaultValues(){return ce.Invoice.defaultValues()}getIsChangeableSelector(){return ft}getIsDeletableSelector(){return ft}getItemTemplate(){return ce.InvoiceItem.defaultValues()}getNextId(e){return this.nextIds[e.header.billingMethod]}getSummarySelector(){return sn}getTemplate(){return ce.Invoice.defaultValues()}addContractItemRelatedData(e,t){console.log("*** addContractItemRelatedData ***");const n=e.getItem(t);return n.contractItemId||(n.contractItemId=t),this.changeContractItemRelatedData(e,t).pipe(Object(Tn.a)(e=>{if(n.contractItemId>1)return n.contractItemId--,Object(te.of)(!0);Object(te.throwError)("contract_item_not_found")}))}changeContractItemRelatedData(e,t){console.log("*** changeContractItemRelatedData ***");const n=e.getItem(t);return n.contractItemId?this.getContracts().pipe(Object(ee.a)(t=>t.find(t=>t.header.id===e.header.contractId)),Object(ee.a)(e=>e.getItem(+n.contractItemId)),Object(ee.a)(t=>(n.setItemDataFromContractItem(t),e)),Object(Sn.a)(1),Object(je.a)(()=>Object(te.throwError)("contract_not_found"))):Object(te.of)(e)}changeContractRelatedData(e){return console.log("*** changeContractRelatedData *** "),this.getContracts().pipe(Object(ee.a)(t=>t.find(t=>t.header.id===e.header.contractId)),Object(ee.a)(t=>e.setHeaderDataFromContract(t)),Object(Sn.a)(1),Object(je.a)(()=>Object(te.throwError)("contract_not_found")))}changeReceiverRelatedData(e){return console.log("*** changeReceiverRelatedData ***: "),this.getVatPercentage(e).pipe(Object(ee.a)(t=>e.setVatPercentage(t)),Object(Sn.a)(1),Object(je.a)(()=>Object(te.throwError)("vat_not_found")))}getVatPercentage(e){const t=this.store.pipe(Object(a.r)(Le)),n=this.store.pipe(Object(a.r)(St));return t.pipe(Object(ee.a)(t=>t[e.header.receiverId].address.country+"_full"),Object(K.a)(t=>n.pipe(Object(ee.a)(n=>ce.Vat.findVatPercentage(n,t,e.header.issuedAt)))),Object(Sn.a)(1))}processChangeAction(e,t){switch(console.log("process change action: ",e.type),e.type){case ce.INVOICE_HEADER_RECEIVER_ID_CHANGED:return this.changeReceiverRelatedData(e.payload);case ce.INVOICE_HEADER_CONTRACT_ID_CHANGED:return this.changeContractRelatedData(e.payload);case ce.INVOICE_ITEM_CONTRACT_ITEM_ID_CHANGED:return this.changeContractItemRelatedData(e.payload,+e.change.id);case ce.INVOICE_ITEM_ID_ADDED:return this.addContractItemRelatedData(e.payload,+e.change.id);default:return Object(te.of)(t)}}processChanges(e){return Object(te.of)(this.currentData).pipe(Object(ee.a)(t=>{const n=new ce.InvoiceChangeActionFactory(t,e).getChangeActions();return console.log("change actions: ",n),n}),Object(wn.a)(t=>t.map(t=>this.processChangeAction(t,e))),Object(Ce.a)(e=>!!e),Object(W.a)(e=>(console.log("mergeMap results: ",e),e)),Object(Dn.a)(1))}setNextIdsFromNumberRanges(){this.store.pipe(Object(a.r)(Re),Object(Ce.a)(e=>!!e.invoices&&!!e["credit-requests"]),Object(ee.a)(e=>(this.nextIds=[],this.nextIds.push(ce.NumberRangeFactory.fromData(e.invoices).nextId),this.nextIds.push(ce.NumberRangeFactory.fromData(e["credit-requests"]).nextId),this.nextIds))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),kn=(()=>{class e extends xn{constructor(e,t,n){super(n),this.settings=e,this.invoicesBusinessService=t,this.store=n,this.setNextIdFromNumberRange()}createQuickInvoice(e){this.store.pipe(Object(a.r)(_t),Object(ee.a)(e=>e.filter(e=>e.term.isInvoiceable)),Object(Ce.a)(e=>1===e.length),Object(ee.a)(e=>this.invoicesBusinessService.newInvoiceFromContract(e[0])),Object(Sn.a)(1)).subscribe()}getActiveContracts(){return this.store.pipe(Object(a.r)(xt))}getCountries(){return this.settings.getCountries()}getLastInvoices(){return this.store.pipe(Object(a.r)(Rt))}getOpenInvoices(){return this.store.pipe(Object(a.r)(At))}getRecentContracts(){return this.store.pipe(Object(a.r)(It))}isQualifiedForQuickInvoice(){return this.store.pipe(Object(a.r)(tn))}buildChangeSuccessEvent(e){return new J.d(e)}buildCopySuccessEvent(e){return new J.h(e)}buildCreateCommand(e){return new J.m(e)}buildDeleteCommand(e){return new J.q(e)}buildNewEvent(e){return new J.v(e)}buildUpdateCommand(e){return new J.L(e)}getConfirmationQuestion(e){return`Soll der Rechnungsempf\xe4nger ${e} wirklich gel\xf6scht werden?`}getCurrentSelector(){return Ue}getDefaultValues(){return ce.Receiver.defaultValues()}getIsChangeableSelector(){return en}getIsDeletableSelector(){return en}getNextId(e){return this.nextId}getSummarySelector(){return bn}getTemplate(){return ce.Receiver.defaultValues()}setNextIdFromNumberRange(){this.store.pipe(Object(a.r)(Re),Object(Ce.a)(e=>!!e.receivers),Object(ee.a)(e=>ce.NumberRangeFactory.fromData(e.receivers).nextId)).subscribe(e=>this.nextId=e)}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(jn),l.Zb(_n),l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),Mn=(()=>{class e extends Pn{constructor(e,t){super(e),this.store=e,this.invoicesBusinessService=t,this.setNextIdFromNumberRange()}createQuickInvoice(e){return this.invoicesBusinessService.newInvoiceFromContract(e)}getInvoices(){return this.store.pipe(Object(a.r)(Lt))}getOpenInvoices(){return this.store.pipe(Object(a.r)(Ht))}getPartner(){return this.store.pipe(Object(a.r)(Nt))}getReceivers(){return this.store.pipe(Object(a.r)(Ye))}buildChangeSuccessEvent(e){return new J.a(e)}buildCopySuccessEvent(e){return new J.f(e)}buildCreateCommand(e){return new J.i(e)}buildDeleteCommand(e){return new J.n(e)}buildItem(e){return ce.ContractItemFactory.fromData(e)}buildNewEvent(e){return new J.r(e)}buildUpdateCommand(e){return new J.I(e)}getConfirmationQuestion(e){return`Soll der Vertrag ${e} wirklich gel\xf6scht werden?`}getCurrentSelector(){return tt}getDefaultValues(){return ce.Contract.defaultValues()}getIsChangeableSelector(){return Ut}getIsDeletableSelector(){return Ut}getItemTemplate(){return ce.ContractItem.defaultValues()}getNextId(e){return this.nextId}getSummarySelector(){return an}getTemplate(){return ce.Contract.defaultValues()}setNextIdFromNumberRange(){this.store.pipe(Object(a.r)(Re),Object(Ce.a)(e=>!!e.contracts),Object(ee.a)(e=>ce.NumberRangeFactory.fromData(e.contracts).nextId)).subscribe(e=>this.nextId=e)}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h),l.Zb(_n))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),zn=(()=>{class e extends $n{constructor(e){super(e),this.store=e}getDocumentLinks(e){const t=e;if(!t)return Object(te.of)([]);switch(t){case"contracts":return this.getDocumentLinksForContract();case"invoices":return this.getDocumentLinksForInvoice();case"receivers":return this.getDocumentLinksForReceiver();default:return Object(te.throwError)(new Error("Unknown owner"))}}getDocumentLinksForContract(){return this.store.pipe(Object(a.r)(un))}getDocumentLinksForInvoice(){return this.store.pipe(Object(a.r)(dn))}getDocumentLinksForReceiver(){return this.store.pipe(Object(a.r)(mn))}buildChangeSuccessEvent(e){return new J.b(e)}buildCreateCommand(e){return new J.j(e)}buildDeleteCommand(e){return new J.o(e)}buildNewEvent(e){return new J.s(e)}buildUpdateCommand(e){return new J.J(e)}getTemplate(){return ce.DocumentLink.defaultValues()}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),An=(()=>{class e{constructor(e){this.store=e}calculateTotalRevenues(){return this.store.pipe(Object(a.r)(vn),Object(ee.a)(e=>ce.Revenue.calculateTotalRevenuesPerYear(e)))}selectOpenInvoices(){return this.store.pipe(Object(a.r)(Tt))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();const Bn=[kn,Mn,_n,zn,An];let Rn=(()=>{class e{constructor(e){this.service=e}ngOnInit(){this.summaries$=this.service.getSummary()}onCopy(e){this.service.copy(e)}onDelete(e){this.service.delete(e)}onNew(e){this.service.new(),e&&e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(xn))},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var En=n("I7u4"),Nn=n("ofXK"),Fn=n("bTqV");let Ln=(()=>{class e{constructor(){this.copy=new l.o,this.delete=new l.o}ngOnChanges(e){}onCopy(){this.copy.emit(this.summary.object)}onDelete(){this.delete.emit(this.summary.object)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],inputs:{summary:"summary"},outputs:{copy:"copy",delete:"delete"},features:[l.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var Xn=n("Wp6s");class qn{static getObjectUrl(e){return"/invoicing/"+e.header.objectType}}var Hn=n("znSr");const Un=function(e,t){return[e,t]};let Vn=(()=>{class e{constructor(){}getAvatarClasses(){switch(this.object.header.objectType){case"contracts":return{"jo-id-avatar--active":this.object.term.isActive,"jo-id-avatar--expired":!this.object.term.isActive,"jo-id-avatar--future":this.object.term.isFuture};case"invoices":return{"jo-id-avatar--ok":this.object.isPaid(),"jo-id-avatar--inprocess":this.object.isBilled()&&!this.object.isDue()||this.object.isOpen()&&!this.object.isDue(),"jo-id-avatar--alert":this.object.isDue()};case"receivers":return{"jo-id-avatar--ok":0===this.object.header.status,"jo-id-avatar--alert":1===this.object.header.status}}}getObjectUrl(){return qn.getObjectUrl(this.object)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-card-avatar"]],inputs:{object:"object"},decls:2,vars:6,consts:[["mat-card-avatar","",1,"jo-id-avatar",3,"routerLink","ngClass"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Cc(1),l.Sb()),2&e&&(l.nc("routerLink",l.qc(3,Un,t.getObjectUrl(),t.object.header.id))("ngClass",t.getAvatarClasses()),l.Cb(1),l.Ec(" ",null==t.object?null:t.object.header.id,"\n"))},directives:[Xn.c,s.h,Nn.k,Hn.a],styles:[".jo-id-avatar[_ngcontent-%COMP%]{width:7rem;height:7rem;background-color:#ccc;border-radius:100%;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:1.4rem;cursor:pointer;outline:none}.jo-id-avatar--active[_ngcontent-%COMP%]{background-color:#2e7d32}.jo-id-avatar--expired[_ngcontent-%COMP%]{background-color:#303030}.jo-id-avatar--future[_ngcontent-%COMP%]{background-color:#ff8f00}.jo-id-avatar--alert[_ngcontent-%COMP%]{background-color:#c62828}.jo-id-avatar--ok[_ngcontent-%COMP%]{background-color:#2e7d32}.jo-id-avatar--inprocess[_ngcontent-%COMP%]{background-color:#ff8f00}"],changeDetection:0}),e})();var Gn,Yn,Zn;function Qn(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",4),l.dc("click",(function(t){return l.tc(e),l.hc(2).onDelete(t)})),l.Tb(1,"span"),l.Xb(2,Zn),l.Sb(),l.Sb()}}function Jn(e,t){if(1&e){const e=l.Ub();l.Rb(0),l.Tb(1,"button",2),l.dc("click",(function(t){return l.tc(e),l.hc().onCopy(t)})),l.Tb(2,"span"),l.Xb(3,Yn),l.Sb(),l.Sb(),l.Bc(4,Qn,3,0,"button",3),l.Qb()}if(2&e){const e=l.hc();l.Cb(4),l.nc("ngIf",e.isDeletable)}}Gn=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,Yn=$localize`:␟feabfc384269a35e1f051ef9302a4b5624f3a69a␟6421015407864399648:Kopieren`,Zn=$localize`:␟a813fd43c9a1b211fe541045d263d2c500c80f0f␟4580399730639224598:Löschen`;const Kn=function(e,t){return[e,t]},Wn=function(){return["sales-user"]};let ec=(()=>{class e{constructor(){this.copy=new l.o,this.delete=new l.o}getObjectUrl(){return qn.getObjectUrl(this.object)}onCopy(e){this.copy.emit(),e&&e.stopPropagation()}onDelete(e){this.delete.emit(),e&&e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-card-buttons"]],inputs:{object:"object",isDeletable:"isDeletable"},outputs:{copy:"copy",delete:"delete"},decls:4,vars:6,consts:[["id","btn_details","mat-button","",3,"routerLink"],[4,"joIfAuthorizedAs"],["id","btn_copy","mat-button","",3,"click"],["id","btn_delete","mat-button","",3,"click",4,"ngIf"],["id","btn_delete","mat-button","",3,"click"]],template:function(e,t){1&e&&(l.Tb(0,"a",0),l.Tb(1,"span"),l.Xb(2,Gn),l.Sb(),l.Sb(),l.Bc(3,Jn,5,1,"ng-container",1)),2&e&&(l.nc("routerLink",l.qc(2,Kn,t.getObjectUrl(),t.object.header.id)),l.Cb(3),l.nc("joIfAuthorizedAs",l.oc(5,Wn)))},directives:[Fn.a,s.j,En.a,Fn.b,Nn.m],styles:[""],changeDetection:0}),e})();var tc,nc,cc,ac,ic,oc;tc=$localize`:␟1869a4223c33665483422f5a4ac8f65f267b50d7␟1885929916887047907:Vertragspartner:`,nc=$localize`:␟a301530b6f95d475f9a64ba716401cdf34417b31␟109610543903303314:Vertragsbeginn:`,cc=$localize`:␟8a113be54d0dcaf1307352671cb723771d9c1ccb␟4290228741319410457:Vertragsende:`,ac=$localize`:␟65a37375902cd6566f622d7f93caad03b955ecbc␟6159327805228198628:Budget:`,ic=$localize`:␟0b7867162cf91f56c7f5522c5625d969ed9ebb88␟18929326236790508:Umsatz:`,oc=$localize`:␟2fa7f127bb34e7481f137773182c25a04145fa14␟3739328082463643360:Letzte Rechnung:`;const rc=function(e){return["/invoicing/invoices",e]};function sc(e,t){if(1&e&&(l.Tb(0,"div"),l.Tb(1,"a",14),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("routerLink",l.pc(2,rc,null==e.summary?null:e.summary.lastInvoiceId)),l.Cb(1),l.Ec(" ",null==e.summary?null:e.summary.lastInvoiceId," ")}}const lc=function(e){return["/invoicing/receivers",e]};let bc=(()=>{class e extends Ln{constructor(){super()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-card"]],features:[l.zb],decls:47,vars:24,consts:[[1,"jo-card"],[1,"jo-card-header"],[3,"object"],[1,"u-mt-md"],[1,"jo-card-columns"],[1,"jo-card-info"],[1,"jo-card-label"],["id","lnk_customerid",3,"routerLink"],["id","div_contractstart"],["id","div_contractend"],["id","div_budget",1,"align-right"],["id","div_revenue",1,"align-right"],[4,"ngIf"],[3,"object","isDeletable","copy","delete"],["id","lnk_lastinvoice",3,"routerLink"]],template:function(e,t){1&e&&(l.Tb(0,"mat-card",0),l.Tb(1,"mat-card-header",1),l.Ob(2,"jo-card-avatar",2),l.Tb(3,"mat-card-title"),l.Cc(4),l.Sb(),l.Tb(5,"mat-card-subtitle"),l.Cc(6),l.Sb(),l.Sb(),l.Tb(7,"mat-card-content",3),l.Tb(8,"div",4),l.Tb(9,"div",5),l.Tb(10,"div",6),l.Tb(11,"span"),l.Xb(12,tc),l.Sb(),l.Sb(),l.Tb(13,"div"),l.Tb(14,"a",7),l.Cc(15),l.Sb(),l.Sb(),l.Tb(16,"div",6),l.Tb(17,"span"),l.Xb(18,nc),l.Sb(),l.Sb(),l.Tb(19,"div",8),l.Cc(20),l.ic(21,"date"),l.Sb(),l.Tb(22,"div",6),l.Tb(23,"span"),l.Xb(24,cc),l.Sb(),l.Sb(),l.Tb(25,"div",9),l.Cc(26),l.ic(27,"date"),l.Sb(),l.Sb(),l.Tb(28,"div",5),l.Tb(29,"div",6),l.Tb(30,"span"),l.Xb(31,ac),l.Sb(),l.Sb(),l.Tb(32,"div",10),l.Cc(33),l.ic(34,"number"),l.Sb(),l.Tb(35,"div",6),l.Tb(36,"span"),l.Xb(37,ic),l.Sb(),l.Sb(),l.Tb(38,"div",11),l.Cc(39),l.ic(40,"number"),l.Sb(),l.Tb(41,"div",6),l.Tb(42,"span"),l.Xb(43,oc),l.Sb(),l.Sb(),l.Bc(44,sc,3,4,"div",12),l.Sb(),l.Sb(),l.Sb(),l.Tb(45,"mat-card-actions"),l.Tb(46,"jo-card-buttons",13),l.dc("copy",(function(){return t.onCopy()}))("delete",(function(){return t.onDelete()})),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("object",null==t.summary?null:t.summary.object),l.Cb(2),l.Dc(null==t.summary||null==t.summary.object?null:t.summary.object.header.description),l.Cb(2),l.Dc(null==t.summary?null:t.summary.receiverName),l.Cb(8),l.nc("routerLink",l.pc(22,lc,null==t.summary||null==t.summary.object?null:t.summary.object.header.customerId)),l.Cb(1),l.Ec(" ",null==t.summary||null==t.summary.object?null:t.summary.object.header.customerId," "),l.Cb(5),l.Dc(l.jc(21,12,null==t.summary||null==t.summary.object?null:t.summary.object.term.startDate)),l.Cb(6),l.Dc(l.jc(27,14,null==t.summary||null==t.summary.object?null:t.summary.object.term.endDate)),l.Cb(7),l.Dc(l.kc(34,16,null==t.summary||null==t.summary.object?null:t.summary.object.header.budget,"1.0-0")),l.Cb(6),l.Dc(l.kc(40,19,null==t.summary?null:t.summary.revenue,"1.0-0")),l.Cb(5),l.nc("ngIf",null==t.summary?null:t.summary.lastInvoiceId),l.Cb(2),l.nc("object",t.summary.object)("isDeletable",t.summary.changeable))},directives:[Xn.a,Xn.e,Vn,Xn.h,Xn.g,Xn.d,s.j,Nn.m,Xn.b,ec],pipes:[Nn.e,Nn.f],styles:[".jo-card[_ngcontent-%COMP%]{margin:1.5rem 3rem 1.5rem 0;width:50rem;padding:2rem 4rem;box-shadow:0 .5rem 1rem rgba(0,0,0,.2);transition:all .25s}@media only screen and (max-width:1279px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:1rem 2rem;margin:.75rem 1.5rem .75rem 0}}@media only screen and (max-width:959px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:.5rem 1rem;margin:.75rem}.jo-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:1.8rem;line-height:2rem}.jo-card[_ngcontent-%COMP%]   .u-mt-md[_ngcontent-%COMP%]{margin-top:1.5rem}.jo-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], .jo-card[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}.jo-card[_ngcontent-%COMP%]   .jo-card-label[_ngcontent-%COMP%]{font-size:1.3rem}}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]{width:100%;flex:0 0 100%;padding:1rem 2rem;margin:.75rem}}.jo-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.jo-card-columns[_ngcontent-%COMP%]{margin:2rem 0;display:grid;grid-template-columns:repeat(2,-webkit-max-content);grid-template-columns:repeat(2,max-content);justify-content:space-between}.jo-card-info[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(3,minmax(2.5rem,-webkit-min-content));grid-template-rows:repeat(3,minmax(2.5rem,min-content));grid-template-columns:repeat(2,minmax(2rem,-webkit-max-content));grid-template-columns:repeat(2,minmax(2rem,max-content));grid-column-gap:1rem}.jo-card-info[_ngcontent-%COMP%]:not(:last-of-type){padding-right:2rem;margin-right:1rem;border-right:1px solid hsla(0,0%,100%,.7)}.jo-card-info[_ngcontent-%COMP%] > .align-right[_ngcontent-%COMP%]{justify-self:end}.jo-card-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:lighter;opacity:.7}a[_ngcontent-%COMP%]{color:currentColor}.mat-card-title[_ngcontent-%COMP%]{font-size:1.4rem}"],changeDetection:0}),e})();var dc;function uc(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",4),l.dc("click",(function(t){return l.tc(e),l.hc().onNew(t)})),l.Tb(1,"span"),l.Xb(2,dc),l.Sb(),l.Sb()}}function mc(e,t){if(1&e){const e=l.Ub();l.Tb(0,"jo-contract-card",5),l.dc("copy",(function(t){return l.tc(e),l.hc().onCopy(t)}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)})),l.Sb()}2&e&&l.nc("summary",t.$implicit)}dc=$localize`:␟480040df1cf4a798962a307be25a8a2d7fb05490␟314743073997725143:Vertrag anlegen`;const fc=function(){return["sales-user"]};let hc=(()=>{class e extends Rn{constructor(e){super(e),this.service=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Mn))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contracts"]],features:[l.zb],decls:6,vars:5,consts:[[1,"window"],["mat-raised-button","","color","primary",3,"click",4,"joIfAuthorizedAs"],[1,"jo-cards"],["class","jo-card",3,"summary","copy","delete",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"jo-card",3,"summary","copy","delete"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div"),l.Bc(2,uc,3,0,"button",1),l.Sb(),l.Tb(3,"div",2),l.Bc(4,mc,1,1,"jo-contract-card",3),l.ic(5,"async"),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("joIfAuthorizedAs",l.oc(4,fc)),l.Cb(2),l.nc("ngForOf",l.jc(5,2,t.summaries$)))},directives:[En.a,Nn.l,Fn.b,bc],pipes:[Nn.b],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}.jo-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;margin-top:5rem}@media only screen and (max-width:959px){.jo-cards[_ngcontent-%COMP%]{align-items:center;margin:1rem auto 0}}.jo-card[_ngcontent-%COMP%]{transition:all .25s}.jo-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.05)}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]:hover{transform:none}}"],changeDetection:0}),e})();var gc,pc,vc,Cc,Oc,jc,yc;function Sc(e,t){if(1&e&&(l.Rb(0),l.Tb(1,"div",4),l.Tb(2,"span"),l.Xb(3,yc),l.Sb(),l.Sb(),l.Tb(4,"div",15),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Qb()),2&e){const e=l.hc();l.Cb(5),l.Dc(l.jc(6,1,null==e.summary||null==e.summary.object?null:e.summary.object.cashDiscountDate))}}gc=$localize`:␟dca8c49916cbbed073d45ca0d979aca6126203e5␟88645063683715768:Vertrag: `,pc=$localize`:␟f2c18f28d6232578373305c2a780470355b5d4d2␟4556182243950806904:Nettobetrag:`,vc=$localize`:␟b80273e5afac745feea1c991f5b54fe2a8d94553␟5447327385997433069:Umsatzsteuer:`,Cc=$localize`:␟aafbdfda51ce775ad6a113cbe1c690026da2983b␟3199272327871980552:Bruttobetrag:`,Oc=$localize`:␟cec042b34b135ba1e074e9c71bc58442467a4726␟2239498602725263916:Zahlungsbetrag:`,jc=$localize`:␟759813d4f34e8e8f131b948c7e8ea9fc67d75ce4␟3351250999105513410:Fällig am:`,yc=$localize`:␟a3c6df0fb3649cf45136c763ca88cd227bfb1881␟4623218398136502207:Skonto bis:`;const Tc=function(e){return["/invoicing/contracts",e]};let wc=(()=>{class e extends Ln{constructor(){super()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-card"]],features:[l.zb],decls:50,vars:31,consts:[[1,"jo-card"],[1,"jo-card-header"],[3,"object"],[1,"u-mt-md"],[1,"jo-card-label"],["id","lnk_contractId",3,"routerLink"],[1,"jo-card-columns"],[1,"jo-card-info"],["id","div_netValue",1,"align-right"],["id","div_vatAmount",1,"align-right"],["id","div_grossValue",1,"align-right"],["id","div_paymentAmount",1,"align-right"],[4,"ngIf"],["id","div_dueDate"],[3,"object","isDeletable","copy","delete"],["id","div_cashDiscountDate"]],template:function(e,t){1&e&&(l.Tb(0,"mat-card",0),l.Tb(1,"mat-card-header",1),l.Ob(2,"jo-card-avatar",2),l.Tb(3,"mat-card-title"),l.Cc(4),l.Sb(),l.Tb(5,"mat-card-subtitle"),l.Cc(6),l.ic(7,"date"),l.Sb(),l.Sb(),l.Tb(8,"mat-card-content",3),l.Tb(9,"div"),l.Tb(10,"span",4),l.Xb(11,gc),l.Sb(),l.Tb(12,"a",5),l.Cc(13),l.Sb(),l.Sb(),l.Tb(14,"div",6),l.Tb(15,"div",7),l.Tb(16,"div",4),l.Tb(17,"span"),l.Xb(18,pc),l.Sb(),l.Sb(),l.Tb(19,"div",8),l.Cc(20),l.ic(21,"number"),l.Sb(),l.Tb(22,"div",4),l.Tb(23,"span"),l.Xb(24,vc),l.Sb(),l.Sb(),l.Tb(25,"div",9),l.Cc(26),l.ic(27,"number"),l.Sb(),l.Tb(28,"div",4),l.Tb(29,"span"),l.Xb(30,Cc),l.Sb(),l.Sb(),l.Tb(31,"div",10),l.Cc(32),l.ic(33,"number"),l.Sb(),l.Sb(),l.Tb(34,"div",7),l.Tb(35,"div",4),l.Tb(36,"span"),l.Xb(37,Oc),l.Sb(),l.Sb(),l.Tb(38,"div",11),l.Cc(39),l.ic(40,"number"),l.Sb(),l.Bc(41,Sc,7,3,"ng-container",12),l.Tb(42,"div",4),l.Tb(43,"span"),l.Xb(44,jc),l.Sb(),l.Sb(),l.Tb(45,"div",13),l.Cc(46),l.ic(47,"date"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(48,"mat-card-actions"),l.Tb(49,"jo-card-buttons",14),l.dc("copy",(function(){return t.onCopy()}))("delete",(function(){return t.onDelete()})),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("object",null==t.summary?null:t.summary.object),l.Cb(2),l.Dc(null==t.summary?null:t.summary.receiverName),l.Cb(2),l.Dc(l.jc(7,13,null==t.summary||null==t.summary.object?null:t.summary.object.header.issuedAt)),l.Cb(6),l.nc("routerLink",l.pc(29,Tc,null==t.summary||null==t.summary.object?null:t.summary.object.header.contractId)),l.Cb(1),l.Ec(" ",null==t.summary||null==t.summary.object?null:t.summary.object.header.contractId," "),l.Cb(7),l.Dc(l.kc(21,15,null==t.summary||null==t.summary.object?null:t.summary.object.netValue,"1.2-2")),l.Cb(6),l.Dc(l.kc(27,18,null==t.summary||null==t.summary.object?null:t.summary.object.vatAmount,"1.2-2")),l.Cb(6),l.Dc(l.kc(33,21,null==t.summary||null==t.summary.object?null:t.summary.object.grossValue,"1.2-2")),l.Cb(7),l.Dc(l.kc(40,24,null==t.summary||null==t.summary.object?null:t.summary.object.paymentAmount,"1.2-2")),l.Cb(2),l.nc("ngIf",t.summary.object.header.cashDiscountPercentage>0),l.Cb(5),l.Dc(l.jc(47,27,null==t.summary||null==t.summary.object?null:t.summary.object.dueDate)),l.Cb(3),l.nc("object",t.summary.object)("isDeletable",t.summary.changeable))},directives:[Xn.a,Xn.e,Vn,Xn.h,Xn.g,Xn.d,s.j,Nn.m,Xn.b,ec],pipes:[Nn.e,Nn.f],styles:[".jo-card[_ngcontent-%COMP%]{margin:1.5rem 3rem 1.5rem 0;width:50rem;padding:2rem 4rem;box-shadow:0 .5rem 1rem rgba(0,0,0,.2);transition:all .25s}@media only screen and (max-width:1279px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:1rem 2rem;margin:.75rem 1.5rem 1.5rem 0}}@media only screen and (max-width:959px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:.5rem 1rem;margin:.75rem}.jo-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:1.8rem;line-height:2rem}.jo-card[_ngcontent-%COMP%]   .u-mt-md[_ngcontent-%COMP%]{margin-top:1.5rem}.jo-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], .jo-card[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}.jo-card[_ngcontent-%COMP%]   .jo-card-label[_ngcontent-%COMP%]{font-size:1.3rem}}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]{width:100%;flex:0 0 100%;padding:1rem 2rem;margin:.75rem}}.jo-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.jo-card-columns[_ngcontent-%COMP%]{margin:2rem 0;justify-content:space-between}.jo-card-columns[_ngcontent-%COMP%], .jo-card-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,-webkit-max-content);grid-template-columns:repeat(2,max-content)}.jo-card-info[_ngcontent-%COMP%]{grid-template-rows:repeat(3,minmax(2.5rem,-webkit-min-content));grid-template-rows:repeat(3,minmax(2.5rem,min-content));grid-column-gap:1rem}.jo-card-info[_ngcontent-%COMP%]:not(:last-of-type){padding-right:2rem;margin-right:1rem;border-right:1px solid hsla(0,0%,100%,.7)}.jo-card-info[_ngcontent-%COMP%] > .align-right[_ngcontent-%COMP%]{justify-self:end}.jo-card-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:lighter;opacity:.7}a[_ngcontent-%COMP%]{color:currentColor}#lnk_contractId[_ngcontent-%COMP%]{margin-left:1rem}"],changeDetection:0}),e})();var Dc;function Ic(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",4),l.dc("click",(function(t){return l.tc(e),l.hc().onNew(t)})),l.Tb(1,"span"),l.Xb(2,Dc),l.Sb(),l.Sb()}}function $c(e,t){if(1&e){const e=l.Ub();l.Tb(0,"jo-invoice-card",5),l.dc("copy",(function(t){return l.tc(e),l.hc().onCopy(t)}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)})),l.Sb()}2&e&&l.nc("summary",t.$implicit)}Dc=$localize`:␟f33f1381d29bb061f89b1fac910e9e46a79951e8␟8817686795284035107:Rechnung anlegen`;const xc=function(){return["sales-user"]};let Pc=(()=>{class e extends Rn{constructor(e){super(e),this.service=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(_n))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoices"]],features:[l.zb],decls:6,vars:5,consts:[[1,"window"],["mat-raised-button","","color","primary",3,"click",4,"joIfAuthorizedAs"],[1,"jo-cards"],["class","jo-card",3,"summary","copy","delete",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"jo-card",3,"summary","copy","delete"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div"),l.Bc(2,Ic,3,0,"button",1),l.Sb(),l.Tb(3,"div",2),l.Bc(4,$c,1,1,"jo-invoice-card",3),l.ic(5,"async"),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("joIfAuthorizedAs",l.oc(4,xc)),l.Cb(2),l.nc("ngForOf",l.jc(5,2,t.summaries$)))},directives:[En.a,Nn.l,Fn.b,wc],pipes:[Nn.b],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}.jo-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;margin-top:5rem}@media only screen and (max-width:959px){.jo-cards[_ngcontent-%COMP%]{align-items:center;margin:1rem auto 0}}.jo-card[_ngcontent-%COMP%]{transition:all .25s}.jo-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.05)}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]:hover{transform:none}}"],changeDetection:0}),e})(),_c=(()=>{class e{constructor(e){this.store=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(a.h))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoicing"]],decls:1,vars:0,template:function(e,t){1&e&&l.Ob(0,"router-outlet")},directives:[s.l],styles:[".jo-invoicing[_ngcontent-%COMP%]{height:100%}"],changeDetection:0}),e})();var kc,Mc,zc,Ac,Bc,Rc,Ec,Nc;function Fc(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Ec),l.Sb())}function Lc(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Nc),l.Sb())}function Xc(e,t){if(1&e&&(l.Tb(0,"div",14),l.Bc(1,Fc,2,0,"span",10),l.Bc(2,Lc,2,0,"span",10),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",0===e.summary.object.header.status),l.Cb(1),l.nc("ngIf",0!==e.summary.object.header.status)}}kc=$localize`:␟2b50aafb874b575d26a8d6604c9082e726c9fe24␟7125841675784132657:Aktive Verträge:`,Mc=$localize`:␟3bf38eeed464fdca6ee1618b82117688e931f0ac␟1447948513288322020:Abgelaufene Verträge:`,zc=$localize`:␟e321472c82bd537781ad80900c0569a8f337f548␟8576682435763005545:Letzter Vertrag`,Ac=$localize`:␟c845b9dc93b23dba9dc6363f15455aa83d9d42f6␟7626142325415094897:Fällige Rechnungen:`,Bc=$localize`:␟d85189de14349a0c27f1c257c780b2523e374fa3␟7136177095532140221:Offene Rechnungen:`,Rc=$localize`:␟2fa7f127bb34e7481f137773182c25a04145fa14␟3739328082463643360:Letzte Rechnung:`,Ec=$localize`:␟81d696cdc37eb8ebefaa037a5972539942bccfd7␟8766474537436839826:aktiv`,Nc=$localize`:␟9f7e0a292de93c112481a51cb6f959242b3ff7d4␟8015756215649523115:inaktiv`;const qc=function(e){return["/invoicing/contracts",e]};function Hc(e,t){if(1&e&&(l.Tb(0,"div"),l.Tb(1,"a",15),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("routerLink",l.pc(2,qc,null==e.summary?null:e.summary.lastContractId)),l.Cb(1),l.Dc(null==e.summary?null:e.summary.lastContractId)}}const Uc=function(e){return["/invoicing/invoices",e]};function Vc(e,t){if(1&e&&(l.Tb(0,"div"),l.Tb(1,"a",16),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("routerLink",l.pc(2,Uc,null==e.summary?null:e.summary.lastInvoiceId)),l.Cb(1),l.Ec(" ",null==e.summary?null:e.summary.lastInvoiceId," ")}}let Gc=(()=>{class e extends Ln{constructor(){super()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-receiver-card"]],features:[l.zb],decls:40,vars:11,consts:[[1,"jo-card"],[1,"jo-card-header"],[3,"object"],[1,"u-mt-md"],["id","div_status",4,"ngIf"],[1,"jo-card-columns"],[1,"jo-card-info"],[1,"jo-card-label"],["id","div_activeContracts"],["id","div_expiredContracts"],[4,"ngIf"],["id","div_dueInvoices",1,"align-right"],["id","div_openInvoices",1,"align-right"],[3,"object","isDeletable","copy","delete"],["id","div_status"],["id","lnk_lastContract",3,"routerLink"],["id","lnk_lastInvoice",3,"routerLink"]],template:function(e,t){1&e&&(l.Tb(0,"mat-card",0),l.Tb(1,"mat-card-header",1),l.Ob(2,"jo-card-avatar",2),l.Tb(3,"mat-card-title"),l.Cc(4),l.Sb(),l.Sb(),l.Tb(5,"mat-card-content",3),l.Bc(6,Xc,3,2,"div",4),l.Tb(7,"div",5),l.Tb(8,"div",6),l.Tb(9,"div",7),l.Tb(10,"span"),l.Xb(11,kc),l.Sb(),l.Sb(),l.Tb(12,"div",8),l.Cc(13),l.Sb(),l.Tb(14,"div",7),l.Tb(15,"span"),l.Xb(16,Mc),l.Sb(),l.Sb(),l.Tb(17,"div",9),l.Cc(18),l.Sb(),l.Tb(19,"div",7),l.Tb(20,"span"),l.Xb(21,zc),l.Sb(),l.Sb(),l.Bc(22,Hc,3,4,"div",10),l.Sb(),l.Tb(23,"div",6),l.Tb(24,"div",7),l.Tb(25,"span"),l.Xb(26,Ac),l.Sb(),l.Sb(),l.Tb(27,"div",11),l.Cc(28),l.Sb(),l.Tb(29,"div",7),l.Tb(30,"span"),l.Xb(31,Bc),l.Sb(),l.Sb(),l.Tb(32,"div",12),l.Cc(33),l.Sb(),l.Tb(34,"div",7),l.Tb(35,"span"),l.Xb(36,Rc),l.Sb(),l.Sb(),l.Bc(37,Vc,3,4,"div",10),l.Sb(),l.Sb(),l.Sb(),l.Tb(38,"mat-card-actions"),l.Tb(39,"jo-card-buttons",13),l.dc("copy",(function(){return t.onCopy()}))("delete",(function(){return t.onDelete()})),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("object",null==t.summary?null:t.summary.object),l.Cb(2),l.Dc(null==t.summary||null==t.summary.object?null:t.summary.object.header.name),l.Cb(2),l.nc("ngIf",t.summary&&t.summary.object),l.Cb(7),l.Dc(null==t.summary?null:t.summary.activeContractsCount),l.Cb(5),l.Dc(null==t.summary?null:t.summary.expiredContractsCount),l.Cb(4),l.nc("ngIf",null==t.summary?null:t.summary.lastContractId),l.Cb(6),l.Dc(null==t.summary?null:t.summary.dueInvoicesCount),l.Cb(5),l.Dc(null==t.summary?null:t.summary.openInvoicesCount),l.Cb(4),l.nc("ngIf",null==t.summary?null:t.summary.lastInvoiceId),l.Cb(2),l.nc("object",t.summary.object)("isDeletable",t.summary.deletable))},directives:[Xn.a,Xn.e,Vn,Xn.h,Xn.d,Nn.m,Xn.b,ec,s.j],styles:[".jo-card[_ngcontent-%COMP%]{margin:1.5rem 3rem 1.5rem 0;width:50rem;padding:2rem 4rem;box-shadow:0 .5rem 1rem rgba(0,0,0,.2);transition:all .25s}@media only screen and (max-width:1279px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:1rem 2rem;margin:.75rem 1.5rem .75rem 0}}@media only screen and (max-width:959px){.jo-card[_ngcontent-%COMP%]{width:42rem;padding:.5rem 1rem;margin:.75rem}.jo-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:2rem;line-height:2rem}.jo-card[_ngcontent-%COMP%]   .u-mt-md[_ngcontent-%COMP%]{margin-top:1.5rem}.jo-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], .jo-card[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}.jo-card[_ngcontent-%COMP%]   .jo-card-label[_ngcontent-%COMP%]{font-size:1.3rem}}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]{width:100%;flex:0 0 100%;padding:1rem 2rem;margin:.75rem}}.jo-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.jo-card-columns[_ngcontent-%COMP%]{margin:2rem 0;display:grid;grid-template-columns:repeat(2,-webkit-max-content);grid-template-columns:repeat(2,max-content);justify-content:space-between}.jo-card-info[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(3,minmax(2.5rem,-webkit-min-content));grid-template-rows:repeat(3,minmax(2.5rem,min-content));grid-template-columns:repeat(2,minmax(2rem,-webkit-max-content));grid-template-columns:repeat(2,minmax(2rem,max-content));grid-column-gap:1rem}.jo-card-info[_ngcontent-%COMP%]:not(:last-of-type){padding-right:2rem;margin-right:1rem;border-right:1px solid hsla(0,0%,100%,.7)}.jo-card-info[_ngcontent-%COMP%] > .align-right[_ngcontent-%COMP%]{justify-self:end}.jo-card-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:lighter;opacity:.7}a[_ngcontent-%COMP%]{color:currentColor}"],changeDetection:0}),e})();var Yc;function Zc(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",4),l.dc("click",(function(t){return l.tc(e),l.hc().onNew(t)})),l.Tb(1,"span"),l.Xb(2,Yc),l.Sb(),l.Sb()}}function Qc(e,t){if(1&e){const e=l.Ub();l.Tb(0,"jo-receiver-card",5),l.dc("copy",(function(t){return l.tc(e),l.hc().onCopy(t)}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)})),l.Sb()}2&e&&l.nc("summary",t.$implicit)}Yc=$localize`:␟a609b31073be01d9023150107282dd11c8e09cd7␟2897904788462940363:Rechnungsempfänger anlegen`;const Jc=function(){return["sales-user"]};let Kc=(()=>{class e extends Rn{constructor(e){super(e),this.service=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(kn))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-receivers"]],features:[l.zb],decls:6,vars:5,consts:[[1,"window"],["mat-raised-button","","color","primary",3,"click",4,"joIfAuthorizedAs"],[1,"jo-cards"],["class","jo-card",3,"summary","copy","delete",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"jo-card",3,"summary","copy","delete"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div"),l.Bc(2,Zc,3,0,"button",1),l.Sb(),l.Tb(3,"div",2),l.Bc(4,Qc,1,1,"jo-receiver-card",3),l.ic(5,"async"),l.Sb(),l.Sb()),2&e&&(l.Cb(2),l.nc("joIfAuthorizedAs",l.oc(4,Jc)),l.Cb(2),l.nc("ngForOf",l.jc(5,2,t.summaries$)))},directives:[En.a,Nn.l,Fn.b,Gc],pipes:[Nn.b],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}.jo-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;margin-top:5rem}@media only screen and (max-width:959px){.jo-cards[_ngcontent-%COMP%]{align-items:center;margin:1rem auto 0}}.jo-card[_ngcontent-%COMP%]{transition:all .25s}.jo-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.05)}@media only screen and (max-width:599px){.jo-card[_ngcontent-%COMP%]:hover{transform:none}}"],changeDetection:0}),e})();const Wc=["detailsForm"];let ea=(()=>{class e{constructor(e,t){this.service=e,this.route=t,this.task$=new te.BehaviorSubject("edit"),this.route.paramMap.subscribe(e=>{this.initializeWithData(e.get("id"))})}ngOnInit(){}ngAfterViewInit(){this.service.isUserAllowedToEdit()||this.formComponent.form.disable()}onChanged(e){this.service.change(e)}onCreate(e){this.service.create(e)}onCopy(e){this.service.copy(e)}onDelete(e){this.service.delete(e)}onNew(e){this.service.new()}onUpdate(e){this.service.update(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(xn),l.Nb(s.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&l.Gc(Wc,!0),2&e&&l.rc(n=l.ec())&&(t.formComponent=n.first)},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var ta=n("3Pt+"),na=n("MqGq"),ca=n("wd/R");let aa=(()=>{class e{constructor(e,t){this.locale=e,this.decimalPipe=t,this.formattingInfo=this.getFormattingInfo(),this.decimalSeparatorEscaped=this.escapeForRegex(this.formattingInfo.decimalSeparator),this.thousandSeparatorEscaped=this.escapeForRegex(this.formattingInfo.thousandSeparator)}fromLocalAmount(e){if(!e)return 0;if("string"!=typeof e)return e;const t=e.replace(new RegExp(this.thousandSeparatorEscaped,"g"),"").replace(new RegExp(this.decimalSeparatorEscaped,"g"),".");return parseFloat(t)}toLocalAmount(e){return isNaN(e)?null:this.decimalPipe.transform(e,"1.2-2")}fromLocalPercent(e){return this.fromLocalAmount(e)}toLocalPercent(e){return e||0===e?this.decimalPipe.transform(e,"1.1-3"):null}toLocalISOString(e){if(!e)return null;const t=function(e){return e<10?"0"+e:e},n=e.getTimezoneOffset();let c=(n>0?"-":"+")+t(Math.abs(n/60));return n%60!=0&&(c+=t(Math.abs(n%60))),0===n&&(c="Z"),e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+c}toLocalDateISOString(e){return this.toLocalISOString(e).substr(0,10)}generateAbbrevMonthNames(){const e=[],t=ca("2017-12-01");t.locale(this.locale);for(let n=0;n<12;n++)t.add(1,"month"),e.push(t.format("MMM"));return e}escapeForRegex(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}getFormattingInfo(){return{decimalSeparator:this.getDecimalSeparator(),thousandSeparator:this.getThousandSeparator(),numberOfDecimals:this.getNumberOfDecimals()}}getDecimalSeparator(){return 12345.6789.toLocaleString().match(/345(.*)67/)[1]}getThousandSeparator(){return 12345.6789.toLocaleString().match(/12(.*)345/)[1]}getNumberOfDecimals(){return 12345.6789.toLocaleString().match(/345(\D*)(\d+)$/)[2].length}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(l.w),l.Zb(Nn.f))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac,providedIn:o.a}),e})();var ia=n("Kj3r"),oa=n("/uUt"),ra=n("ExVU");let sa=(()=>{class e{constructor(e,t,n,c){this.fb=e,this.store=t,this.router=n,this.utility=c,this.copy=new l.o,this.changed=new l.o,this.new=new l.o,this.create=new l.o,this.update=new l.o,this.delete=new l.o,this.changedDocumentLinks=[],this.tabIndex=0,this.subscriptions={},this.onSimpleHeaderAmountChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=this.utility.fromLocalAmount(e)},this.onSimpleHeaderDateChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=ra.DateTime.fromMillis(e.valueOf()).toJSDate(),console.log(this.object.header[t])},this.onSimpleHeaderStartDateChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=ce.DateUtility.getStartDateFromMoment(e),console.log(this.object.header[t])},this.onSimpleHeaderEndDateChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=ce.DateUtility.getEndDateFromMoment(e),console.log(this.object.header[t])},this.onSimpleHeaderTextChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=e},this.onSimpleHeaderNumberChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=+e},this.onSimpleHeaderPercentageChanged=(e,t)=>{console.log(`${t} changed on form: ${e}`),this.object.header[t]=this.utility.fromLocalPercent(e)}}ngOnInit(){this.changedDocumentLinks=[]}ngOnChanges(e){this.form?this.patchForm():(this.form=this.buildForm(),this.patchForm(),this.form.disabled||this.listenToChanges())}ngOnDestroy(){Object.values(this.subscriptions).forEach(e=>e.unsubscribe)}onCancel(e){this.store.dispatch(new ye.a),e&&e.stopPropagation()}onCopy(e){this.copy.emit(this.object),this.form.reset(),e&&e.stopPropagation()}onDelete(e){this.delete.emit(this.object),e&&e.stopPropagation()}onNew(e){this.new.emit(),this.form.reset(),e&&e.stopPropagation()}onSave(e){const t=this.changeObject(e.value);this.existsObject(t)?this.update.emit(t):this.create.emit(t),this.form.markAsPristine()}onTabChange(e){this.tabIndex=e.index}hasError(e){return e.map(e=>this.form.get(e).invalid).some(e=>!0===e)}isChangeValid(e){return e.updateValueAndValidity(),e.valid}listenToFieldChanges(e,t){if(!this.subscriptions[e]){const n=this.form.get(e);if(!n)return;this.subscriptions[e]=this.listenToValueChanges(n,e,t)}}existsObject(e){return!!e.header.id}listenToValueChanges(e,t,n){return e.valueChanges.pipe(Object(ia.a)(500),Object(oa.a)()).subscribe(c=>{this.isChangeValid(e)&&n(c,t)})}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(ta.f),l.Nb(a.h),l.Nb(s.g),l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],inputs:{object:"object"},outputs:{copy:"copy",changed:"changed",new:"new",create:"create",update:"update",delete:"delete"},features:[l.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var la,ba,da=n("wZkO"),ua=n("QibW"),ma=n("kmnG"),fa=n("qFsG"),ha=n("7EHt"),ga=n("d3UM"),pa=n("NFeN"),va=n("FKr1"),Ca=n("dau4"),Oa=n("0IaG"),ja=n("XiUz"),ya=n("bSwM");la=$localize`:␟589cd2b246289ac803b5689a0004a28688f658e2␟472335994569796287:Datei hochladen`,ba=$localize`:␟19d59348d0650d0a1616f41ff9ffb90234041c85␟6050207453634070555:Datei auswählen`;const Sa=["placeholder",$localize`:Datei␟764ebdf5c8fbdf3def64d7fda6f94f2aee64678d␟323296961323364638:Datei`];var Ta,wa,Da,Ia,$a,xa,Pa,_a,ka,Ma;Ta=$localize`:␟cc1820bde05602a97b5a798796df954f091586c2␟7915235365181603581:Rechnung`,wa=$localize`:␟8dab787158f14fa296599bd0fe4f1974250a2b24␟7356804873548564024:Gutschriftsanforderung`,Da=$localize`:␟2bc69b5166b2243608b74f420594ffbc204c24e0␟2790879719080302821:Projektvertrag`,Ia=$localize`:␟3da587c406b6822ac62e3bc92bc2bee953d715c6␟858587265170581975:Rahmenvertrag`,$a=$localize`:␟600568f738e29ca4c4516e6affcde00921c178b7␟7849353189653094872:Reisekostenabrechnung`,xa=$localize`:␟a22d344f4204669c2bf136af56f0e69c68aceb59␟2068359683636438082:Leistungsnachweis`,Pa=$localize`:␟05aaf3ce7943a934319fc83cd15154aa67db4c3c␟5546474975914780086:Sonstiges`,_a=$localize`:␟1da68088736ee5a4dccb1b126fb4b6e1a196aedd␟2859529024895297125:E-Mail Anhang?`,ka=$localize`:␟6b0ee47afa46fb719fd4c28f81a147609c108642␟8603700948334752400:Hochladen`,Ma=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`;let za=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t}onFileSelected(e){this.file=e.target.files[0],this.data.documentLink.name=this.file.name}onUpload(){this.dialogRef.close(this.file)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Oa.a),l.Nb(Oa.g))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-file-upload-dialog"]],decls:40,vars:11,consts:[["form","ngForm"],["mat-dialog-title",""],["fxLayout","column"],["mat-raised-button","","color","primary",3,"click"],["hidden","","type","file",3,"change"],["fileInput",""],["matInput","","name","name","required","",3,"ngModel","ngModelChange",6,"placeholder"],["name","type","required","",3,"ngModel","ngModelChange"],[3,"value"],[1,""],["name","attachToEmail","color","primary",3,"ngModel","ngModelChange"],["id","btn_upload","mat-button","",3,"disabled","click"],["id","btn_cancel","mat-button","","mat-dialog-close",""]],template:function(e,t){if(1&e){const e=l.Ub();l.Tb(0,"form",null,0),l.Tb(2,"h1",1),l.Xb(3,la),l.Sb(),l.Tb(4,"mat-dialog-content",2),l.Tb(5,"button",3),l.dc("click",(function(){return l.tc(e),l.sc(9).click()})),l.Tb(6,"span"),l.Xb(7,ba),l.Sb(),l.Sb(),l.Tb(8,"input",4,5),l.dc("change",(function(e){return t.onFileSelected(e)})),l.Sb(),l.Tb(10,"mat-form-field"),l.Tb(11,"input",6),l.Yb(12,Sa),l.dc("ngModelChange",(function(e){return t.data.documentLink.name=e})),l.Sb(),l.Sb(),l.Tb(13,"mat-form-field"),l.Tb(14,"mat-select",7),l.dc("ngModelChange",(function(e){return t.data.documentLink.type=e})),l.Tb(15,"mat-option",8),l.Xb(16,Ta),l.Sb(),l.Tb(17,"mat-option",8),l.Xb(18,wa),l.Sb(),l.Tb(19,"mat-option",8),l.Xb(20,Da),l.Sb(),l.Tb(21,"mat-option",8),l.Xb(22,Ia),l.Sb(),l.Tb(23,"mat-option",8),l.Xb(24,$a),l.Sb(),l.Tb(25,"mat-option",8),l.Xb(26,xa),l.Sb(),l.Tb(27,"mat-option",8),l.Xb(28,Pa),l.Sb(),l.Sb(),l.Sb(),l.Tb(29,"div",9),l.Tb(30,"mat-checkbox",10),l.dc("ngModelChange",(function(e){return t.data.documentLink.attachToEmail=e})),l.Tb(31,"span"),l.Xb(32,_a),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(33,"mat-dialog-actions"),l.Tb(34,"button",11),l.dc("click",(function(){return t.onUpload()})),l.Tb(35,"span"),l.Xb(36,ka),l.Sb(),l.Sb(),l.Tb(37,"button",12),l.Tb(38,"span"),l.Xb(39,Ma),l.Sb(),l.Sb(),l.Sb(),l.Sb()}if(2&e){const e=l.sc(1);l.Cb(11),l.nc("ngModel",t.data.documentLink.name),l.Cb(3),l.nc("ngModel",t.data.documentLink.type),l.Cb(1),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("value",2),l.Cb(2),l.nc("value",3),l.Cb(2),l.nc("value",4),l.Cb(2),l.nc("value",5),l.Cb(2),l.nc("value",6),l.Cb(3),l.nc("ngModel",t.data.documentLink.attachToEmail),l.Cb(4),l.nc("disabled",!e.valid)}},directives:[ta.x,ta.q,ta.r,Oa.h,Oa.e,ja.c,Fn.b,ma.c,fa.b,ta.c,ta.v,ta.p,ta.s,ga.a,va.l,ya.a,Oa.c,Oa.d],styles:["form[_ngcontent-%COMP%]{min-height:36rem;min-width:30rem;font-size:1.6rem}mat-dialog-content[_ngcontent-%COMP%]{height:60%;overflow:hidden}h1[_ngcontent-%COMP%]{font-size:1.8rem}"],changeDetection:0}),e})();var Aa,Ba,Ra,Ea,Na,Fa,La,Xa,qa,Ha,Ua,Va,Ga,Ya,Za=n("f0Cb");function Qa(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div"),l.Tb(1,"button",10),l.dc("click",(function(t){return l.tc(e),l.hc().onUpload(t)})),l.Tb(2,"mat-icon"),l.Cc(3,"file_upload"),l.Sb(),l.Cc(4," \xa0"),l.Tb(5,"span"),l.Xb(6,Na),l.Sb(),l.Sb(),l.Sb()}}function Ja(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",13),l.dc("click",(function(t){return l.tc(e),l.hc(2).onDeleteSelected(t)})),l.Tb(1,"mat-icon"),l.Cc(2,"delete_forever"),l.Sb(),l.Cc(3," \xa0"),l.Tb(4,"span"),l.Xb(5,La),l.Sb(),l.Sb()}}function Ka(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div"),l.Tb(1,"button",11),l.dc("click",(function(t){return l.tc(e),l.hc().onDownloadSelected(t)})),l.Tb(2,"mat-icon"),l.Cc(3,"file_download"),l.Sb(),l.Cc(4," \xa0"),l.Tb(5,"span"),l.Xb(6,Fa),l.Sb(),l.Sb(),l.Bc(7,Ja,6,0,"button",12),l.Sb()}if(2&e){const e=l.hc();l.Cb(7),l.nc("ngIf",e.isUserAllowedToEdit())}}function Wa(e,t){if(1&e){const e=l.Ub();l.Tb(0,"form"),l.Ob(1,"mat-divider"),l.Tb(2,"div",14),l.Tb(3,"div",3),l.Tb(4,"mat-checkbox",4),l.dc("change",(function(){l.tc(e);const n=t.$implicit;return l.hc().onToggleSelect(n)})),l.Sb(),l.Sb(),l.Tb(5,"div",15),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onToggleSelect(n)})),l.Cc(6),l.Sb(),l.Tb(7,"mat-form-field",16),l.Tb(8,"mat-select",17),l.dc("selectionChange",(function(n){l.tc(e);const c=t.$implicit;return l.hc().onTypeChanged(n,c)})),l.Tb(9,"mat-option",18),l.Xb(10,Xa),l.Sb(),l.Tb(11,"mat-option",18),l.Xb(12,qa),l.Sb(),l.Tb(13,"mat-option",18),l.Xb(14,Ha),l.Sb(),l.Tb(15,"mat-option",18),l.Xb(16,Ua),l.Sb(),l.Tb(17,"mat-option",18),l.Xb(18,Va),l.Sb(),l.Tb(19,"mat-option",18),l.Xb(20,Ga),l.Sb(),l.Tb(21,"mat-option",18),l.Xb(22,Ya),l.Sb(),l.Sb(),l.Sb(),l.Tb(23,"div",8),l.Tb(24,"mat-checkbox",19),l.dc("change",(function(){l.tc(e);const n=t.$implicit;return l.hc().onAttachToEmailChanged(n)})),l.Sb(),l.Sb(),l.Sb(),l.Sb()}if(2&e){const e=t.$implicit,n=l.hc();l.Cb(4),l.nc("checked",n.isSelected(e)),l.Cb(2),l.Ec(" ",e.name," "),l.Cb(2),l.nc("value",e.type)("disabled",!n.isUserAllowedToEdit()),l.Cb(1),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("value",2),l.Cb(2),l.nc("value",3),l.Cb(2),l.nc("value",4),l.Cb(2),l.nc("value",5),l.Cb(2),l.nc("value",6),l.Cb(3),l.nc("checked",e.attachToEmail)("disabled",!n.isUserAllowedToEdit())}}Aa=$localize`:␟764ebdf5c8fbdf3def64d7fda6f94f2aee64678d␟323296961323364638:Datei`,Ba=$localize`:␟8b3daf8f7a96906fede1ce2314d309cffc4df900␟8833721880560394084:Dokumentenart`,Ra=$localize`:␟f38608ed1a3f1f79dc6e43a9ad88364ffc098c1f␟2857587999825290192:Art`,Ea=$localize`:␟c3d74ee69c791602cb1170614b1e2db53ed11417␟5341815630205695062:Versenden?`,Na=$localize`:␟6b0ee47afa46fb719fd4c28f81a147609c108642␟8603700948334752400:Hochladen`,Fa=$localize`:␟70a43fcaa38b25e671bfb649f8f155f4e17e1cb2␟7633830982491636649:Herunterladen`,La=$localize`:␟a813fd43c9a1b211fe541045d263d2c500c80f0f␟4580399730639224598:Löschen`,Xa=$localize`:␟cc1820bde05602a97b5a798796df954f091586c2␟7915235365181603581:Rechnung`,qa=$localize`:␟8dab787158f14fa296599bd0fe4f1974250a2b24␟7356804873548564024:Gutschriftsanforderung`,Ha=$localize`:␟2bc69b5166b2243608b74f420594ffbc204c24e0␟2790879719080302821:Projektvertrag`,Ua=$localize`:␟3da587c406b6822ac62e3bc92bc2bee953d715c6␟858587265170581975:Rahmenvertrag`,Va=$localize`:␟600568f738e29ca4c4516e6affcde00921c178b7␟7849353189653094872:Reisekostenabrechnung`,Ga=$localize`:␟a22d344f4204669c2bf136af56f0e69c68aceb59␟2068359683636438082:Leistungsnachweis`,Ya=$localize`:␟05aaf3ce7943a934319fc83cd15154aa67db4c3c␟5546474975914780086:Sonstiges`;let ei=(()=>{class e{constructor(e,t,n){this.store=e,this.dialog=t,this.service=n,this.selectionList=[],this.selectAll=!1}ngOnChanges(e){this.documentLinks$=this.service.getDocumentLinks(this.object.header.objectType)}getFilePath(){return"/docs/"+this.object.ownerKey}isAnythingSelected(){return this.selectionList.length>0}isSelected(e){return this.selectionList.findIndex(t=>t.path===e.path)>=0}isUserAllowedToEdit(){return this.service.isUserAllowedToEdit()}onAttachToEmailChanged(e){this.service.update(Object.assign(Object.assign({},e),{attachToEmail:!e.attachToEmail}))}onDeleteSelected(e){this.selectionList.forEach(e=>{this.store.dispatch(new J.o(e)),this.store.dispatch(new Ca.a(e.path))}),this.selectionList=[],this.selectAll=!1,e&&e.stopPropagation()}onDownloadSelected(e){this.selectionList.forEach(e=>this.store.dispatch(new Ca.b(e.path))),this.selectionList=[],this.selectAll=!1,e&&e.stopPropagation()}onToggleSelect(e){this.selectionList.findIndex(t=>t.path===e.path)>=0?(this.selectAll=!1,this.selectionList=this.selectionList.filter(t=>t.path!==e.path)):this.selectionList.push(e)}onToggleSelectAll(e){this.selectAll=e.checked,this.selectAll?(this.selectionList=[],this.documentLinks$.pipe(Object(Sn.a)(1)).subscribe(e=>e.forEach(e=>this.selectionList.push(e)))):this.selectionList=[]}onTypeChanged(e,t){this.service.update(Object.assign(Object.assign({},t),{type:+e.value}))}onUpload(e){const t={name:void 0,type:6,path:this.getFilePath(),attachToEmail:!1,owner:this.object.ownerKey};this.openFileUploadDialog(t).afterClosed().pipe(Object(Sn.a)(1),Object(Oe.a)(()=>e.stopPropagation())).subscribe(e=>{if(e){const n={file:e,path:`${this.getFilePath()}/${e.name}`,metadata:{name:t.name,type:t.type,attachToEmail:t.attachToEmail,owner:this.object.ownerKey}};this.store.dispatch(new Ca.c(n)),t.path=n.path,this.store.dispatch(new J.j(t))}})}openFileUploadDialog(e){return this.fileUploadDialogRef=this.dialog.open(za,{data:{documentLink:e}}),this.fileUploadDialogRef}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(a.h),l.Nb(Oa.b),l.Nb(zn))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-document-link-list"]],inputs:{object:"object"},features:[l.Ab],decls:16,vars:6,consts:[[1,"mat-elevation-z0"],[4,"ngIf"],[1,"table-header"],[1,"document-link-select","width--sm"],[3,"checked","change"],[1,"document-link-name","width--lg"],["fxHide.lt-md","",1,"document-link-type","width--lg"],["fxHide.gt-sm","",1,"document-link-type","width--lg"],[1,"document-link-attachToEmail","width--sm"],[4,"ngFor","ngForOf"],["id","btn_upload","mat-raised-button","","color","primary",3,"click"],["id","btn_download","mat-raised-button","","color","primary",3,"click"],["id","btn_delete","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","btn_delete","mat-raised-button","","color","warn",3,"click"],[1,"doclink-table-row"],[1,"document-link-name","width--lg",3,"click"],[1,"document-link-type","width--lg"],[3,"value","disabled","selectionChange"],[3,"value"],["color","primary",3,"checked","disabled","change"]],template:function(e,t){1&e&&(l.Tb(0,"form",0),l.Bc(1,Qa,7,0,"div",1),l.Bc(2,Ka,8,1,"div",1),l.Tb(3,"div",2),l.Tb(4,"div",3),l.Tb(5,"mat-checkbox",4),l.dc("change",(function(e){return t.onToggleSelectAll(e)})),l.Sb(),l.Sb(),l.Tb(6,"label",5),l.Xb(7,Aa),l.Sb(),l.Tb(8,"label",6),l.Xb(9,Ba),l.Sb(),l.Tb(10,"label",7),l.Xb(11,Ra),l.Sb(),l.Tb(12,"label",8),l.Xb(13,Ea),l.Sb(),l.Sb(),l.Sb(),l.Bc(14,Wa,25,13,"form",9),l.ic(15,"async")),2&e&&(l.Cb(1),l.nc("ngIf",!t.isAnythingSelected()&&t.isUserAllowedToEdit()),l.Cb(1),l.nc("ngIf",t.isAnythingSelected()),l.Cb(3),l.nc("checked",t.selectAll),l.Cb(9),l.nc("ngForOf",l.jc(15,4,t.documentLinks$)))},directives:[ta.x,ta.q,ta.r,Nn.m,ya.a,Hn.b,Nn.l,Fn.b,pa.a,Za.a,ma.c,ga.a,va.l],pipes:[Nn.b],styles:[".table-header[_ngcontent-%COMP%]{margin-top:3.6rem;display:flex}.table-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .table-header[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:0;padding:.8rem 1.2rem}@media only screen and (max-width:959px){.table-header[_ngcontent-%COMP%]{font-size:1.6rem}.table-header[_ngcontent-%COMP%]   .width--lg[_ngcontent-%COMP%]{width:10rem}.table-header[_ngcontent-%COMP%]   label.document-link-type.width--lg[_ngcontent-%COMP%]{width:12rem}}.doclink-table-row[_ngcontent-%COMP%]{display:flex}.doclink-table-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .doclink-table-row[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{padding:.8rem 1.2rem}@media only screen and (max-width:959px){.doclink-table-row[_ngcontent-%COMP%]{font-size:1.6rem}}.width--xs[_ngcontent-%COMP%]{width:4rem}.width--sm[_ngcontent-%COMP%]{width:8rem}@media only screen and (max-width:959px){.width--sm[_ngcontent-%COMP%]{width:4rem}}.width--md[_ngcontent-%COMP%]{width:12rem}.width--lg[_ngcontent-%COMP%]{width:28rem}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{width:16rem}}.width--xl[_ngcontent-%COMP%]{width:36rem}div.document-link-select[_ngcontent-%COMP%]{padding-left:1.5rem;align-self:center;justify-self:center}div.document-link-name[_ngcontent-%COMP%], div.document-link-type[_ngcontent-%COMP%]{align-self:center;overflow:hidden}div.document-link-attachToEmail[_ngcontent-%COMP%]{align-self:center;justify-self:center}"]}),e})();var ti=n("+0xr");let ni=(()=>{class e{constructor(){this.dataSource=new ti.k}ngOnChanges(){this.dataSource.data=this.objects}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],inputs:{objects:"objects"},features:[l.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var ci;function ai(e,t){1&e&&(l.Tb(0,"mat-header-cell",18),l.Xb(1,ci),l.Sb())}ci=$localize`:␟3ecb5ffd80e534d0d8cf0376a019296c5f771f87␟3563503330091824066:Nr.`;const ii=function(e){return["/invoicing/contracts",e]};function oi(e,t){if(1&e&&(l.Tb(0,"mat-cell",18),l.Tb(1,"a",19),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.nc("routerLink",l.pc(2,ii,e.header.id)),l.Cb(1),l.Dc(e.header.id)}}var ri,si,li,bi,di;function ui(e,t){1&e&&(l.Tb(0,"mat-header-cell",20),l.Xb(1,ri),l.Sb())}function mi(e,t){if(1&e&&(l.Tb(0,"mat-cell",20),l.Cc(1),l.ic(2,"date"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.jc(2,1,e.header.issuedAt)," ")}}function fi(e,t){1&e&&(l.Tb(0,"mat-header-cell",21),l.Xb(1,si),l.Sb())}function hi(e,t){if(1&e&&(l.Tb(0,"mat-cell",21),l.Tb(1,"span",22),l.Cc(2),l.Sb(),l.Tb(3,"span",23),l.Cc(4),l.Sb(),l.Sb()),2&e){const e=t.$implicit,n=l.hc();l.Cb(2),l.Dc(e.header.description),l.Cb(2),l.Dc(n.getShortenedDescription(e.header.description))}}function gi(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Xb(1,li),l.Sb())}function pi(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"span",22),l.Cc(2),l.ic(3,"date"),l.Sb(),l.Tb(4,"span",23),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(2),l.Dc(l.jc(3,2,e.header.startDate)),l.Cb(3),l.Dc(l.kc(6,4,e.header.startDate,"dd.MM.yy"))}}function vi(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Xb(1,bi),l.Sb())}function Ci(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"span",22),l.Cc(2),l.ic(3,"date"),l.Sb(),l.Tb(4,"span",23),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(2),l.Dc(l.jc(3,2,e.header.endDate)),l.Cb(3),l.Dc(l.kc(6,4,e.header.endDate,"dd.MM.yy"))}}function Oi(e,t){1&e&&(l.Tb(0,"mat-header-cell",20),l.Xb(1,di),l.Sb())}function ji(e,t){if(1&e&&(l.Tb(0,"mat-cell",20),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.header.budget,"1.2-2")," ")}}function yi(e,t){1&e&&l.Ob(0,"mat-header-row")}function Si(e,t){1&e&&l.Ob(0,"mat-row")}ri=$localize`:␟1470eabded471793a7ef2271e2a1dc30a1a3265f␟935267939147271845:Datum`,si=$localize`:␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`,li=$localize`:␟0bf18431caaac839c1e6c838e2a27d9fd321743a␟1346750425871899275:Gültig ab`,bi=$localize`:␟984a34347041296dcc3cae9a8719c400e631988e␟8509586664655630098:Gültig bis`,di=$localize`:␟4a484679998242155cb21125438fb4d30e58f79f␟2311722646469153365:Umfang`;let Ti=(()=>{class e extends ni{constructor(){super(...arguments),this.displayedColumns=["id","issuedAt","description","startDate","endDate","budget"]}getShortenedDescription(e){return e.length>20?e.substring(0,20)+"...":e}}return e.\u0275fac=function(t){return wi(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-list"]],features:[l.zb],decls:22,vars:3,consts:[[1,"mat-elevation-z4"],[3,"dataSource"],["matColumnDef","id"],["class","width--sm",4,"matHeaderCellDef"],["class","width--sm",4,"matCellDef"],["matColumnDef","issuedAt"],["fxHide.lt-md","","style","display: flex !important;",4,"matHeaderCellDef"],["fxHide.lt-md","","style","display: flex !important;",4,"matCellDef"],["matColumnDef","description"],["class","width--lg",4,"matHeaderCellDef"],["class","width--lg",4,"matCellDef"],["matColumnDef","startDate"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","endDate"],["matColumnDef","budget"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"width--sm"],["mat-button","",3,"routerLink"],["fxHide.lt-md","",2,"display","flex !important"],[1,"width--lg"],["fxHide.lt-md",""],["fxHide.gt-sm",""]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"mat-table",1),l.Rb(2,2),l.Bc(3,ai,2,0,"mat-header-cell",3),l.Bc(4,oi,3,4,"mat-cell",4),l.Qb(),l.Rb(5,5),l.Bc(6,ui,2,0,"mat-header-cell",6),l.Bc(7,mi,3,3,"mat-cell",7),l.Qb(),l.Rb(8,8),l.Bc(9,fi,2,0,"mat-header-cell",9),l.Bc(10,hi,5,2,"mat-cell",10),l.Qb(),l.Rb(11,11),l.Bc(12,gi,2,0,"mat-header-cell",12),l.Bc(13,pi,7,7,"mat-cell",13),l.Qb(),l.Rb(14,14),l.Bc(15,vi,2,0,"mat-header-cell",12),l.Bc(16,Ci,7,7,"mat-cell",13),l.Qb(),l.Rb(17,15),l.Bc(18,Oi,2,0,"mat-header-cell",6),l.Bc(19,ji,3,4,"mat-cell",7),l.Qb(),l.Bc(20,yi,1,0,"mat-header-row",16),l.Bc(21,Si,1,0,"mat-row",17),l.Sb(),l.Sb()),2&e&&(l.Cb(1),l.nc("dataSource",t.dataSource),l.Cb(19),l.nc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.nc("matRowDefColumns",t.displayedColumns))},directives:[ti.j,ti.c,ti.e,ti.b,ti.g,ti.i,ti.d,ti.a,Fn.a,s.j,Hn.b,ti.f,ti.h],pipes:[Nn.e,Nn.f],styles:["mat-cell[_ngcontent-%COMP%] > a.mat-button[_ngcontent-%COMP%]{min-width:4rem;padding:0 .5rem}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:1rem}}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]{font-size:1.6rem}}@media only screen and (max-width:959px){mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:1rem}}.width--sm[_ngcontent-%COMP%]{flex:1}.width--lg[_ngcontent-%COMP%]{flex:2}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{padding-left:.5rem}}"],changeDetection:0}),e})();const wi=l.Vb(Ti);var Di;function Ii(e,t){1&e&&(l.Tb(0,"mat-header-cell",19),l.Xb(1,Di),l.Sb())}Di=$localize`:␟3ecb5ffd80e534d0d8cf0376a019296c5f771f87␟3563503330091824066:Nr.`;const $i=function(e){return["/invoicing/invoices",e]};function xi(e,t){if(1&e&&(l.Tb(0,"mat-cell",19),l.Tb(1,"a",20),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.nc("routerLink",l.pc(2,$i,e.header.id)),l.Cb(1),l.Dc(e.header.id)}}var Pi,_i,ki,Mi,zi,Ai,Bi;function Ri(e,t){1&e&&(l.Tb(0,"mat-header-cell",21),l.Xb(1,Pi),l.Sb())}function Ei(e,t){if(1&e&&(l.Tb(0,"mat-cell",21),l.Cc(1),l.ic(2,"date"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.jc(2,1,e.header.issuedAt)," ")}}function Ni(e,t){1&e&&(l.Tb(0,"mat-header-cell",22),l.Tb(1,"span",23),l.Xb(2,_i),l.Sb(),l.Tb(3,"span",24),l.Xb(4,ki),l.Sb(),l.Sb())}function Fi(e,t){if(1&e&&(l.Tb(0,"mat-cell",22),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",e.header.billingPeriod," ")}}function Li(e,t){1&e&&(l.Tb(0,"mat-header-cell",21),l.Xb(1,Mi),l.Sb())}function Xi(e,t){if(1&e&&(l.Tb(0,"mat-cell",21),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.netValue,"1.2-2")," ")}}function qi(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Tb(1,"span",23),l.Xb(2,zi),l.Sb(),l.Tb(3,"span",24),l.Xb(4,Ai),l.Sb(),l.Sb())}function Hi(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.paymentAmount,"1.2-2")," ")}}function Ui(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Xb(1,Bi),l.Sb())}Pi=$localize`:␟1470eabded471793a7ef2271e2a1dc30a1a3265f␟935267939147271845:Datum`,_i=$localize`:␟3342a3c0c94305b6b27a42d63f3a3e5d62c72350␟5110226715617494380:Leistungszeitraum`,ki=$localize`:␟761edc4bb4bf3b074dcc6c9cc2f1c5026dadf425␟8579240404470114859:Zeitraum`,Mi=$localize`:␟440811b80eb2e50e99cfd9ce3488c64effe4ac12␟4255603834735357563:Nettobetrag`,zi=$localize`:␟4e36a7e889e4ccc15542a4c4e95e077e0faf14ac␟8800748062155248797:Zahlungsbetrag`,Ai=$localize`:␟b1318f9a2f3af0d6dab9195065bcc438a444cc3a␟6777217996757352044:Betrag`,Bi=$localize`:␟6aeb444698c3fb62567e3c083b9957b3bb68328b␟3628816711306092195:Fällig am`;const Vi=function(e){return{"past-due":e}};function Gi(e,t){if(1&e&&(l.Tb(0,"mat-cell",25),l.Tb(1,"span",23),l.Cc(2),l.ic(3,"date"),l.Sb(),l.Tb(4,"span",24),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Sb()),2&e){const e=t.$implicit,n=l.hc();l.nc("ngClass",l.pc(8,Vi,n.isPastDue(e))),l.Cb(2),l.Dc(l.jc(3,3,e.dueDate)),l.Cb(3),l.Dc(l.kc(6,5,e.dueDate,"dd.MM.yy"))}}function Yi(e,t){1&e&&l.Ob(0,"mat-header-row")}function Zi(e,t){1&e&&l.Ob(0,"mat-row")}let Qi=(()=>{class e extends ni{constructor(){super(...arguments),this.displayedColumns=["id","issuedAt","billingPeriod","netValue","paymentAmount","dueDate"]}ngOnChanges(){this.dataSource.data=this.objects}isPastDue(e){return!e.isPaid()&&e.dueDate<new Date}}return e.\u0275fac=function(t){return Ji(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-list"]],features:[l.zb,l.Ab],decls:22,vars:3,consts:[[1,"mat-elevation-z4"],[3,"dataSource"],["matColumnDef","id"],["class","width--sm",4,"matHeaderCellDef"],["class","width--sm",4,"matCellDef"],["matColumnDef","issuedAt"],["fxHide.lt-md","","style","display: flex !important;",4,"matHeaderCellDef"],["fxHide.lt-md","","style","display: flex !important;",4,"matCellDef"],["matColumnDef","billingPeriod"],["class","width--lg",4,"matHeaderCellDef"],["class","width--lg",4,"matCellDef"],["matColumnDef","netValue"],["matColumnDef","paymentAmount"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","dueDate"],[3,"ngClass",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"width--sm"],["mat-button","",3,"routerLink"],["fxHide.lt-md","",2,"display","flex !important"],[1,"width--lg"],["fxHide.lt-md",""],["fxHide.gt-sm",""],[3,"ngClass"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"mat-table",1),l.Rb(2,2),l.Bc(3,Ii,2,0,"mat-header-cell",3),l.Bc(4,xi,3,4,"mat-cell",4),l.Qb(),l.Rb(5,5),l.Bc(6,Ri,2,0,"mat-header-cell",6),l.Bc(7,Ei,3,3,"mat-cell",7),l.Qb(),l.Rb(8,8),l.Bc(9,Ni,5,0,"mat-header-cell",9),l.Bc(10,Fi,2,1,"mat-cell",10),l.Qb(),l.Rb(11,11),l.Bc(12,Li,2,0,"mat-header-cell",6),l.Bc(13,Xi,3,4,"mat-cell",7),l.Qb(),l.Rb(14,12),l.Bc(15,qi,5,0,"mat-header-cell",13),l.Bc(16,Hi,3,4,"mat-cell",14),l.Qb(),l.Rb(17,15),l.Bc(18,Ui,2,0,"mat-header-cell",13),l.Bc(19,Gi,7,10,"mat-cell",16),l.Qb(),l.Bc(20,Yi,1,0,"mat-header-row",17),l.Bc(21,Zi,1,0,"mat-row",18),l.Sb(),l.Sb()),2&e&&(l.Cb(1),l.nc("dataSource",t.dataSource),l.Cb(19),l.nc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.nc("matRowDefColumns",t.displayedColumns))},directives:[ti.j,ti.c,ti.e,ti.b,ti.g,ti.i,ti.d,ti.a,Fn.a,s.j,Hn.b,Nn.k,Hn.a,ti.f,ti.h],pipes:[Nn.e,Nn.f],styles:["mat-cell[_ngcontent-%COMP%] > a.mat-button[_ngcontent-%COMP%]{min-width:5rem;padding:0 .5rem}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%] > a.mat-button[_ngcontent-%COMP%]{padding-left:.5rem}}@media only screen and (min-width:1279px){mat-cell[fxhide\\.lt-md][_ngcontent-%COMP%]{display:flex!important}}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:1rem}}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]{font-size:1.6rem}}@media only screen and (min-width:1279px){mat-header-cell[fxhide\\.lt-md][_ngcontent-%COMP%]{display:flex!important}}@media only screen and (max-width:959px){mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:1rem}}.width--sm[_ngcontent-%COMP%]{flex:1}.width--lg[_ngcontent-%COMP%]{flex:3}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{padding-left:.5rem}}.past-due[_ngcontent-%COMP%]{color:#c62828}"],changeDetection:0}),e})();const Ji=l.Vb(Qi),Ki=["label",$localize`:Details label␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`];var Wi,eo;Wi=$localize`:␟81d696cdc37eb8ebefaa037a5972539942bccfd7␟8766474537436839826:aktiv`,eo=$localize`:␟9f7e0a292de93c112481a51cb6f959242b3ff7d4␟8015756215649523115:inaktiv`;const to=["placeholder",$localize`:Name placeholder␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`],no=["placeholder",$localize`:Zusatz placeholder␟dc722aa68b020119c8d9c35d4dad2d36b619ff37␟4273632578386515134:Zusatz`];var co;co=$localize`:␟e5ccbefb9779386b4d03e1905ab10ca42045c055␟1983687610954995553: Adresse `;const ao=["placeholder",$localize`:Land placeholder␟7584280252b97acbb03011f8ad00bf1546c1509f␟6375472359794248883:Land`],io=["placeholder",$localize`:Postleitzahl placeholder␟a19b2066ee5125ad7da789939c2d40c2695e9b66␟3749857632446690851:Postleitzahl`],oo=["placeholder",$localize`:Ort placeholder␟21c7f50a98ed6ee10bbea74803213979b9c6cb66␟625064919933078273:Ort`],ro=["placeholder",$localize`:Straße placeholder␟5de99bb0cc963bbbd0e375f53b640a2bedf9b681␟8957405583825584558:Straße`],so=["placeholder",$localize`:E-Mail placeholder␟6d3b88a3ae6ff3d987f86395605397ec736dee9c␟8115083664628466958:E-Mail`],lo=["placeholder",$localize`:Telefon placeholder␟cbbc5fc52b2dbad2f6313f78cd491475b7df01a9␟1578329818296386415:Telefon`],bo=["placeholder",$localize`:Fax placeholder␟c51dd3c995cd973b8678838ac584270932b410c3␟791988267498679324:Fax`],uo=["placeholder",$localize`:Web Site placeholder␟cae9dd147e1d16cf8c91545af504282a5dba8802␟4516245323836473364:Web Site`],mo=["placeholder",$localize`:Logo URL placeholder␟20863f05cbbba236c936781412d253077a17595d␟2198590276913934346:Logo URL`];var fo,ho,go,po;function vo(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,fo),l.Sb())}function Co(e,t){1&e&&(l.Tb(0,"mat-icon",30),l.Cc(1,"error_outline"),l.Sb())}function Oo(e,t){if(1&e&&(l.Tb(0,"mat-option",31),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e.isoCode),l.Cb(1),l.Dc(e.name)}}function jo(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ho),l.Sb())}function yo(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,go),l.Sb())}function So(e,t){1&e&&(l.Tb(0,"mat-icon",30),l.Cc(1," error_outline "),l.Sb())}fo=$localize`:␟be211aeaa3f4691b3c571847f0837c08b0145d05␟1303590087771332978: Bitte geben Sie einen Namen ein `,ho=$localize`:␟4efcfdc13331143046024c023c76b96590ad0656␟8295389467117191782: Bitte geben Sie eine Postleitzahl ein `,go=$localize`:␟f669033ee5d0cfe654b5b3be9397e66db60a5354␟7055408595816220041: Bitte geben Sie einen Ort ein `,po=$localize`:␟e34a0ed6e8b02985885a10a7fccbef0cd4f4510d␟7380742090895011449:Kommunikation`;const To=function(){return["email","phone","fax","webSite","logoUrl"]};function wo(e,t){if(1&e&&(l.Bc(0,So,2,0,"mat-icon",12),l.Tb(1,"span"),l.Xb(2,po),l.Sb()),2&e){const e=l.hc();l.nc("ngIf",e.hasError(l.oc(1,To)))}}var Do,Io,$o,xo,Po;function _o(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Do),l.Sb())}function ko(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Io),l.Sb())}function Mo(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,$o),l.Sb())}function zo(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,xo),l.Sb())}function Ao(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Po),l.Sb())}Do=$localize`:␟3b5f51a38b72a657c1b04b4410708c43ac49aa5b␟1164585582579262358: Bitte geben Sie eine gültige E-Mail-Adresse ein `,Io=$localize`:␟e7465ce6d48157538243d581a41078b76b4fd6c0␟5011206747986867307: Bitte geben Sie eine gültige Telefonnummer ein `,$o=$localize`:␟6460f7061de47a9dba776af90b7840c0030aed84␟7788405478367669067: Bitte geben Sie eine gültige Faxnummer ein `,xo=$localize`:␟b8bba3204b7e310f3acfa8305b26d8e17e7f7e52␟1443061571709800869: Bitte geben Sie eine gültige URL ist ungültig `,Po=$localize`:␟48d5665b79bb05570f3f573dec4c94783f2a0175␟2248003256102313691: Bitte geben Sie eine gültige URL ein `;const Bo=["label",$localize`:Dokumente␟a6bb7641bde88e6d98545723fd6f563960c6ade0␟8986273476063523240:Dokumente`];function Ro(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Bo),l.Tb(2,"section",32),l.Tb(3,"div"),l.Ob(4,"jo-document-link-list",33),l.Sb(),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(4),l.nc("object",e.object)}}const Eo=["label",$localize`:Aktive Verträge␟cd2183bbe69887bf060409af30d5e2aaee1f3ca0␟7150667396706857545:Aktive Verträge`];function No(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Eo),l.Ob(2,"jo-contract-list",34),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.activeContracts)}}const Fo=["label",$localize`:Letzte Verträge␟ef4ad9144faa0f853e0fc5322e5a1ad8ebaa9c18␟1520562236166949242:Letzte Verträge`];function Lo(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Fo),l.Ob(2,"jo-contract-list",34),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.lastContracts)}}const Xo=["label",$localize`:Offene Rechnungen␟9140e68397cae48dfcde5153ad2dbeb94879c32a␟2229036289439083594:Offene Rechnungen`];function qo(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Xo),l.Ob(2,"jo-invoice-list",34),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.openInvoices)}}const Ho=["label",$localize`:Letzte Rechnungen␟ccf427c851879c6cadc3a4ce0c6094cedfc3a021␟6467529815805711800:Letzte Rechnungen`];function Uo(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Ho),l.Ob(2,"jo-invoice-list",34),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.lastInvoices)}}var Vo,Go,Yo,Zo,Qo,Jo,Ko;function Wo(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Vo),l.Sb())}function er(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Go),l.Sb())}function tr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",43),l.dc("click",(function(t){return l.tc(e),l.hc(3).onDelete(t)})),l.Tb(1,"span"),l.Xb(2,Jo),l.Sb(),l.Sb()}}function nr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",44),l.dc("click",(function(){l.tc(e);const t=l.hc(3);return t.onQuickInvoice(t.object)})),l.Tb(1,"span"),l.Xb(2,Ko),l.Sb(),l.Sb()}}function cr(e,t){if(1&e){const e=l.Ub();l.Rb(0),l.Bc(1,tr,3,0,"button",38),l.Tb(2,"button",39),l.dc("click",(function(t){return l.tc(e),l.hc(2).onNew(t)})),l.Tb(3,"span"),l.Xb(4,Yo),l.Sb(),l.Sb(),l.Tb(5,"button",40),l.dc("click",(function(t){return l.tc(e),l.hc(2).onCopy(t)})),l.Tb(6,"span"),l.Xb(7,Zo),l.Sb(),l.Sb(),l.Tb(8,"button",41),l.dc("click",(function(){l.tc(e);const t=l.hc(2);return t.onSave(t.form)})),l.Tb(9,"span"),l.Xb(10,Qo),l.Sb(),l.Sb(),l.Bc(11,nr,3,0,"button",42),l.Qb()}if(2&e){const e=l.hc(2);l.Cb(1),l.nc("ngIf",e.isDeletable||!e.form.controls.id.value),l.Cb(1),l.nc("disabled",!e.form.valid||e.form.dirty),l.Cb(3),l.nc("disabled",!e.form.valid||e.form.dirty||!e.object.header.id),l.Cb(3),l.nc("disabled",!e.form.valid||!e.form.dirty),l.Cb(3),l.nc("ngIf",e.isQualForQuickInvoice&&e.form.valid&&!e.form.dirty)}}Vo=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,Go=$localize`:␟c47252d6cffe14a672e7ef04b2cc30e761f240ae␟8930526198656004715:Zurück`,Yo=$localize`:␟88979a32990e673589e593742a64bf65cc78a3d1␟5659799815836451311:Neu`,Zo=$localize`:␟feabfc384269a35e1f051ef9302a4b5624f3a69a␟6421015407864399648:Kopieren`,Qo=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`,Jo=$localize`:␟a813fd43c9a1b211fe541045d263d2c500c80f0f␟4580399730639224598:Löschen`,Ko=$localize`:␟76c3eb966f0ba66dc3ecfa23720521ec47b2f754␟918038637540163317:Neue Rechnung`;const ar=function(){return["sales-user"]};function ir(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",35),l.Tb(1,"button",36),l.dc("click",(function(t){return l.tc(e),l.hc().onCancel(t)})),l.Bc(2,Wo,2,0,"span",9),l.Bc(3,er,2,0,"span",9),l.Sb(),l.Bc(4,cr,12,5,"ng-container",37),l.Sb()}if(2&e){const e=l.hc();l.Cb(2),l.nc("ngIf",e.form.dirty),l.Cb(1),l.nc("ngIf",!e.form.dirty),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(3,ar))}}const or=function(){return["postalCode","city"]};let rr=(()=>{class e extends sa{constructor(e,t,n){super(e,t,n),this.fb=e,this.store=t,this.router=n,this.quickInvoice=new l.o}getFormTitle(){return this.object.header.id?`${this.object.header.id} - ${this.object.header.name}`:"[neu]"}onQuickInvoice(e){this.quickInvoice.emit(e)}buildForm(){return this.fb.group({id:[{value:"",disabled:!0}],status:[""],name:["",[ta.w.required]],nameAdd:[""],country:[""],postalCode:["",[ta.w.required]],city:["",[ta.w.required]],street:[""],email:["",[ta.w.pattern(na.c)]],phone:["",[ta.w.pattern(na.d)]],fax:["",[ta.w.pattern(na.d)]],webSite:["",[ta.w.pattern(na.e)]],logoUrl:["",[ta.w.pattern(na.e)]]})}changeObject(e){const t=Object.assign({},this.object.data,{status:+e.status,name:e.name,nameAdd:e.nameAdd,logoUrl:e.logoUrl,address:{country:e.country,postalCode:e.postalCode,city:e.city,street:e.street,email:e.email,phone:e.phone,fax:e.fax,webSite:e.webSite}});console.log("changed receiver: ",t);const n=ce.ReceiverFactory.fromData(t);return console.log("changed receiver object: ",n),this.changed.emit(n),n}listenToChanges(){}patchForm(){const e={status:this.object.header.status.toString()},t=Object.assign({},Object.assign(Object.assign({},this.object.header),this.object.address),e);this.form.patchValue(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(ta.f),l.Nb(a.h),l.Nb(s.g))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-receiver-form"]],inputs:{isDeletable:"isDeletable",isQualForQuickInvoice:"isQualForQuickInvoice",activeContracts:"activeContracts",lastContracts:"lastContracts",openInvoices:"openInvoices",lastInvoices:"lastInvoices",task:"task",countries:"countries"},outputs:{quickInvoice:"quickInvoice"},features:[l.zb],decls:70,vars:18,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","receiver-form",3,"formGroup"],[3,"selectedTabChange"],[6,"label"],["id","status-group","formControlName","status","aria-label","Kunde aktiv"],["color","primary","value","0"],["color","accent","value","1"],["id","name-group"],[1,"width--lg"],["matInput","","id","name","formControlName","name",6,"placeholder"],[4,"ngIf"],["matInput","","id","nameAdd","formControlName","nameAdd",6,"placeholder"],["expanded","true"],["color","warn",4,"ngIf"],["id","address-group"],["id","country","formControlName","country",6,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"width--sm"],["matInput","","id","postalCode","formControlName","postalCode",6,"placeholder"],["matInput","","id","city","formControlName","city",6,"placeholder"],["matInput","","id","street","formControlName","street",6,"placeholder"],["mat-tab-label",""],["id","comm-group"],["matInput","","type","email","id","email","formControlName","email",6,"placeholder"],["matInput","","id","phone","formControlName","phone",6,"placeholder"],["matInput","","id","fax","formControlName","fax",6,"placeholder"],["id","url-group"],["matInput","","type","url","id","webSite","formControlName","webSite",6,"placeholder"],["matInput","","type","url","id","logoUrl","formControlName","logoUrl",6,"placeholder"],[4,"ngIf",6,"label"],["class","jo-btn-row",4,"ngIf"],["color","warn"],[3,"value"],[1,"tables","u-mt-lg"],[3,"object"],[3,"objects"],[1,"jo-btn-row"],["id","btn_cancel","type","button","mat-raised-button","",3,"click"],[4,"joIfAuthorizedAs"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","btn_new","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_copy","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click"],["id","btn_quickInvoice","type","button","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click"],["id","btn_quickInvoice","type","button","mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(l.Tb(0,"form",0),l.Tb(1,"mat-tab-group",1),l.dc("selectedTabChange",(function(e){return t.onTabChange(e)})),l.Cc(2,"> "),l.Tb(3,"mat-tab",2),l.Yb(4,Ki),l.Tb(5,"mat-radio-group",3),l.Tb(6,"mat-radio-button",4),l.Xb(7,Wi),l.Sb(),l.Tb(8,"mat-radio-button",5),l.Xb(9,eo),l.Sb(),l.Sb(),l.Tb(10,"div",6),l.Tb(11,"mat-form-field",7),l.Tb(12,"input",8),l.Yb(13,to),l.Sb(),l.Bc(14,vo,2,0,"mat-error",9),l.Sb(),l.Tb(15,"mat-form-field",7),l.Tb(16,"input",10),l.Yb(17,no),l.Sb(),l.Sb(),l.Sb(),l.Tb(18,"mat-expansion-panel",11),l.Tb(19,"mat-expansion-panel-header"),l.Tb(20,"mat-panel-title"),l.Xb(21,co),l.Sb(),l.Tb(22,"mat-panel-description"),l.Bc(23,Co,2,0,"mat-icon",12),l.Sb(),l.Sb(),l.Tb(24,"div",13),l.Tb(25,"mat-form-field"),l.Tb(26,"mat-select",14),l.Yb(27,ao),l.Bc(28,Oo,2,2,"mat-option",15),l.Sb(),l.Sb(),l.Tb(29,"mat-form-field",16),l.Tb(30,"input",17),l.Yb(31,io),l.Sb(),l.Bc(32,jo,2,0,"mat-error",9),l.Sb(),l.Tb(33,"mat-form-field"),l.Tb(34,"input",18),l.Yb(35,oo),l.Sb(),l.Bc(36,yo,2,0,"mat-error",9),l.Sb(),l.Tb(37,"mat-form-field"),l.Tb(38,"input",19),l.Yb(39,ro),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(40,"mat-tab"),l.Bc(41,wo,3,2,"ng-template",20),l.Tb(42,"div",21),l.Tb(43,"mat-form-field",7),l.Tb(44,"input",22),l.Yb(45,so),l.Sb(),l.Bc(46,_o,2,0,"mat-error",9),l.Sb(),l.Tb(47,"mat-form-field",7),l.Tb(48,"input",23),l.Yb(49,lo),l.Sb(),l.Bc(50,ko,2,0,"mat-error",9),l.Sb(),l.Tb(51,"mat-form-field",7),l.Tb(52,"input",24),l.Yb(53,bo),l.Sb(),l.Bc(54,Mo,2,0,"mat-error",9),l.Sb(),l.Sb(),l.Tb(55,"div",25),l.Tb(56,"mat-form-field",7),l.Tb(57,"input",26),l.Yb(58,uo),l.Sb(),l.Bc(59,zo,2,0,"mat-error",9),l.Sb(),l.Tb(60,"mat-form-field",7),l.Tb(61,"input",27),l.Yb(62,mo),l.Sb(),l.Bc(63,Ao,2,0,"mat-error",9),l.Sb(),l.Sb(),l.Sb(),l.Bc(64,Ro,5,1,"mat-tab",28),l.Bc(65,No,3,1,"mat-tab",28),l.Bc(66,Lo,3,1,"mat-tab",28),l.Bc(67,qo,3,1,"mat-tab",28),l.Bc(68,Uo,3,1,"mat-tab",28),l.Sb(),l.Bc(69,ir,5,4,"div",29),l.Sb()),2&e&&(l.nc("formGroup",t.form),l.Cb(14),l.nc("ngIf",t.form.get("name").hasError("required")),l.Cb(9),l.nc("ngIf",t.hasError(l.oc(17,or))),l.Cb(5),l.nc("ngForOf",t.countries),l.Cb(4),l.nc("ngIf",t.form.get("postalCode").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("city").hasError("required")),l.Cb(10),l.nc("ngIf",t.form.get("email").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("phone").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("fax").hasError("pattern")),l.Cb(5),l.nc("ngIf",t.form.get("webSite").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("logoUrl").hasError("pattern")),l.Cb(1),l.nc("ngIf",t.object.header.id),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.activeContracts?null:t.activeContracts.length)>0),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.lastContracts?null:t.lastContracts.length)>0&&0===(null==t.activeContracts?null:t.activeContracts.length)),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.openInvoices?null:t.openInvoices.length)>0),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.lastInvoices?null:t.lastInvoices.length)>0&&0===(null==t.openInvoices?null:t.openInvoices.length)),l.Cb(1),l.nc("ngIf",t.tabIndex<2))},directives:[ta.x,ta.q,ta.j,da.b,da.a,ua.b,ta.p,ta.h,ua.a,ma.c,fa.b,ta.c,Nn.m,ha.b,ha.d,ha.e,ha.c,ga.a,Nn.l,da.c,ma.b,pa.a,va.l,ei,Ti,Qi,Fn.b,En.a],styles:["#receiver-form[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width:959px){#receiver-form[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]{height:4.8rem;font-size:1.4rem}#receiver-form[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%], #receiver-form[_ngcontent-%COMP%]   .mat-tab-label-content[_ngcontent-%COMP%]{font-size:1.4rem}#receiver-form[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], #receiver-form[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}#receiver-form[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:6.4rem!important}}#address-group[_ngcontent-%COMP%], #name-group[_ngcontent-%COMP%]{margin-bottom:2.4rem;display:flex;flex-wrap:wrap}#address-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #name-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child){margin-right:2.4rem}@media only screen and (max-width:959px){#address-group[_ngcontent-%COMP%], #name-group[_ngcontent-%COMP%]{flex-direction:column;font-size:1.6rem}}#name-group[_ngcontent-%COMP%], #status-group[_ngcontent-%COMP%]{padding:0 2.4rem}#status-group[_ngcontent-%COMP%]{margin-top:2.4rem;margin-bottom:2.4rem;display:flex;flex-wrap:wrap}#status-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:0 1.6rem}@media only screen and (max-width:959px){#status-group[_ngcontent-%COMP%]{font-size:1.6rem}}#comm-group[_ngcontent-%COMP%], #url-group[_ngcontent-%COMP%]{margin-top:3.6rem;display:flex;flex-direction:column}#comm-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]:not(:last-child), #url-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.4rem}@media only screen and (max-width:959px){#comm-group[_ngcontent-%COMP%], #url-group[_ngcontent-%COMP%]{font-size:1.6rem}}.jo-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),e})();var sr;function lr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-card",1),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Tb(3,"span",2),l.Xb(4,sr),l.Sb(),l.Tb(5,"span"),l.Cc(6),l.Sb(),l.Sb(),l.Sb(),l.Tb(7,"mat-card-content"),l.Tb(8,"section"),l.Tb(9,"jo-receiver-form",3,4),l.dc("copy",(function(t){return l.tc(e),l.hc().onCopy(t)}))("new",(function(){return l.tc(e),l.hc().onNew()}))("changed",(function(t){return l.tc(e),l.hc().onChanged(t)}))("create",(function(t){return l.tc(e),l.hc().onCreate(t)}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)}))("update",(function(t){return l.tc(e),l.hc().onUpdate(t)}))("quickInvoice",(function(t){return l.tc(e),l.hc().onQuickInvoice(t)})),l.ic(11,"async"),l.ic(12,"async"),l.ic(13,"async"),l.ic(14,"async"),l.ic(15,"async"),l.ic(16,"async"),l.ic(17,"async"),l.ic(18,"async"),l.Sb(),l.Sb(),l.Sb(),l.Sb()}if(2&e){const e=t.ngIf,n=l.hc();l.Cb(6),l.Dc(n.getTitle(e)),l.Cb(3),l.nc("object",e)("isDeletable",l.jc(11,10,n.isDeletable$))("isQualForQuickInvoice",l.jc(12,12,n.isQualifiedForQuickInvoice$))("activeContracts",l.jc(13,14,n.activeContractsForReceiver$))("lastContracts",l.jc(14,16,n.lastContractsForReceiver$))("openInvoices",l.jc(15,18,n.openInvoicesForReceiver$))("lastInvoices",l.jc(16,20,n.lastInvoicesForReceiver$))("task",l.jc(17,22,n.task$))("countries",l.jc(18,24,n.countries$))}}sr=$localize`:␟5170811ee777f21b4bab9431873fde29721364bd␟5832372188886501363:Rechnungsempfänger `;let br=(()=>{class e extends ea{constructor(e,t){super(e,t),this.service=e,this.route=t}onQuickInvoice(e){this.service.createQuickInvoice(e)}getTitle(e){return e.header.id?`${e.header.id} - ${e.header.name}`:"[neu]"}initializeWithData(e){this.countries$=this.service.getCountries(),"copy"===e||"new"===e?(this.task$.next(e),this.receiver$=this.service.getCurrent()):(this.task$.next("edit"),this.receiver$=this.service.getCurrent(),this.activeContractsForReceiver$=this.service.getActiveContracts(),this.lastContractsForReceiver$=this.service.getRecentContracts(),this.openInvoicesForReceiver$=this.service.getOpenInvoices(),this.lastInvoicesForReceiver$=this.service.getLastInvoices(),this.isDeletable$=this.service.isDeletable(),this.isQualifiedForQuickInvoice$=this.service.isQualifiedForQuickInvoice())}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(kn),l.Nb(s.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-receiver-details"]],features:[l.zb],decls:2,vars:3,consts:[["class","jo-details mat-elevation-z0",4,"ngIf"],[1,"jo-details","mat-elevation-z0"],["fxHide.lt-md",""],[3,"object","isDeletable","isQualForQuickInvoice","activeContracts","lastContracts","openInvoices","lastInvoices","task","countries","copy","new","changed","create","delete","update","quickInvoice"],["detailsForm",""]],template:function(e,t){1&e&&(l.Bc(0,lr,19,26,"mat-card",0),l.ic(1,"async")),2&e&&l.nc("ngIf",l.jc(1,1,t.receiver$))},directives:[Nn.m,Xn.a,Xn.e,Xn.h,Hn.b,Xn.d,rr],pipes:[Nn.b],styles:[".jo-details-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;text-transform:uppercase}@media only screen and (max-width:959px){.jo-details[_ngcontent-%COMP%]{padding:1rem 2rem;margin:.75rem}.jo-details[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:2rem;line-height:2rem}}"],changeDetection:0}),e})();const dr=e=>{const t=e.get("startDate").value,n=e.get("endDate").value,c=ca(t),a=ca(n);return!t||!n||a>=c?null:(e.get("endDate").setErrors({dateSequence:!0}),{dateSequence:!0})},ur=e=>e.value.length>0?null:{minItems:!0};var mr=n("iadO");let fr=(()=>{class e{constructor(e){this.service=e}ngOnChanges(e){this.buildItems(this.object.items)}onAdd(e){console.log("Add item requested."),this.service.addItem(this.object),e&&e.stopPropagation()}onChanged(){this.service.change(this.object)}onDelete(e){this.service.removeItem(this.object,e),this.itemsFormArray.markAsDirty()}buildItems(e){for(;this.itemsFormArray.length>0;)this.itemsFormArray.removeAt(0);e.forEach(e=>this.itemsFormArray.push(new ta.i({})))}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Pn))},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],inputs:{itemsFormArray:"itemsFormArray",object:"object",isChangeable:"isChangeable"},features:[l.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),hr=(()=>{class e{constructor(e){this.utility=e,this.changed=new l.o,this.delete=new l.o,this.isItemGroupBuilt=!1}ngOnChanges(e){this.isItemGroupBuilt?this.patchItem():(this.buildItem(),this.patchItem(),this.itemChanges=this.listenToValueChanges())}ngOnDestroy(){this.itemChanges&&this.itemChanges.unsubscribe()}onDelete(e){this.delete.emit(e)}processFieldChanges(e){let t=!1,n=!1;Object.keys(e).forEach(c=>{const a=this.getChangedValue(e,c);a!==this.item[c]&&(this.itemGroup.get(c).updateValueAndValidity(),this.itemGroup.get(c).valid&&(this.item[c]=a,t=!0,n=this.isImmediateChangeNeeded(c)))}),t&&n&&this.changed.emit()}getChangedValue(e,t){return"number"==typeof this.item[t]&&"string"==typeof e[t]?this.utility.fromLocalAmount(e[t]):e[t]}listenToValueChanges(){return this.itemGroup.valueChanges.pipe(Object(ia.a)(500),Object(oa.a)()).subscribe(e=>{this.processFieldChanges(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["ng-component"]],inputs:{itemGroup:"itemGroup",item:"item",isChangeable:"isChangeable"},outputs:{changed:"changed",delete:"delete"},features:[l.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var gr,pr,vr,Cr,Or,jr,yr,Sr;function Tr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",16),l.Tb(1,"button",17),l.dc("click",(function(){l.tc(e);const t=l.hc(2);return t.onDelete(t.itemGroup.get("id").value)})),l.Tb(2,"mat-icon",18),l.Cc(3,"remove"),l.Sb(),l.Sb(),l.Sb()}}function wr(e,t){if(1&e&&(l.Rb(0),l.Bc(1,Tr,4,0,"div",15),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}function Dr(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Or),l.Sb())}function Ir(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,jr),l.Sb())}function $r(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,yr),l.Sb())}function xr(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Sr),l.Sb())}function Pr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",20),l.Tb(1,"button",17),l.dc("click",(function(){l.tc(e);const t=l.hc(2);return t.onDelete(t.itemGroup.get("id").value)})),l.Tb(2,"mat-icon",18),l.Cc(3,"remove"),l.Sb(),l.Sb(),l.Sb()}}function _r(e,t){if(1&e&&(l.Rb(0),l.Bc(1,Pr,4,0,"div",19),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}gr=$localize`:␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`,pr=$localize`:␟9e753cca0b1fae0c9383e375154543d003e09ccc␟5381764684056187823:Preis pro Einheit`,vr=$localize`:␟107b9ff6838c0b8f0a4659e655911ab3bcb2d90e␟56228327617948862:Einheit`,Cr=$localize`:␟5b0300a79f5e96408ce29a73a2d996729a6a82d4␟1894072764523923289:Skonto erlaubt?`,Or=$localize`:␟88b3ac9a827098b6d328047f771e97fd46b1af06␟7393855088038119274: Bitte geben Sie eine Beschreibung ein `,jr=$localize`:␟5e6e5eb2f4da8bb92edc0113d306a24b9cb923e6␟284330613300293870: Bitte geben Sie einen Preis ein `,yr=$localize`:␟48e5eee6a8a63af79ead123a21c7ddeda607b465␟2498672340490571046: Bitte geben Sie einen gültigen (numerischen) Preis ein `,Sr=$localize`:␟d606966f8f732a8fb7968fbfda0dc33e9c8b01fd␟3040268739767396014: Bitte geben Sie eine gültige Preiseinheit ein `;const kr=function(){return["sales-user"]};let Mr=(()=>{class e extends hr{constructor(e){super(e),this.utility=e}buildItem(){this.itemGroup.addControl("id",new ta.g("")),this.itemGroup.addControl("description",new ta.g("",ta.w.required)),this.itemGroup.addControl("pricePerUnit",new ta.g("",[ta.w.required,ta.w.pattern(na.a)])),this.itemGroup.addControl("priceUnit",new ta.g("",ta.w.required)),this.itemGroup.addControl("cashDiscountAllowed",new ta.g("")),this.isItemGroupBuilt=!0}isImmediateChangeNeeded(e){return!1}patchItem(){const e={pricePerUnit:this.utility.toLocalAmount(this.item.data.pricePerUnit)},t=Object.assign({},Object.assign({},this.item.data),e);this.itemGroup.patchValue(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-item-form"]],features:[l.zb],decls:31,vars:12,consts:[[3,"formGroup"],["fxHide","","fxShow.lt-md",""],["fxHide","","fxShow.lt-md","",1,"jo-btn-row-sm"],[1,"contract-item-id","width--xs"],[4,"joIfAuthorizedAs"],["fxShow","","fxHide.lt-md","",1,"contract-item-id","width--xs"],[1,"width--xl"],["matInput","","formControlName","description"],[4,"ngIf"],[1,"width--sm"],["matInput","","formControlName","pricePerUnit"],[1,"width--md"],["matInput","","formControlName","priceUnit"],[1,"contract-item-cashDiscountAllowed","width--xs"],["color","primary","formControlName","cashDiscountAllowed",3,"value"],["class","contract-item-action",4,"ngIf"],[1,"contract-item-action"],["mat-mini-fab","","color","warn",3,"click"],["aria-label","Position l\xf6schen"],["fxShow","","fxHide.lt-md","","class","contract-item-action",4,"ngIf"],["fxShow","","fxHide.lt-md","",1,"contract-item-action"]],template:function(e,t){1&e&&(l.Rb(0,0),l.Ob(1,"mat-divider",1),l.Tb(2,"div",2),l.Tb(3,"div",3),l.Tb(4,"div"),l.Cc(5),l.Sb(),l.Sb(),l.Bc(6,wr,2,1,"ng-container",4),l.Sb(),l.Tb(7,"div",5),l.Tb(8,"div"),l.Cc(9),l.Sb(),l.Sb(),l.Tb(10,"mat-form-field",6),l.Tb(11,"mat-label",1),l.Xb(12,gr),l.Sb(),l.Ob(13,"input",7),l.Bc(14,Dr,2,0,"mat-error",8),l.Sb(),l.Tb(15,"mat-form-field",9),l.Tb(16,"mat-label",1),l.Xb(17,pr),l.Sb(),l.Ob(18,"input",10),l.Bc(19,Ir,2,0,"mat-error",8),l.Bc(20,$r,2,0,"mat-error",8),l.Sb(),l.Tb(21,"mat-form-field",11),l.Tb(22,"mat-label",1),l.Xb(23,vr),l.Sb(),l.Ob(24,"input",12),l.Bc(25,xr,2,0,"mat-error",8),l.Sb(),l.Tb(26,"div",13),l.Tb(27,"mat-checkbox",14),l.Tb(28,"span",1),l.Xb(29,Cr),l.Sb(),l.Sb(),l.Sb(),l.Bc(30,_r,2,1,"ng-container",4),l.Qb()),2&e&&(l.nc("formGroup",t.itemGroup),l.Cb(5),l.Dc(t.itemGroup.get("id").value),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(10,kr)),l.Cb(3),l.Dc(t.itemGroup.get("id").value),l.Cb(5),l.nc("ngIf",t.itemGroup.get("description").hasError("required")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("pricePerUnit").hasError("required")),l.Cb(1),l.nc("ngIf",t.itemGroup.get("pricePerUnit").hasError("pattern")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("priceUnit").hasError("required")),l.Cb(2),l.nc("value",t.item.cashDiscountAllowed),l.Cb(3),l.nc("joIfAuthorizedAs",l.oc(11,kr)))},directives:[ta.q,ta.j,Za.a,Hn.b,En.a,ma.c,ma.g,fa.b,ta.c,ta.p,ta.h,Nn.m,ya.a,Fn.b,pa.a,ma.b],styles:["@media only screen and (max-width:959px){[_nghost-%COMP%]{font-size:1.6rem}}div.width--xs[_ngcontent-%COMP%]{width:4rem}div.width--sm[_ngcontent-%COMP%]{width:8rem}div.width--md[_ngcontent-%COMP%]{width:12rem}div.width--lg[_ngcontent-%COMP%]{width:28rem}div.width--xl[_ngcontent-%COMP%]{width:36rem}div.contract-item-id[_ngcontent-%COMP%]{align-self:flex-start}div.contract-item-id[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:600;height:4rem;width:4rem;border-radius:100%;background-color:#777}@media only screen and (max-width:600px){div.contract-item-id[_ngcontent-%COMP%]{align-self:flex-start}}@media only screen and (max-width:960px){div.contract-item-id[_ngcontent-%COMP%]{align-self:flex-start}}div.contract-item-description[_ngcontent-%COMP%]{align-self:center;overflow:hidden}div.contract-item-pricePerUnit[_ngcontent-%COMP%], div.contract-item-priceUnit[_ngcontent-%COMP%]{align-self:center}div.contract-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:center;justify-self:center}@media only screen and (max-width:599px){div.contract-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:flex-start;justify-self:flex-start}}@media only screen and (max-width:959px){div.contract-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:flex-start;justify-self:flex-start}}div.contract-item-action[_ngcontent-%COMP%]{align-self:center}.jo-btn-row-sm[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin:2rem 0 1rem}"],changeDetection:0}),e})();var zr,Ar,Br,Rr,Er;function Nr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",11),l.dc("click",(function(t){return l.tc(e),l.hc(2).onAdd(t)})),l.Tb(1,"mat-icon",12),l.Cc(2,"add"),l.Sb(),l.Sb()}}function Fr(e,t){if(1&e&&(l.Rb(0),l.Bc(1,Nr,3,0,"button",10),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}function Lr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"jo-contract-item-form",13),l.dc("changed",(function(){return l.tc(e),l.hc().onChanged()}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)})),l.Sb()}if(2&e){const e=t.$implicit,n=t.index,c=l.hc();l.nc("itemGroup",e)("item",c.object.items[n])("isChangeable",c.isChangeable)}}function Xr(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",16),l.dc("click",(function(t){return l.tc(e),l.hc(2).onAdd(t)})),l.Tb(1,"span"),l.Xb(2,Er),l.Sb(),l.Sb()}}function qr(e,t){if(1&e&&(l.Tb(0,"div",14),l.Bc(1,Xr,3,0,"button",15),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}zr=$localize`:␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`,Ar=$localize`:␟7f18d9e7e949f788d606ea4314689a9f2f7ee9c5␟3277192243903869757:Preis`,Br=$localize`:␟107b9ff6838c0b8f0a4659e655911ab3bcb2d90e␟56228327617948862:Einheit`,Rr=$localize`:␟5b0300a79f5e96408ce29a73a2d996729a6a82d4␟1894072764523923289:Skonto erlaubt?`,Er=$localize`:␟c70359936645bb8b67b88e3685317960306c5e86␟2043972179657719095:Position hinzufügen`;const Hr=function(){return["sales-user"]};let Ur=(()=>{class e extends fr{constructor(e){super(e),this.service=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Mn))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-items-form"]],features:[l.zb],decls:16,vars:5,consts:[["fxShow","","fxHide.lt-md","",1,"table-header"],[1,"table-btn"],[4,"joIfAuthorizedAs"],[1,"contract-item-description"],[1,"contract-item-pricePerUnit"],[1,"contract-item-priceUnit"],[1,"contract-item-cashDiscountAllowed"],[1,"contract-item-action"],["class","table-row table-row--editable",3,"itemGroup","item","isChangeable","changed","delete",4,"ngFor","ngForOf"],["class","u-mt-md","fxHide","","fxShow.lt-md","",4,"joIfAuthorizedAs"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["aria-label","Position hinzuf\xfcgen"],[1,"table-row","table-row--editable",3,"itemGroup","item","isChangeable","changed","delete"],["fxHide","","fxShow.lt-md","",1,"u-mt-md"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(l.Tb(0,"div"),l.Tb(1,"div",0),l.Tb(2,"div",1),l.Bc(3,Fr,2,1,"ng-container",2),l.Sb(),l.Tb(4,"label",3),l.Xb(5,zr),l.Sb(),l.Tb(6,"label",4),l.Xb(7,Ar),l.Sb(),l.Tb(8,"label",5),l.Xb(9,Br),l.Sb(),l.Tb(10,"label",6),l.Xb(11,Rr),l.Sb(),l.Ob(12,"label",7),l.Sb(),l.Tb(13,"div"),l.Bc(14,Lr,1,3,"jo-contract-item-form",8),l.Sb(),l.Bc(15,qr,2,1,"div",9),l.Sb()),2&e&&(l.Cb(3),l.nc("joIfAuthorizedAs",l.oc(3,Hr)),l.Cb(11),l.nc("ngForOf",t.itemsFormArray.controls),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(4,Hr)))},directives:[Hn.b,En.a,Nn.l,Nn.m,Fn.b,pa.a,Mr],styles:[".table-btn[_ngcontent-%COMP%]{width:4rem;display:flex;justify-content:center;align-items:center;padding:1rem 0}.table-header[_ngcontent-%COMP%] > .table-btn[_ngcontent-%COMP%]{margin-right:1.2rem}label[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8}.contract-item-id[_ngcontent-%COMP%]{width:3.2rem}.contract-item-description[_ngcontent-%COMP%]{width:36rem}.contract-item-priceUnit[_ngcontent-%COMP%]{width:12rem}.contract-item-pricePerUnit[_ngcontent-%COMP%]{width:8rem}.contract-item-action[_ngcontent-%COMP%], .contract-item-cashDiscountAllowed[_ngcontent-%COMP%]{width:4rem}"],changeDetection:0}),e})();const Vr=["placeholder",$localize`:Rechnungstext␟54ab03f963f902d5f69aeb32fec7a86813ea87d3␟8646224761300888054:Rechnungstext`],Gr=["placeholder",$localize`:interner Text␟0633f38a7eb9b1f388355998091d8d0eeba84422␟4829517666109604291:interner Text`];let Yr=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-texts-form-component"]],inputs:{textsFormGroup:"textsFormGroup",object:"object",isChangeable:"isChangeable"},decls:9,vars:1,consts:[["id","text-group",3,"formGroup"],[1,"width--full"],["matInput","","id","invoiceText","formControlName","invoiceText","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",6,"placeholder"],["matInput","","id","internalText","formControlName","internalText","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",6,"placeholder"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"mat-form-field",1),l.Tb(2,"textarea",2),l.Yb(3,Vr),l.Cc(4,"        "),l.Sb(),l.Sb(),l.Tb(5,"mat-form-field",1),l.Tb(6,"textarea",3),l.Yb(7,Gr),l.Cc(8,"        "),l.Sb(),l.Sb(),l.Sb()),2&e&&l.nc("formGroup",t.textsFormGroup)},directives:[ta.q,ta.j,ma.c,fa.b,ta.c,fa.d,ta.p,ta.h],styles:["#text-group[_ngcontent-%COMP%]{margin-top:3.6rem;display:flex;flex-direction:column}#text-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.4rem}@media only screen and (max-width:959px){#text-group[_ngcontent-%COMP%]{font-size:1.6rem}}textarea.mat-input-element[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0}),e})();var Zr=function(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(c=Object.getOwnPropertySymbols(e);a<c.length;a++)t.indexOf(c[a])<0&&Object.prototype.propertyIsEnumerable.call(e,c[a])&&(n[c[a]]=e[c[a]])}return n};const Qr=["label",$localize`:Details label␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`],Jr=["placeholder",$localize`:Vertragspartner placeholder␟706569cc06eb155b96ee159f65f258cd61ffb2b4␟4282747239118142038:Vertragspartner`],Kr=["placeholder",$localize`:Austellungsdatum placeholder␟ab350df9f10f8958b49044a093adc3ff40b500ee␟3373442340766404998:augestellt am`],Wr=["placeholder",$localize`:Bezeichnung placeholder␟ef623008673bd2f0a928de8947d89e195d4bb081␟5742112645312541475:Bezeichnung`],es=["placeholder",$localize`:Gültig ab placeholder␟0bf18431caaac839c1e6c838e2a27d9fd321743a␟1346750425871899275:Gültig ab`],ts=["placeholder",$localize`:Gültig bis placeholder␟984a34347041296dcc3cae9a8719c400e631988e␟8509586664655630098:Gültig bis`],ns=["placeholder",$localize`:Vertragsumfang placeholder␟7168018a6bd4e602c65cd8fd955f6c6008d36f52␟1049727201162290560:Vertragsumfang`],cs=["placeholder",$localize`:Währung placeholder␟d0ed15535520aa18e6cda2699402d710b2fe2f24␟840276036992230191:Währung`];var as;as=$localize`:␟fb2126695d01dc10c35c579ffaa6cf8f6f5ef779␟7780068730337602696: Zahlungsbedingungen `;const is=["placeholder",$localize`:Abrechnungsmethode placeholder␟94f146aa5b64ff76a340bb87c70de86ff725dc89␟6433128085828975212:Abrechnungsmethode`];var os,rs;os=$localize`:␟cc1820bde05602a97b5a798796df954f091586c2␟7915235365181603581:Rechnung`,rs=$localize`:␟0b5dbef59cb7a61b005772768bcfad47d7bdbe0b␟2168111436561686090:Gutschriftverfahren`;const ss=["placeholder",$localize`:Zahlungsmethode placeholder␟7fd2bd5f2d075316ece7d5f8cd6d9ff158ad6186␟1787120783773742465:Zahlungsmethode`];var ls,bs;ls=$localize`:␟a92e1e7f291cb9f0edd0d5964e9909798e5331b8␟2453386397609224267:Überweisung`,bs=$localize`:␟e20d5a24db36cecc8abcb0b7de821a5ce31e693b␟439972911168819515:Bankeinzug`;const ds=["placeholder",$localize`:Zahlungsbedingungen placeholder␟58a005e0f6f0af9b5e57de55495e15142ae9dcd8␟6798515712238664417:Zahlungsbedingungen`],us=["placeholder",$localize`:Skontofrist (Tage) placeholder␟ca63f9bafaae5af42510f630d08abe682e73e3d7␟2141599410247429915:Skontofrist (Tage)`],ms=["placeholder",$localize`:Skonto % placeholder␟b9e57a536573fa03be1118ef385582b08d1d6b98␟1663220885453607346:Skonto %`],fs=["placeholder",$localize`:Zahlungsfrist (Tage) placeholder␟0c7cad43a74f42fee87f1514b1ff828bb55dd820␟3479613514182424730:Zahlungsfrist (Tage)`];var hs;hs=$localize`:␟2ae0d2f825a259edf00be3b2bdc711132d48ebb6␟2957224140510428886: Positionen `;const gs=["label",$localize`:Texte label␟47c49089cc33fccaf331c86769333cde3b5ca371␟4500738092135046119:Texte`];function ps(e,t){if(1&e&&(l.Tb(0,"mat-option",25),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e.header.id),l.Cb(1),l.Ec("",e.header.name," ")}}var vs,Cs,Os,js,ys,Ss,Ts,ws,Ds,Is,$s,xs,Ps,_s,ks,Ms;function zs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,vs),l.Sb())}function As(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Cs),l.Sb())}function Bs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Os),l.Sb())}function Rs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,js),l.Sb())}function Es(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ys),l.Sb())}function Ns(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ss),l.Sb())}function Fs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ts),l.Sb())}function Ls(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ws),l.Sb())}function Xs(e,t){1&e&&(l.Tb(0,"mat-icon",38),l.Cc(1," error_outline "),l.Sb())}function qs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ds),l.Sb())}function Hs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Is),l.Sb())}function Us(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,$s),l.Sb())}function Vs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,xs),l.Sb())}function Gs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ps),l.Sb())}function Ys(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,_s),l.Sb())}function Zs(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ks),l.Sb())}function Qs(e,t){1&e&&(l.Tb(0,"mat-icon",38),l.Cc(1,"error_outline"),l.Sb())}function Js(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ms),l.Sb())}vs=$localize`:␟db353325f80575ad8764b014409532ecf0bcae58␟3335321641064915753: Bitte wählen Sie einen Vertragspartner aus `,Cs=$localize`:␟f498a576154b49ccdb5d1325a6962c837e7732a7␟5394611898145589305: Bitte geben Sie ein gültiges Ausstellungsdatum ein `,Os=$localize`:␟7d7e496cb3d5f3b19f62660c69a319591878ed01␟2655596240741158969: Bitte geben Sie eine Bezeichnung ein `,js=$localize`:␟10ad4c12210a17f339a8a85573bcc512fceffa98␟6225979954336446049: Bitte geben Sie einen gültigen Vertragsbeginn ein `,ys=$localize`:␟d1eb5fb75382e1f770eeb9d4969921c661c91139␟3555187740849811543: Bitte geben Sie ein gültiges Vertragsende ein `,Ss=$localize`:␟a355cd510e2e1f52a574ad79f8aeb832cec9e55a␟7910011726093772291: Das Vertragsende darf nicht vor dem Vertragsbeginn liegen `,Ts=$localize`:␟2452d270905d288d25520575db0b88af5131b709␟911810319903928441: Bitte geben Sie einen gültigen numerischen Wert ein `,ws=$localize`:␟b40d1f1a309d8a040e3514a681783fb120e88e53␟8898719228719929491: Bitte geben Sie eine Währung ein `,Ds=$localize`:␟037cc976466359dc5e10f7849d8b7314c61ffe8f␟5313014536057916467: Bitte wählen Sie eine Abrechnunsgmethode aus `,Is=$localize`:␟ab1fff8514dbe06165dd3ca4f4d01e4d47f24d3e␟6967719713285787883: Bitte wählen Sie eine Zahlungsmethode aus `,$s=$localize`:␟33c83af7e48083f55e3ecd0721545ae48a7ddb9a␟4997253278566827559: Bitte geben Sie gültige Zahlungsbedingungen ein `,xs=$localize`:␟81432a81495a51b47d2100bd5cdaccd9034d58f2␟3534620122032348550: Bitte geben Sie eine Skontofrist (Anzahl Tage) ein `,Ps=$localize`:␟c376202c1164bc4df1b794f82fa613bae9a4d3f6␟5723753834608299709: Bitte geben Sie einen Skontoprozentsatz ein `,_s=$localize`:␟b4f53f5c88cc29966bb551f9a45222095c15b488␟174497592247559182: Bitte geben Sie einen gültigen Prozentsatz ein `,ks=$localize`:␟16901d4b876c507dbc2ca906d876c99ae87c2d50␟722570522301977045: Bitte geben Sie eine Zahlungsfrist (Anzahl Tage) ein `,Ms=$localize`:␟05ba229584be0c2e440d5f0c25f8ea170dbfd23f␟859604042561581065: Bitte geben Sie mindestens eine Position ein. `;const Ks=["label",$localize`:Dokumente label␟a6bb7641bde88e6d98545723fd6f563960c6ade0␟8986273476063523240:Dokumente`];function Ws(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Ks),l.Tb(2,"section",39),l.Tb(3,"div"),l.Ob(4,"jo-document-link-list",40),l.Sb(),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(4),l.nc("object",e.object)}}const el=["label",$localize`:Offene Rechnungen label␟9140e68397cae48dfcde5153ad2dbeb94879c32a␟2229036289439083594:Offene Rechnungen`];function tl(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,el),l.Ob(2,"jo-invoice-list",41),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.openInvoices)}}const nl=["label",$localize`:Rechnungen label␟0e6b823d70c740ac5decd370657dc22e613861dc␟2475884408878226227:Rechnungen`];function cl(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,nl),l.Ob(2,"jo-invoice-list",41),l.Sb()),2&e){const e=l.hc();l.Cb(2),l.nc("objects",e.allInvoices)}}var al,il,ol,rl,sl,ll,bl;function dl(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,al),l.Sb())}function ul(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,il),l.Sb())}function ml(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",50),l.dc("click",(function(t){return l.tc(e),l.hc(3).onDelete(t)})),l.Tb(1,"span"),l.Xb(2,sl),l.Sb(),l.Sb()}}function fl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",51),l.dc("click",(function(){l.tc(e);const t=l.hc(3);return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,ll),l.Sb(),l.Sb()}if(2&e){const e=l.hc(3);l.nc("disabled",!e.form.valid||!e.form.dirty)}}function hl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",52),l.dc("click",(function(){l.tc(e);const t=l.hc(3);return t.onQuickInvoice(t.object)})),l.Tb(1,"span"),l.Xb(2,bl),l.Sb(),l.Sb()}}function gl(e,t){if(1&e){const e=l.Ub();l.Rb(0),l.Bc(1,ml,3,0,"button",45),l.Tb(2,"button",46),l.dc("click",(function(t){return l.tc(e),l.hc(2).onNew(t)})),l.Tb(3,"span"),l.Xb(4,ol),l.Sb(),l.Sb(),l.Tb(5,"button",47),l.dc("click",(function(t){return l.tc(e),l.hc(2).onCopy(t)})),l.Tb(6,"span"),l.Xb(7,rl),l.Sb(),l.Sb(),l.Bc(8,fl,3,1,"button",48),l.Bc(9,hl,3,0,"button",49),l.Qb()}if(2&e){const e=l.hc(2);l.Cb(1),l.nc("ngIf",e.isChangeable||!e.form.controls.id.value),l.Cb(1),l.nc("disabled",!e.form.valid||e.form.dirty),l.Cb(3),l.nc("disabled",!e.form.valid||e.form.dirty||!e.object.header.id),l.Cb(3),l.nc("ngIf",e.isChangeable),l.Cb(1),l.nc("ngIf",e.object.term.isInvoiceable&&e.form.valid&&!e.form.dirty)}}al=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,il=$localize`:␟c47252d6cffe14a672e7ef04b2cc30e761f240ae␟8930526198656004715:Zurück`,ol=$localize`:␟88979a32990e673589e593742a64bf65cc78a3d1␟5659799815836451311:Neu`,rl=$localize`:␟feabfc384269a35e1f051ef9302a4b5624f3a69a␟6421015407864399648:Kopieren`,sl=$localize`:␟a813fd43c9a1b211fe541045d263d2c500c80f0f␟4580399730639224598:Löschen`,ll=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`,bl=$localize`:␟76c3eb966f0ba66dc3ecfa23720521ec47b2f754␟918038637540163317:Neue Rechnung`;const pl=function(){return["sales-user"]};function vl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",42),l.Tb(1,"button",43),l.dc("click",(function(t){return l.tc(e),l.hc().onCancel(t)})),l.Bc(2,dl,2,0,"span",7),l.Bc(3,ul,2,0,"span",7),l.Sb(),l.Bc(4,gl,10,5,"ng-container",44),l.Sb()}if(2&e){const e=l.hc();l.Cb(2),l.nc("ngIf",e.form.dirty),l.Cb(1),l.nc("ngIf",!e.form.dirty),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(3,pl))}}const Cl=function(){return["billingMethod","paymentMethod","paymentTerms","cashDiscountPercentage","cashDiscountDays","dueDays"]},Ol=function(){return["items"]};let jl=(()=>{class e extends sa{constructor(e,t,n,c){super(e,t,n,c),this.fb=e,this.store=t,this.router=n,this.utility=c,this.quickInvoice=new l.o}getFormTitle(){return this.object.header.id?`${this.object.header.id} - ${this.object.header.description}`:"[neu]"}onQuickInvoice(e){this.quickInvoice.emit(e)}buildForm(){return this.fb.group({id:[{value:"",disabled:!0}],issuedAt:["",[ta.w.required]],description:["",[ta.w.required]],customerId:["",[ta.w.required,ta.w.pattern(na.b)]],startDate:["",[ta.w.required]],endDate:["",[ta.w.required]],currency:["",[ta.w.required]],budget:["",[ta.w.pattern(na.a)]],billingMethod:["",[ta.w.required]],paymentTerms:["",[ta.w.required]],paymentMethod:["",[ta.w.required]],cashDiscountDays:["",[ta.w.pattern(na.b)]],cashDiscountPercentage:["",[ta.w.pattern(na.a)]],dueDays:["",[ta.w.required,ta.w.pattern(na.b)]],documentUrl:["",[ta.w.pattern(na.e)]],texts:this.fb.group({invoiceText:[""],internalText:[""]}),items:new ta.d([],[ur])},[{validator:dr}])}changeObject(e){const{items:t}=e,n=Zr(e,["items","texts"]),c=t.map(e=>Object.assign({},e,{pricePerUnit:this.utility.fromLocalAmount(e.pricePerUnit)})),a={issuedAt:ce.DateUtility.getDateFromMoment(e.issuedAt),term:{startDate:ce.DateUtility.getStartDateFromMoment(e.startDate),endDate:ce.DateUtility.getEndDateFromMoment(e.endDate)},budget:this.utility.fromLocalAmount(e.budget),cashDiscountPercentage:this.utility.fromLocalPercent(e.cashDiscountPercentage),internalText:e.texts.internalText,invoiceText:e.texts.invoiceText},i=Object.assign({},Object.assign({},this.object.data),Object.assign({},n),Object.assign({},a),{items:c}),o=ce.ContractFactory.fromData(i);return this.changed.emit(o),o}listenToChanges(){this.listenToFieldChanges("customerId",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("description",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("issuedAt",this.onSimpleHeaderDateChanged),this.listenToFieldChanges("startDate",this.onSimpleHeaderDateChanged),this.listenToFieldChanges("endDate",this.onSimpleHeaderDateChanged),this.listenToFieldChanges("budget",this.onSimpleHeaderAmountChanged),this.listenToFieldChanges("currency",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("billingMethod",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("paymentMethod",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("paymentTerms",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("cashDiscountPercentage",this.onSimpleHeaderPercentageChanged),this.listenToFieldChanges("cashDiscountDays",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("dueDays",this.onSimpleHeaderNumberChanged)}patchForm(){const e={issuedAt:this.object.header.issuedAt,startDate:this.object.term.startDate,endDate:this.object.term.endDate,cashDiscountPercentage:this.utility.toLocalPercent(this.object.header.cashDiscountPercentage),budget:this.utility.toLocalAmount(this.object.header.budget)},t=this.object.header,{invoiceText:n,internalText:c}=t,a=Zr(t,["invoiceText","internalText"]),i={invoiceText:n,internalText:c},o=Object.assign({},Object.assign({},a),e,{texts:i});this.form.patchValue(o)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(ta.f),l.Nb(a.h),l.Nb(s.g),l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-form"]],inputs:{contractPartner:"contractPartner",isChangeable:"isChangeable",receivers:"receivers",openInvoices:"openInvoices",allInvoices:"allInvoices",task:"task"},outputs:{quickInvoice:"quickInvoice"},features:[l.zb],decls:102,vars:42,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","contract-form",3,"formGroup"],[3,"selectedTabChange"],[6,"label"],["id","main-group"],[1,"width--lg"],["id","customerId","formControlName","customerId",6,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"width--md"],["matInput","","formControlName","issuedAt",3,"matDatepicker",6,"placeholder"],["matSuffix","",3,"for"],["issuedAtPicker",""],["matInput","","id","description","formControlName","description",6,"placeholder"],["id","validity-group"],["matInput","","id","startDate","formControlName","startDate",3,"matDatepicker",6,"placeholder"],["startDatePicker",""],["matInput","","id","endDate","formControlName","endDate",3,"matDatepicker",6,"placeholder"],["endDatePicker",""],["matInput","","type","text","id","budget","formControlName","budget",6,"placeholder"],[1,"width--sm"],["matInput","","id","currency","formControlName","currency",6,"placeholder"],["id","pnl_paymentTerms"],["color","warn",4,"ngIf"],["id","payment-group"],["id","billingMethod","formControlName","billingMethod",6,"placeholder"],[3,"value"],["id","paymentMethod","formControlName","paymentMethod",6,"placeholder"],["id","discount-group"],["matInput","","id","paymentTerms","formControlName","paymentTerms",6,"placeholder"],["matInput","","type","number","id","cashDiscountDays","formControlName","cashDiscountDays",6,"placeholder"],["matInput","","id","cashDiscountPercentage","formControlName","cashDiscountPercentage",6,"placeholder"],["matInput","","type","number","id","dueDays","formControlName","dueDays",6,"placeholder"],["expanded","true"],[1,""],["formArrayName","items",3,"itemsFormArray","object","isChangeable"],[3,"textsFormGroup","object","isChangeable"],[4,"ngIf",6,"label"],["class","jo-btn-row",4,"ngIf"],["color","warn"],[1,"tables","u-mt-lg"],[3,"object"],[3,"objects"],[1,"jo-btn-row"],["id","btn_cancel","type","button","mat-raised-button","",3,"click"],[4,"joIfAuthorizedAs"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","btn_new","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_copy","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["id","btn_newinvoice","type","button","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click"],["id","btn_newinvoice","type","button","mat-raised-button","","color","accent",3,"click"]],template:function(e,t){if(1&e&&(l.Tb(0,"form",0),l.Tb(1,"mat-tab-group",1),l.dc("selectedTabChange",(function(e){return t.onTabChange(e)})),l.Tb(2,"mat-tab",2),l.Yb(3,Qr),l.Tb(4,"div",3),l.Tb(5,"mat-form-field",4),l.Tb(6,"mat-select",5),l.Yb(7,Jr),l.Bc(8,ps,2,2,"mat-option",6),l.Sb(),l.Bc(9,zs,2,0,"mat-error",7),l.Sb(),l.Tb(10,"mat-form-field",8),l.Tb(11,"input",9),l.Yb(12,Kr),l.Sb(),l.Ob(13,"mat-datepicker-toggle",10),l.Ob(14,"mat-datepicker",null,11),l.Bc(16,As,2,0,"mat-error",7),l.Sb(),l.Tb(17,"mat-form-field",4),l.Tb(18,"input",12),l.Yb(19,Wr),l.Sb(),l.Bc(20,Bs,2,0,"mat-error",7),l.Sb(),l.Sb(),l.Tb(21,"div",13),l.Tb(22,"mat-form-field",8),l.Tb(23,"input",14),l.Yb(24,es),l.Sb(),l.Ob(25,"mat-datepicker-toggle",10),l.Ob(26,"mat-datepicker",null,15),l.Bc(28,Rs,2,0,"mat-error",7),l.Sb(),l.Tb(29,"mat-form-field",8),l.Tb(30,"input",16),l.Yb(31,ts),l.Sb(),l.Ob(32,"mat-datepicker-toggle",10),l.Ob(33,"mat-datepicker",null,17),l.Bc(35,Es,2,0,"mat-error",7),l.Bc(36,Ns,2,0,"mat-error",7),l.Sb(),l.Tb(37,"mat-form-field",8),l.Tb(38,"input",18),l.Yb(39,ns),l.Sb(),l.Bc(40,Fs,2,0,"mat-error",7),l.Sb(),l.Tb(41,"mat-form-field",19),l.Tb(42,"input",20),l.Yb(43,cs),l.Sb(),l.Bc(44,Ls,2,0,"mat-error",7),l.Sb(),l.Sb(),l.Tb(45,"mat-expansion-panel",21),l.Tb(46,"mat-expansion-panel-header"),l.Tb(47,"mat-panel-title"),l.Xb(48,as),l.Sb(),l.Tb(49,"mat-panel-description"),l.Bc(50,Xs,2,0,"mat-icon",22),l.Sb(),l.Sb(),l.Tb(51,"div",23),l.Tb(52,"mat-form-field"),l.Tb(53,"mat-select",24),l.Yb(54,is),l.Tb(55,"mat-option",25),l.Xb(56,os),l.Sb(),l.Tb(57,"mat-option",25),l.Xb(58,rs),l.Sb(),l.Sb(),l.Bc(59,qs,2,0,"mat-error",7),l.Sb(),l.Tb(60,"mat-form-field"),l.Tb(61,"mat-select",26),l.Yb(62,ss),l.Tb(63,"mat-option",25),l.Xb(64,ls),l.Sb(),l.Tb(65,"mat-option",25),l.Xb(66,bs),l.Sb(),l.Sb(),l.Bc(67,Hs,2,0,"mat-error",7),l.Sb(),l.Sb(),l.Tb(68,"div",27),l.Tb(69,"mat-form-field",4),l.Tb(70,"input",28),l.Yb(71,ds),l.Sb(),l.Bc(72,Us,2,0,"mat-error",7),l.Sb(),l.Tb(73,"mat-form-field",8),l.Tb(74,"input",29),l.Yb(75,us),l.Sb(),l.Bc(76,Vs,2,0,"mat-error",7),l.Sb(),l.Tb(77,"mat-form-field",19),l.Tb(78,"input",30),l.Yb(79,ms),l.Sb(),l.Bc(80,Gs,2,0,"mat-error",7),l.Bc(81,Ys,2,0,"mat-error",7),l.Sb(),l.Tb(82,"mat-form-field",8),l.Tb(83,"input",31),l.Yb(84,fs),l.Sb(),l.Bc(85,Zs,2,0,"mat-error",7),l.Sb(),l.Sb(),l.Sb(),l.Tb(86,"mat-expansion-panel",32),l.Tb(87,"mat-expansion-panel-header"),l.Tb(88,"mat-panel-title"),l.Xb(89,hs),l.Sb(),l.Tb(90,"mat-panel-description"),l.Bc(91,Qs,2,0,"mat-icon",22),l.Sb(),l.Sb(),l.Tb(92,"div",33),l.Ob(93,"jo-contract-items-form",34),l.Bc(94,Js,2,0,"mat-error",7),l.Sb(),l.Sb(),l.Sb(),l.Tb(95,"mat-tab",2),l.Yb(96,gs),l.Ob(97,"jo-texts-form-component",35),l.Sb(),l.Bc(98,Ws,5,1,"mat-tab",36),l.Bc(99,tl,3,1,"mat-tab",36),l.Bc(100,cl,3,1,"mat-tab",36),l.Sb(),l.Bc(101,vl,5,4,"div",37),l.Sb()),2&e){const e=l.sc(15),n=l.sc(27),c=l.sc(34);l.nc("formGroup",t.form),l.Cb(8),l.nc("ngForOf",t.receivers),l.Cb(1),l.nc("ngIf",t.form.get("customerId").hasError("required")),l.Cb(2),l.nc("matDatepicker",e),l.Cb(2),l.nc("for",e),l.Cb(3),l.nc("ngIf",t.form.get("issuedAt").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("description").hasError("required")),l.Cb(3),l.nc("matDatepicker",n),l.Cb(2),l.nc("for",n),l.Cb(3),l.nc("ngIf",t.form.get("startDate").hasError("required")),l.Cb(2),l.nc("matDatepicker",c),l.Cb(2),l.nc("for",c),l.Cb(3),l.nc("ngIf",t.form.get("endDate").hasError("required")),l.Cb(1),l.nc("ngIf",t.form.get("endDate").hasError("dateSequence")),l.Cb(4),l.nc("ngIf",t.form.get("budget").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("currency").hasError("required")),l.Cb(6),l.nc("ngIf",t.hasError(l.oc(40,Cl))),l.Cb(5),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("ngIf",t.form.get("billingMethod").hasError("required")),l.Cb(4),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("ngIf",t.form.get("paymentMethod").hasError("required")),l.Cb(5),l.nc("ngIf",t.form.get("paymentTerms").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("cashDiscountDays").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("cashDiscountPercentage").hasError("required")),l.Cb(1),l.nc("ngIf",t.form.get("cashDiscountPercentage").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("dueDays").hasError("required")),l.Cb(6),l.nc("ngIf",t.hasError(l.oc(41,Ol))),l.Cb(2),l.nc("itemsFormArray",t.form.get("items"))("object",t.object)("isChangeable",t.isChangeable),l.Cb(1),l.nc("ngIf",t.form.get("items").hasError("minItems")),l.Cb(3),l.nc("textsFormGroup",t.form.get("texts"))("object",t.object)("isChangeable",t.isChangeable),l.Cb(1),l.nc("ngIf",t.object.header.id),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.openInvoices?null:t.openInvoices.length)>0),l.Cb(1),l.nc("ngIf","edit"===t.task&&(null==t.allInvoices?null:t.allInvoices.length)>0),l.Cb(1),l.nc("ngIf",t.tabIndex<2)}},directives:[ta.x,ta.q,ta.j,da.b,da.a,ma.c,ga.a,ta.p,ta.h,Nn.l,Nn.m,fa.b,ta.c,mr.b,mr.d,ma.h,mr.a,ha.b,ha.d,ha.e,ha.c,va.l,ta.t,Ur,ta.e,Yr,ma.b,pa.a,ei,Qi,Fn.b,En.a],styles:["#contract-form[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width:959px){#contract-form[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]{height:4.8rem;font-size:1.4rem}#contract-form[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%], #contract-form[_ngcontent-%COMP%]   .mat-tab-label-content[_ngcontent-%COMP%]{font-size:1.4rem}#contract-form[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], #contract-form[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}#contract-form[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:6.4rem!important}}#discount-group[_ngcontent-%COMP%], #main-group[_ngcontent-%COMP%], #payment-group[_ngcontent-%COMP%], #validity-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}#discount-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #main-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #payment-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #validity-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child){margin-right:2.4rem}@media only screen and (max-width:959px){#discount-group[_ngcontent-%COMP%], #main-group[_ngcontent-%COMP%], #payment-group[_ngcontent-%COMP%], #validity-group[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:1.2rem;font-size:1.6rem}}#main-group[_ngcontent-%COMP%]{margin-top:2.4rem}#main-group[_ngcontent-%COMP%], #validity-group[_ngcontent-%COMP%]{padding:0 2.4rem}div.mat-tab-body-content[_ngcontent-%COMP%]{height:100%;overflow:hidden}width-full[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})();var yl;function Sl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-card",1),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Tb(3,"span",2),l.Xb(4,yl),l.Sb(),l.Tb(5,"span"),l.Cc(6),l.Sb(),l.Sb(),l.Sb(),l.Tb(7,"mat-card-content"),l.Tb(8,"section"),l.Tb(9,"jo-contract-form",3,4),l.dc("copy",(function(t){return l.tc(e),l.hc().onCopy(t)}))("new",(function(){return l.tc(e),l.hc().onNew()}))("create",(function(t){return l.tc(e),l.hc().onCreate(t)}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)}))("update",(function(t){return l.tc(e),l.hc().onUpdate(t)}))("quickInvoice",(function(t){return l.tc(e),l.hc().onQuickInvoice(t)})),l.ic(11,"async"),l.ic(12,"async"),l.ic(13,"async"),l.ic(14,"async"),l.ic(15,"async"),l.ic(16,"async"),l.Sb(),l.Sb(),l.Sb(),l.Sb()}if(2&e){const e=t.ngIf,n=l.hc();l.Cb(6),l.Dc(n.getTitle(e)),l.Cb(3),l.nc("object",e)("contractPartner",l.jc(11,8,n.contractPartner$))("receivers",l.jc(12,10,n.receivers$))("openInvoices",l.jc(13,12,n.openInvoices$))("allInvoices",l.jc(14,14,n.allInvoices$))("isChangeable",l.jc(15,16,n.isChangeable$))("task",l.jc(16,18,n.task$))}}yl=$localize`:␟59c84ec590da70dcc0595d71779a98bda2a7b8a4␟8591713515042959235:Vertrag `;let Tl=(()=>{class e extends ea{constructor(e,t){super(e,t),this.service=e,this.route=t}onQuickInvoice(e){this.service.createQuickInvoice(e)}getTitle(e){return e.header.id?`${e.header.id} - ${e.header.description}`:"[neu]"}initializeWithData(e){this.receivers$=this.service.getReceivers(),this.contractPartner$=this.service.getPartner(),"copy"===e||"new"===e?(this.task$.next(e),this.contract$=this.service.getCurrent(),this.isChangeable$=Object(te.of)(!0)):(this.task$.next("edit"),this.contract$=this.service.getCurrent(),this.openInvoices$=this.service.getOpenInvoices(),this.allInvoices$=this.service.getInvoices(),this.isChangeable$=this.service.isDeletable())}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Mn),l.Nb(s.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-contract-details"]],features:[l.zb],decls:2,vars:3,consts:[["class","jo-details mat-elevation-z0",4,"ngIf"],[1,"jo-details","mat-elevation-z0"],["fxHide.lt-md",""],[3,"object","contractPartner","receivers","openInvoices","allInvoices","isChangeable","task","copy","new","create","delete","update","quickInvoice"],["detailsForm",""]],template:function(e,t){1&e&&(l.Bc(0,Sl,17,20,"mat-card",0),l.ic(1,"async")),2&e&&l.nc("ngIf",l.jc(1,1,t.contract$))},directives:[Nn.m,Xn.a,Xn.e,Xn.h,Hn.b,Xn.d,jl],pipes:[Nn.b],styles:[".jo-details-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;text-transform:uppercase}@media only screen and (max-width:959px){.jo-details[_ngcontent-%COMP%]{padding:1rem 2rem;margin:.75rem}.jo-details[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:2rem;line-height:2rem}}"],changeDetection:0}),e})();var wl,Dl,Il,$l,xl,Pl,_l,kl,Ml,zl,Al,Bl,Rl,El;function Nl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",21),l.Tb(1,"button",22),l.dc("click",(function(){l.tc(e);const t=l.hc(2);return t.onDelete(t.itemGroup.get("id").value)})),l.Tb(2,"mat-icon",23),l.Cc(3,"remove"),l.Sb(),l.Sb(),l.Sb()}}function Fl(e,t){if(1&e&&(l.Rb(0),l.Bc(1,Nl,4,0,"div",20),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}function Ll(e,t){if(1&e&&(l.Tb(0,"mat-option",24),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e.id),l.Cb(1),l.Ec(" ",e.id," ")}}function Xl(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,kl),l.Sb())}function ql(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Ml),l.Sb())}function Hl(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,zl),l.Sb())}function Ul(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Al),l.Sb())}function Vl(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Bl),l.Sb())}function Gl(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Rl),l.Sb())}function Yl(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,El),l.Sb())}function Zl(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",26),l.Tb(1,"button",22),l.dc("click",(function(){l.tc(e);const t=l.hc(2);return t.onDelete(t.itemGroup.get("id").value)})),l.Tb(2,"mat-icon",23),l.Cc(3,"remove"),l.Sb(),l.Sb(),l.Sb()}}function Ql(e,t){if(1&e&&(l.Rb(0),l.Bc(1,Zl,4,0,"div",25),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}wl=$localize`:␟cc16eb32b567abccbd4706b74034e351a2a4227b␟6535899358117021728:Vertragsposition`,Dl=$localize`:␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`,Il=$localize`:␟77134c293828bbe6d663d26f75252663f46c7ca4␟6137964906830522076:Menge`,$l=$localize`:␟107b9ff6838c0b8f0a4659e655911ab3bcb2d90e␟56228327617948862:Einheit`,xl=$localize`:␟09372c93bb361968dc85f8453fcf9696e8127170␟1750464341811945394:Einzelpreis`,Pl=$localize`:␟1e50ae39eaecdb9f46d9c14b78f7e33e4bcda859␟4617732463449978836:Gesamtpreis`,_l=$localize`:␟5b0300a79f5e96408ce29a73a2d996729a6a82d4␟1894072764523923289:Skonto erlaubt?`,kl=$localize`:␟8d4dc061b1ef6e09f36b0e30e4734b8a61f518fe␟5451937419600444184: Bitte wählen Sie eine gültige Vertragsposition aus `,Ml=$localize`:␟88b3ac9a827098b6d328047f771e97fd46b1af06␟7393855088038119274: Bitte geben Sie eine Beschreibung ein `,zl=$localize`:␟37210fac72b83d62b80af1fb81ea91f672b22537␟3434241033973129805: Bitte geben Sie eine Menge ein `,Al=$localize`:␟f2944b3a612a6f29988ef3b4d07c47717acceb17␟7761992969123304470: Bitte geben Sie eine gültige Menge `,Bl=$localize`:␟cf67ccdb5e2c3f33edfaaf494d6abfc4a0aa3a00␟4973934549587365354: Bitte geben Sie eine Mengeneinheit ein `,Rl=$localize`:␟4bb72df894b3cf3e6425b94eb066d249b348a17e␟4773951379498831175: Bitte geben Sie einen Einzelpreis ein `,El=$localize`:␟7ea430fd3f2354501da86b2d5a83834133db0888␟3210324540898431438: Bitte geben Sie einen gültigen Einzelpreis `;const Jl=function(){return["sales-user"]};let Kl=(()=>{class e extends hr{constructor(e){super(e),this.utility=e}buildItem(){this.itemGroup.addControl("id",new ta.g("")),this.itemGroup.addControl("contractItemId",new ta.g("",ta.w.required)),this.itemGroup.addControl("description",new ta.g("",ta.w.required)),this.itemGroup.addControl("quantity",new ta.g("",[ta.w.required,ta.w.pattern(na.a)])),this.itemGroup.addControl("quantityUnit",new ta.g("",ta.w.required)),this.itemGroup.addControl("pricePerUnit",new ta.g("",[ta.w.required,ta.w.pattern(na.a)])),this.itemGroup.addControl("netValue",new ta.g({value:"",disabled:!0})),this.itemGroup.addControl("cashDiscountAllowed",new ta.g("")),this.isItemGroupBuilt=!0}isImmediateChangeNeeded(e){return"contractItemId"===e||"quantity"===e||"pricePerUnit"===e||"cashDiscountAllowed"===e}patchItem(){const e={quantity:this.utility.toLocalAmount(this.item.quantity),pricePerUnit:this.utility.toLocalAmount(this.item.pricePerUnit),netValue:this.utility.toLocalAmount(this.item.netValue)},t=Object.assign({},Object.assign({},this.item.data),e);this.itemGroup.patchValue(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-item-form"]],inputs:{contract:"contract",isChangeable:"isChangeable",mode:"mode"},features:[l.zb],decls:48,vars:20,consts:[[3,"formGroup"],["fxHide","","fxShow.lt-md",""],["fxHide","","fxShow.lt-md","",1,"jo-btn-row-sm"],[1,"invoice-item-id","width--xs"],[4,"joIfAuthorizedAs"],["fxShow","","fxHide.lt-md","",1,"invoice-item-id","width--xs"],[1,"width--xs"],["formControlName","contractItemId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"width--lg"],["matInput","","formControlName","description"],["matInput","","formControlName","quantity"],[1,"width--sm"],["matInput","","formControlName","quantityUnit"],[1,"width--sm2"],["matInput","","formControlName","pricePerUnit"],["matInput","","readonly","",3,"value"],[1,"invoice-item-cashDiscountAllowed","width--xs"],["color","primary","formControlName","cashDiscountAllowed",3,"value"],["class","invoice-item-action",4,"ngIf"],[1,"invoice-item-action"],["mat-mini-fab","","color","warn",3,"click"],["aria-label","Position l\xf6schen"],[3,"value"],["fxShow","","fxHide.lt-md","","class","invoice-item-action",4,"ngIf"],["fxShow","","fxHide.lt-md","",1,"invoice-item-action"]],template:function(e,t){1&e&&(l.Rb(0,0),l.Ob(1,"mat-divider",1),l.Tb(2,"div",2),l.Tb(3,"div",3),l.Tb(4,"div"),l.Cc(5),l.Sb(),l.Sb(),l.Bc(6,Fl,2,1,"ng-container",4),l.Sb(),l.Tb(7,"div",5),l.Tb(8,"div"),l.Cc(9),l.Sb(),l.Sb(),l.Tb(10,"mat-form-field",6),l.Tb(11,"mat-label",1),l.Xb(12,wl),l.Sb(),l.Tb(13,"mat-select",7),l.Bc(14,Ll,2,2,"mat-option",8),l.Sb(),l.Bc(15,Xl,2,0,"mat-error",9),l.Sb(),l.Tb(16,"mat-form-field",10),l.Tb(17,"mat-label",1),l.Xb(18,Dl),l.Sb(),l.Ob(19,"input",11),l.Bc(20,ql,2,0,"mat-error",9),l.Sb(),l.Tb(21,"mat-form-field",6),l.Tb(22,"mat-label",1),l.Xb(23,Il),l.Sb(),l.Ob(24,"input",12),l.Bc(25,Hl,2,0,"mat-error",9),l.Bc(26,Ul,2,0,"mat-error",9),l.Sb(),l.Tb(27,"mat-form-field",13),l.Tb(28,"mat-label",1),l.Xb(29,$l),l.Sb(),l.Ob(30,"input",14),l.Bc(31,Vl,2,0,"mat-error",9),l.Sb(),l.Tb(32,"mat-form-field",15),l.Tb(33,"mat-label",1),l.Xb(34,xl),l.Sb(),l.Ob(35,"input",16),l.Bc(36,Gl,2,0,"mat-error",9),l.Bc(37,Yl,2,0,"mat-error",9),l.Sb(),l.Tb(38,"mat-form-field",15),l.Tb(39,"mat-label",1),l.Xb(40,Pl),l.Sb(),l.Ob(41,"input",17),l.ic(42,"number"),l.Sb(),l.Tb(43,"div",18),l.Tb(44,"mat-checkbox",19),l.Tb(45,"span",1),l.Xb(46,_l),l.Sb(),l.Sb(),l.Sb(),l.Bc(47,Ql,2,1,"ng-container",4),l.Qb()),2&e&&(l.nc("formGroup",t.itemGroup),l.Cb(5),l.Dc(t.itemGroup.get("id").value),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(18,Jl)),l.Cb(3),l.Dc(t.itemGroup.get("id").value),l.Cb(5),l.nc("ngForOf",t.contract.items),l.Cb(1),l.nc("ngIf",t.itemGroup.get("contractItemId").hasError("required")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("description").hasError("required")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("quantity").hasError("required")),l.Cb(1),l.nc("ngIf",t.itemGroup.get("quantity").hasError("pattern")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("quantityUnit").hasError("required")),l.Cb(5),l.nc("ngIf",t.itemGroup.get("pricePerUnit").hasError("required")),l.Cb(1),l.nc("ngIf",t.itemGroup.get("pricePerUnit").hasError("pattern")),l.Cb(4),l.nc("value",l.kc(42,15,t.item.netValue,"1.2-2")),l.Cb(3),l.nc("value",t.item.cashDiscountAllowed),l.Cb(3),l.nc("joIfAuthorizedAs",l.oc(19,Jl)))},directives:[ta.q,ta.j,Za.a,Hn.b,En.a,ma.c,ma.g,ga.a,ta.p,ta.h,Nn.l,Nn.m,fa.b,ta.c,ya.a,Fn.b,pa.a,va.l,ma.b],pipes:[Nn.f],styles:["@media only screen and (max-width:959px){[_nghost-%COMP%]{font-size:1.6rem}}.width--xs[_ngcontent-%COMP%]{width:4rem}.width--sm[_ngcontent-%COMP%]{width:6rem}.width--sm2[_ngcontent-%COMP%]{width:8rem}.width--md[_ngcontent-%COMP%]{width:10rem}.width--lg[_ngcontent-%COMP%]{width:28rem}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{width:36rem}}@media only screen and (min-width:1600px){.width--lg[_ngcontent-%COMP%]{width:36rem}}@media only screen and (min-width:1280px){.width--lg[_ngcontent-%COMP%]{width:32rem}}.width--xl[_ngcontent-%COMP%]{width:36rem}div.invoice-item-id[_ngcontent-%COMP%]{align-self:flex-start}div.invoice-item-id[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:600;height:4rem;width:4rem;border-radius:100%;background-color:#777}div.invoice-item-contractItemId[_ngcontent-%COMP%]{align-self:center}div.invoice-item-description[_ngcontent-%COMP%], div.invoice-item-quantity[_ngcontent-%COMP%], div.invoice-item-quantityUnit[_ngcontent-%COMP%]{align-self:center;overflow:hidden}div.invoice-item-pricePerUnit[_ngcontent-%COMP%]{align-self:center}div.invoice-item-netValue[_ngcontent-%COMP%]{align-self:center;text-align:right}div.invoice-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:center;justify-self:center}@media only screen and (max-width:599px){div.invoice-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:flex-start;justify-self:flex-start}}@media only screen and (max-width:959px){div.invoice-item-cashDiscountAllowed[_ngcontent-%COMP%]{align-self:flex-start;justify-self:flex-start}}div.invoice-item-action[_ngcontent-%COMP%]{align-self:center}.jo-btn-row-sm[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin:2rem 0 1rem}"],changeDetection:0}),e})();var Wl,eb,tb,nb,cb,ab,ib,ob;function rb(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",14),l.dc("click",(function(){return l.tc(e),l.hc(2).onAdd()})),l.Tb(1,"mat-icon",15),l.Cc(2,"add"),l.Sb(),l.Sb()}}function sb(e,t){if(1&e&&(l.Rb(0),l.Bc(1,rb,3,0,"button",13),l.Qb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}function lb(e,t){if(1&e){const e=l.Ub();l.Tb(0,"jo-invoice-item-form",16),l.dc("changed",(function(){return l.tc(e),l.hc().onChanged()}))("delete",(function(t){return l.tc(e),l.hc().onDelete(t)})),l.Sb()}if(2&e){const e=t.$implicit,n=t.index,c=l.hc();l.nc("itemGroup",e)("item",c.object.items[n])("contract",c.contract)("isChangeable",c.isChangeable)}}function bb(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",19),l.dc("click",(function(t){return l.tc(e),l.hc(2).onAdd(t)})),l.Xb(1,ob),l.Sb()}}function db(e,t){if(1&e&&(l.Tb(0,"div",17),l.Bc(1,bb,2,0,"button",18),l.Sb()),2&e){const e=l.hc();l.Cb(1),l.nc("ngIf",e.isChangeable)}}Wl=$localize`:␟a34143dc6d8269cd960824a3922cdf658a0df1a7␟1227005203155874633:Vertrags- position`,eb=$localize`:␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`,tb=$localize`:␟77134c293828bbe6d663d26f75252663f46c7ca4␟6137964906830522076:Menge`,nb=$localize`:␟107b9ff6838c0b8f0a4659e655911ab3bcb2d90e␟56228327617948862:Einheit`,cb=$localize`:␟7f18d9e7e949f788d606ea4314689a9f2f7ee9c5␟3277192243903869757:Preis`,ab=$localize`:␟f367c2b1df4204a29bb4038483308defb5dc25a3␟1933013871016789910:Gesamt`,ib=$localize`:␟5b0300a79f5e96408ce29a73a2d996729a6a82d4␟1894072764523923289:Skonto erlaubt?`,ob=$localize`:␟036f93b1bd29e3c2f0819d096c2a2605e5935e44␟6232800382799517035: Position hinzufügen `;const ub=function(){return["sales-user"]};let mb=(()=>{class e extends fr{constructor(e){super(e),this.service=e}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(_n))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-items-form"]],inputs:{contract:"contract"},features:[l.zb],decls:22,vars:5,consts:[["fxShow","","fxHide.lt-md","",1,"table-header"],[1,"table-btn"],[4,"joIfAuthorizedAs"],[1,"invoice-item-contractItemId"],[1,"invoice-item-description"],[1,"invoice-item-quantity"],[1,"invoice-item-quantityUnit"],[1,"invoice-item-pricePerUnit"],[1,"invoice-item-netValue"],[1,"invoice-item-cashDiscountAllowed"],[1,"invoice-item-action"],["class","table-row table-row--editable",3,"itemGroup","item","contract","isChangeable","changed","delete",4,"ngFor","ngForOf"],["class","u-mt-md","fxHide","","fxShow.lt-md","",4,"joIfAuthorizedAs"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["aria-label","Position hinzuf\xfcgen"],[1,"table-row","table-row--editable",3,"itemGroup","item","contract","isChangeable","changed","delete"],["fxHide","","fxShow.lt-md","",1,"u-mt-md"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(l.Tb(0,"div"),l.Tb(1,"div",0),l.Tb(2,"div",1),l.Bc(3,sb,2,1,"ng-container",2),l.Sb(),l.Tb(4,"label",3),l.Xb(5,Wl),l.Sb(),l.Tb(6,"label",4),l.Xb(7,eb),l.Sb(),l.Tb(8,"label",5),l.Xb(9,tb),l.Sb(),l.Tb(10,"label",6),l.Xb(11,nb),l.Sb(),l.Tb(12,"label",7),l.Xb(13,cb),l.Sb(),l.Tb(14,"label",8),l.Xb(15,ab),l.Sb(),l.Tb(16,"label",9),l.Xb(17,ib),l.Sb(),l.Ob(18,"label",10),l.Sb(),l.Tb(19,"div"),l.Bc(20,lb,1,4,"jo-invoice-item-form",11),l.Sb(),l.Bc(21,db,2,1,"div",12),l.Sb()),2&e&&(l.Cb(3),l.nc("joIfAuthorizedAs",l.oc(3,ub)),l.Cb(17),l.nc("ngForOf",t.itemsFormArray.controls),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(4,ub)))},directives:[Hn.b,En.a,Nn.l,Nn.m,Fn.b,pa.a,Kl],styles:[".table-btn[_ngcontent-%COMP%]{width:4rem;display:flex;justify-content:center;align-items:center;padding:1rem 0}.table-header[_ngcontent-%COMP%] > .table-btn[_ngcontent-%COMP%]{margin-right:1.2rem}label[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8}.invoice-item-contractItemId[_ngcontent-%COMP%], .invoice-item-id[_ngcontent-%COMP%]{width:4rem}.invoice-item-description[_ngcontent-%COMP%]{width:28rem}@media only screen and (min-width:1600px){.invoice-item-description[_ngcontent-%COMP%]{width:36rem}}@media only screen and (min-width:1280px){.invoice-item-description[_ngcontent-%COMP%]{width:32rem}}.invoice-item-quantity[_ngcontent-%COMP%]{width:4rem}.invoice-item-quantityUnit[_ngcontent-%COMP%]{width:6rem}.invoice-item-netValue[_ngcontent-%COMP%], .invoice-item-pricePerUnit[_ngcontent-%COMP%]{width:8rem}.invoice-item-action[_ngcontent-%COMP%], .invoice-item-cashDiscountAllowed[_ngcontent-%COMP%]{width:4rem}"],changeDetection:0}),e})();var fb=function(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(c=Object.getOwnPropertySymbols(e);a<c.length;a++)t.indexOf(c[a])<0&&Object.prototype.propertyIsEnumerable.call(e,c[a])&&(n[c[a]]=e[c[a]])}return n};const hb=["label",$localize`:Details label␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`];var gb,pb,vb;gb=$localize`:␟ed8adbb9dc6217a8f5a3970cf91554d181a18661␟5162351694482160609:In Bearbeitung`,pb=$localize`:␟3c106cb1dfd426a81061b4dc144cffb6a4af95ee␟1795533124023367087:versandt`,vb=$localize`:␟83fe3aa5847917b1f242f36e9d8ff1624165985b␟4060017248895284665:bezahlt`;const Cb=["placeholder",$localize`:Ausstellungsdatum placeholder␟dcf7a87cdaa0b60b86dee709e0a4ee1787e05089␟8405214177669701282:Ausstellungsdatum`],Ob=["placeholder",$localize`:Rechnungsempfänger placeholder␟996e7ab6fb58c2ad265d33ab3d53931d50fef5f2␟3449924265582634866:Rechnungsempfänger`],jb=["placeholder",$localize`:Leistungszeitraum placeholder␟3342a3c0c94305b6b27a42d63f3a3e5d62c72350␟5110226715617494380:Leistungszeitraum`];var yb;yb=$localize`:␟ce8dfe741c69b8b7da8265f4ed0b75a33759c35b␟1544995080170515256: Vertragsinformationen `;const Sb=["placeholder",$localize`:Vertrag placeholder␟8d9d0c95aafb0d02dc9303a7c56c52df91696314␟1102846783936377980:Vertrag`],Tb=["placeholder",$localize`:Abrechnungsmethode placeholder␟94f146aa5b64ff76a340bb87c70de86ff725dc89␟6433128085828975212:Abrechnungsmethode`];var wb,Db;wb=$localize`:␟cc1820bde05602a97b5a798796df954f091586c2␟7915235365181603581:Rechnung`,Db=$localize`:␟0b5dbef59cb7a61b005772768bcfad47d7bdbe0b␟2168111436561686090:Gutschriftverfahren`;const Ib=["placeholder",$localize`:Währung placeholder␟d0ed15535520aa18e6cda2699402d710b2fe2f24␟840276036992230191:Währung`],$b=["placeholder",$localize`:MwSt % placeholder␟42aa635cf416fae4cca140f9b382481bec5d904d␟6883632949570577750:MwSt %`];var xb;xb=$localize`:␟fb2126695d01dc10c35c579ffaa6cf8f6f5ef779␟7780068730337602696: Zahlungsbedingungen `;const Pb=["placeholder",$localize`:Zahlungsbedingungen placeholder␟58a005e0f6f0af9b5e57de55495e15142ae9dcd8␟6798515712238664417:Zahlungsbedingungen`],_b=["placeholder",$localize`:Zahlungsmethode placeholder␟7fd2bd5f2d075316ece7d5f8cd6d9ff158ad6186␟1787120783773742465:Zahlungsmethode`];var kb,Mb;kb=$localize`:␟a92e1e7f291cb9f0edd0d5964e9909798e5331b8␟2453386397609224267:Überweisung`,Mb=$localize`:␟e20d5a24db36cecc8abcb0b7de821a5ce31e693b␟439972911168819515:Bankeinzug`;const zb=["placeholder",$localize`:Skontofrist (Tage) placeholder␟ca63f9bafaae5af42510f630d08abe682e73e3d7␟2141599410247429915:Skontofrist (Tage)`],Ab=["placeholder",$localize`:Skontofrist placeholder␟a5c11eb9480bbc5724d110a961c14c17aa0ddc88␟641944921956802707:Skontofrist`],Bb=["placeholder",$localize`:Skonto % placeholder␟b9e57a536573fa03be1118ef385582b08d1d6b98␟1663220885453607346:Skonto %`],Rb=["placeholder",$localize`:Zahlungsziel (Tage) placeholder␟303bc69903af32d06624c46d7c558bc1482fd55d␟7892494172621830593:Zahlungsziel (Tage)`],Eb=["placeholder",$localize`:Zahlungsziel placeholder␟b14eaff126beab605bf25b55dda15cdaaf609243␟6511323718365817274:Zahlungsziel`];var Nb,Fb;Nb=$localize`:␟2ae0d2f825a259edf00be3b2bdc711132d48ebb6␟2957224140510428886: Positionen `,Fb=$localize`:␟8100aba3ce3415af027180b229de7d9fc69d732f␟8275530816414097157: Summen `;const Lb=["placeholder",$localize`:Nettobetrag placeholder␟440811b80eb2e50e99cfd9ce3488c64effe4ac12␟4255603834735357563:Nettobetrag`],Xb=["placeholder",$localize`:MwSt-Betrag placeholder␟84805a6840ccf47405474330adb672e77fb0833b␟858435599647438726:MwSt-Betrag`],qb=["placeholder",$localize`:Bruttobetrag placeholder␟942585b80fc17703c1d3d4af0b2ad1053f556f2e␟3131712871196625585:Bruttobetrag`],Hb=["placeholder",$localize`:Skontobasis placeholder␟ecf719a53f85ed0621501a869c199996eb58ddd3␟1849435329535756690:Skontobasis`],Ub=["placeholder",$localize`:Skontobetrag placeholder␟6fceced2e8cc37fd84d728f11fe5e424d540e9ba␟5408165412793826820:Skontobetrag`],Vb=["placeholder",$localize`:Zahlungsbetrag placeholder␟4e36a7e889e4ccc15542a4c4e95e077e0faf14ac␟8800748062155248797:Zahlungsbetrag`],Gb=["label",$localize`:Texte label␟47c49089cc33fccaf331c86769333cde3b5ca371␟4500738092135046119:Texte`];var Yb,Zb,Qb,Jb,Kb,Wb,ed,td,nd,cd,ad,id,od,rd;function sd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Yb),l.Sb())}function ld(e,t){if(1&e&&(l.Tb(0,"mat-option",21),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e.header.id),l.Cb(1),l.Ec(" ",e.header.name," ")}}function bd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Zb),l.Sb())}function dd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Qb),l.Sb())}function ud(e,t){1&e&&(l.Tb(0,"mat-icon",41),l.Cc(1," error_outline "),l.Sb())}function md(e,t){if(1&e&&(l.Tb(0,"mat-option",21),l.Cc(1),l.ic(2,"date"),l.ic(3,"date"),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e.header.id),l.Cb(1),l.Fc(" ",e.header.id,": ",l.jc(2,4,e.term.startDate)," - ",l.jc(3,6,e.term.endDate)," ")}}function fd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Jb),l.Sb())}function hd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Kb),l.Sb())}function gd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,Wb),l.Sb())}function pd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ed),l.Sb())}function vd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,td),l.Sb())}function Cd(e,t){1&e&&(l.Tb(0,"mat-icon",41),l.Cc(1," error_outline "),l.Sb())}function Od(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,nd),l.Sb())}function jd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,cd),l.Sb())}function yd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,ad),l.Sb())}function Sd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,id),l.Sb())}function Td(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,od),l.Sb())}function wd(e,t){1&e&&(l.Tb(0,"mat-icon",41),l.Cc(1,"error_outline"),l.Sb())}function Dd(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,rd),l.Sb())}Yb=$localize`:␟e888ce8c83551f0663ee3c5365bc890d9c95a9ab␟6091068183627428459: Bitte geben Sie ein Ausstellungsdatum ein `,Zb=$localize`:␟cd25388d0ca3be792e50256257ada7ef0bee5a8b␟5227236835299961140: Bitte wählen Sie einen Rechnungsempfänger aus `,Qb=$localize`:␟76234d2807759934c1f56cc8fb31691c3f4ef0c4␟4425624233617177476: Bitte geben Sie einen Leistungszeitraum ein `,Jb=$localize`:␟9fb5b01ba5caf5a637d5c4567503941cb8bcd704␟4908785386382355099: Bitte wählen Sie einen Vertrag aus `,Kb=$localize`:␟037cc976466359dc5e10f7849d8b7314c61ffe8f␟5313014536057916467: Bitte wählen Sie eine Abrechnunsgmethode aus `,Wb=$localize`:␟7c61006f5b70e4085cbaef80da92af86d661c597␟2870608823321325981: Bitte geben Sie eine Währung ein `,ed=$localize`:␟7b4a38ab774886a0b1886986d02d81da0a214d1a␟3369859494957303445: Bitte geben Sie MwSt % ein `,td=$localize`:␟5e1ee45699ba982af00d23d6a6a9262a356d8c44␟3197748058937026406: Die Eingabe ist ungültig `,nd=$localize`:␟daa995c7fa75d4213912d409eab254389c42e980␟42164365498874028: Bitte geben Sie Zahlungsbedingungen ein `,cd=$localize`:␟ab1fff8514dbe06165dd3ca4f4d01e4d47f24d3e␟6967719713285787883: Bitte wählen Sie eine Zahlungsmethode aus `,ad=$localize`:␟801b2cfacdf47b28180bbce5f2e890335523581a␟7897469896844362432: Bitte geben Sie eine Skontofrist ein `,id=$localize`:␟b4f53f5c88cc29966bb551f9a45222095c15b488␟174497592247559182: Bitte geben Sie einen gültigen Prozentsatz ein `,od=$localize`:␟345d89276df821026be6ac2a56f060c836e02589␟5425552576326490212: Bitte geben Sie eine Zahlungsziel ein `,rd=$localize`:␟05ba229584be0c2e440d5f0c25f8ea170dbfd23f␟859604042561581065: Bitte geben Sie mindestens eine Position ein. `;const Id=["label",$localize`:Dokumente␟a6bb7641bde88e6d98545723fd6f563960c6ade0␟8986273476063523240:Dokumente`];function $d(e,t){if(1&e&&(l.Tb(0,"mat-tab",2),l.Yb(1,Id),l.Tb(2,"section",42),l.Tb(3,"div"),l.Ob(4,"jo-document-link-list",43),l.Sb(),l.Sb(),l.Sb()),2&e){const e=l.hc();l.Cb(4),l.nc("object",e.object)}}var xd,Pd,_d,kd,Md,zd,Ad,Bd;function Rd(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,xd),l.Sb())}function Ed(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Pd),l.Sb())}function Nd(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",53),l.dc("click",(function(t){return l.tc(e),l.hc(3).onDelete(t)})),l.Tb(1,"span"),l.Xb(2,Md),l.Sb(),l.Sb()}}function Fd(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",54),l.dc("click",(function(t){return l.tc(e),l.hc(3).onPdf(t)})),l.Tb(1,"span"),l.Xb(2,zd),l.Sb(),l.Sb()}if(2&e){const e=l.hc(3);l.nc("disabled",!e.form.valid||e.form.dirty||!e.object.header.id)}}function Ld(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",55),l.dc("click",(function(t){return l.tc(e),l.hc(3).onEmail(t)})),l.Tb(1,"span"),l.Xb(2,Ad),l.Sb(),l.Sb()}if(2&e){const e=l.hc(3);l.nc("disabled",!e.form.valid||e.form.dirty||!e.object.header.id)}}function Xd(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",56),l.dc("click",(function(){l.tc(e);const t=l.hc(3);return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Bd),l.Sb(),l.Sb()}if(2&e){const e=l.hc(3);l.nc("disabled",!e.form.valid||!e.form.dirty)}}function qd(e,t){if(1&e){const e=l.Ub();l.Rb(0),l.Bc(1,Nd,3,0,"button",47),l.Tb(2,"button",48),l.dc("click",(function(t){return l.tc(e),l.hc(2).onNew(t)})),l.Tb(3,"span"),l.Xb(4,_d),l.Sb(),l.Sb(),l.Tb(5,"button",49),l.dc("click",(function(t){return l.tc(e),l.hc(2).onCopy(t)})),l.Tb(6,"span"),l.Xb(7,kd),l.Sb(),l.Sb(),l.Bc(8,Fd,3,1,"button",50),l.Bc(9,Ld,3,1,"button",51),l.Bc(10,Xd,3,1,"button",52),l.Qb()}if(2&e){const e=l.hc(2);l.Cb(1),l.nc("ngIf",e.isChangeable||!e.form.controls.id.value),l.Cb(1),l.nc("disabled",!e.form.valid||e.form.dirty),l.Cb(3),l.nc("disabled",!e.form.valid||e.form.dirty||!e.object.header.id),l.Cb(3),l.nc("ngIf",0===e.object.header.status&&0===e.object.header.billingMethod),l.Cb(1),l.nc("ngIf",e.isSendable),l.Cb(1),l.nc("ngIf",e.isChangeable)}}xd=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,Pd=$localize`:␟c47252d6cffe14a672e7ef04b2cc30e761f240ae␟8930526198656004715:Zurück`,_d=$localize`:␟88979a32990e673589e593742a64bf65cc78a3d1␟5659799815836451311:Neu`,kd=$localize`:␟feabfc384269a35e1f051ef9302a4b5624f3a69a␟6421015407864399648:Kopieren`,Md=$localize`:␟a813fd43c9a1b211fe541045d263d2c500c80f0f␟4580399730639224598:Löschen`,zd=$localize`:␟3d94117edfca25b8718ef463d101386797acddf4␟7488980554242426848:PDF erzeugen`,Ad=$localize`:␟af6fdfafe4d3fd76a950684aeb6a01d5e552371b␟8970769016607182045:Senden`,Bd=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`;const Hd=function(){return["sales-user"]};function Ud(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",44),l.Tb(1,"button",45),l.dc("click",(function(t){return l.tc(e),l.hc().onCancel(t)})),l.Bc(2,Rd,2,0,"span",11),l.Bc(3,Ed,2,0,"span",11),l.Sb(),l.Bc(4,qd,11,6,"ng-container",46),l.Sb()}if(2&e){const e=l.hc();l.Cb(2),l.nc("ngIf",e.form.dirty),l.Cb(1),l.nc("ngIf",!e.form.dirty),l.Cb(1),l.nc("joIfAuthorizedAs",l.oc(3,Hd))}}const Vd=function(){return["contractId","billingMethod","currency","vatPercentage"]},Gd=function(){return["paymentTerms","paymentMethod","cashDiscountDays","cashDiscountPercentage","dueInDays"]},Yd=function(){return["items"]};let Zd=(()=>{class e extends sa{constructor(e,t,n,c){super(e,t,n,c),this.fb=e,this.store=t,this.router=n,this.utility=c,this.createPdf=new l.o,this.sendEmail=new l.o,this.onCashDiscountPercentageChanged=(e,t)=>{const n=this.utility.fromLocalPercent(e);this.object.header.cashDiscountPercentage=n,this.changed.emit(this.object)},this.onContractIdChanged=(e,t)=>{console.log("contract assignment changed: ",e);const n=e;this.invoiceContract=this.contracts.find(e=>e.header.id===n),this.object.header.contractId=n,this.changed.emit(this.object)},this.onReceiverIdChanged=(e,t)=>{const n=e;this.object.header.receiverId=n,this.invoiceReceiver=this.receivers.find(e=>e.data.id===this.object.header.receiverId),this.contracts=this.contracts.filter(e=>e.header.customerId===n),this.changed.emit(this.object)},this.onVatPercentageChanged=e=>{const t=this.utility.fromLocalPercent(e);this.object.vatPercentage=t,this.changed.emit(this.object)}}onEmail(e){this.sendEmail.emit(this.object),e&&e.stopPropagation()}onPdf(e){this.createPdf.emit(this.object),e&&e.stopPropagation()}getFormTitle(){return this.object.header.id?`${this.object.header.id} - ${this.object.header.billingPeriod}`:"[neu]"}buildForm(){return this.fb.group({id:[{value:"",disabled:!0}],issuedAt:["",[ta.w.required]],status:["",[ta.w.required]],billingPeriod:["",[ta.w.required]],receiverId:["",[ta.w.required]],contractId:["",[ta.w.required]],billingMethod:["",[ta.w.required]],currency:["",[ta.w.required]],paymentTerms:["",[ta.w.required]],paymentMethod:["",[ta.w.required]],cashDiscountDays:["",[ta.w.pattern(na.b)]],cashDiscountPercentage:["",[ta.w.pattern(na.a)]],dueInDays:["",[ta.w.required,ta.w.pattern(na.b)]],vatPercentage:["",[ta.w.pattern(na.a)]],documentUrl:[""],texts:this.fb.group({invoiceText:[""],internalText:[""]}),items:new ta.d([],[ur])})}changeObject(e){const{items:t}=e,n=fb(e,["items","texts"]),c=t.map(e=>Object.assign({},e,{quantity:this.utility.fromLocalAmount(e.quantity),pricePerUnit:this.utility.fromLocalAmount(e.pricePerUnit)})),a={issuedAt:ce.DateUtility.getDateFromMoment(e.issuedAt),status:+e.status,vatPercentage:this.utility.fromLocalAmount(e.vatPercentage),cashDiscountPercentage:this.utility.fromLocalPercent(e.cashDiscountPercentage),cashDiscountDays:+e.cashDiscountDays,internalText:e.texts.internalText,invoiceText:e.texts.invoiceText};console.log("reformatted values: ",a);const i=Object.assign({},Object.assign({},this.object.data),Object.assign({},n),Object.assign({},a),{items:c});console.log("changed invoice data: ",i);const o=ce.InvoiceFactory.fromData(i);return console.log("changedInvoice: ",o),this.changed.emit(o),o}listenToChanges(){this.listenToFieldChanges("status",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("issuedAt",this.onSimpleHeaderStartDateChanged),this.listenToFieldChanges("receiverId",this.onReceiverIdChanged),this.listenToFieldChanges("contractId",this.onContractIdChanged),this.listenToFieldChanges("billingMethod",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("vatPercentage",this.onVatPercentageChanged),this.listenToFieldChanges("cashDiscountPercentage",this.onCashDiscountPercentageChanged),this.listenToFieldChanges("cashDiscountDays",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("dueInDays",this.onSimpleHeaderNumberChanged),this.listenToFieldChanges("billingPeriod",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("currency",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("paymentTerm",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("paymentMethod",this.onSimpleHeaderNumberChanged)}patchForm(){const e={status:this.object.header.status.toString(),issuedAt:this.object.header.issuedAt,cashDiscountPercentage:this.utility.toLocalPercent(this.object.header.cashDiscountPercentage),vatPercentage:this.utility.toLocalPercent(this.object.vatPercentage),netValue:this.utility.toLocalAmount(this.object.netValue),vatAmount:this.utility.toLocalAmount(this.object.vatAmount),grossValue:this.utility.toLocalAmount(this.object.grossValue),cashDiscountBaseAmount:this.utility.toLocalAmount(this.object.cashDiscountBaseAmount),cashDiscountAmount:this.utility.toLocalAmount(this.object.cashDiscountAmount),paymentAmount:this.utility.toLocalAmount(this.object.paymentAmount)},t=this.object.header,{invoiceText:n,internalText:c}=t,a=fb(t,["invoiceText","internalText"]),i={invoiceText:n,internalText:c},o=Object.assign({},Object.assign({},a),e,{texts:i});this.form.patchValue(o),this.logErrors()}logErrors(){Object.keys(this.form.controls).forEach(e=>{this.form.get(e).errors&&console.log(e,this.form.get(e).errors||"no errors")})}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(ta.f),l.Nb(a.h),l.Nb(s.g),l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-form"]],inputs:{invoiceReceiver:"invoiceReceiver",invoiceContract:"invoiceContract",receivers:"receivers",contracts:"contracts",isChangeable:"isChangeable",isSendable:"isSendable",mode:"mode"},outputs:{createPdf:"createPdf",sendEmail:"sendEmail"},features:[l.zb],decls:142,vars:68,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","invoice-form",3,"formGroup"],[3,"selectedTabChange"],[6,"label"],["id","status-group","formControlName","status","aria-label","Rechnungsstatus"],["color","accent","value","0"],["color","primary","value","1"],["color","primary","value","2"],["id","main-group"],["matInput","","formControlName","issuedAt",3,"matDatepicker",6,"placeholder"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["formControlName","receiverId",6,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","billingPeriod",6,"placeholder"],["expanded","false"],["color","warn",4,"ngIf"],["id","contract-group"],[1,"width--lg"],["formControlName","contractId",6,"placeholder"],["id","billingMethod","formControlName","billingMethod",6,"placeholder"],[3,"value"],[1,"width--sm"],["matInput","","formControlName","currency",6,"placeholder"],["matInput","","formControlName","vatPercentage",6,"placeholder"],["id","payment-group"],["matInput","","formControlName","paymentTerms",6,"placeholder"],["formControlName","paymentMethod",6,"placeholder"],["id","cashDiscount-group"],[1,"width--md"],["matInput","","formControlName","cashDiscountDays",6,"placeholder"],["matInput","","readonly","",3,"value",6,"placeholder"],["matInput","","formControlName","cashDiscountPercentage",6,"placeholder"],["matInput","","formControlName","dueInDays",6,"placeholder"],["expanded","true"],[1,""],["formArrayName","items",3,"itemsFormArray","object","contract","isChangeable"],["id","totals-group"],[3,"textsFormGroup","object","isChangeable"],[4,"ngIf",6,"label"],["class","jo-btn-row",4,"ngIf"],["color","warn"],[1,"tables","u-mt-lg"],[3,"object"],[1,"jo-btn-row"],["id","btn_cancel","type","button","mat-raised-button","",3,"click"],[4,"joIfAuthorizedAs"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","btn_new","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_copy","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_createPdf","type","button","mat-raised-button","",3,"disabled","click",4,"ngIf"],["id","btn_send","type","button","mat-raised-button","",3,"disabled","click",4,"ngIf"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["id","btn_delete","type","button","mat-raised-button","","color","warn",3,"click"],["id","btn_createPdf","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_send","type","button","mat-raised-button","",3,"disabled","click"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(l.Tb(0,"form",0),l.Tb(1,"mat-tab-group",1),l.dc("selectedTabChange",(function(e){return t.onTabChange(e)})),l.Cc(2,"> "),l.Tb(3,"mat-tab",2),l.Yb(4,hb),l.Tb(5,"mat-radio-group",3),l.Tb(6,"mat-radio-button",4),l.Xb(7,gb),l.Sb(),l.Tb(8,"mat-radio-button",5),l.Xb(9,pb),l.Sb(),l.Tb(10,"mat-radio-button",6),l.Xb(11,vb),l.Sb(),l.Sb(),l.Tb(12,"div",7),l.Tb(13,"mat-form-field"),l.Tb(14,"input",8),l.Yb(15,Cb),l.Sb(),l.Ob(16,"mat-datepicker-toggle",9),l.Ob(17,"mat-datepicker",null,10),l.Bc(19,sd,2,0,"mat-error",11),l.Sb(),l.Tb(20,"mat-form-field"),l.Tb(21,"mat-select",12),l.Yb(22,Ob),l.Bc(23,ld,2,2,"mat-option",13),l.Sb(),l.Bc(24,bd,2,0,"mat-error",11),l.Sb(),l.Tb(25,"mat-form-field"),l.Tb(26,"input",14),l.Yb(27,jb),l.Sb(),l.Bc(28,dd,2,0,"mat-error",11),l.Sb(),l.Sb(),l.Tb(29,"mat-expansion-panel",15),l.Tb(30,"mat-expansion-panel-header"),l.Tb(31,"mat-panel-title"),l.Xb(32,yb),l.Sb(),l.Tb(33,"mat-panel-description"),l.Bc(34,ud,2,0,"mat-icon",16),l.Sb(),l.Sb(),l.Tb(35,"div",17),l.Tb(36,"mat-form-field",18),l.Tb(37,"mat-select",19),l.Yb(38,Sb),l.Bc(39,md,4,8,"mat-option",13),l.Sb(),l.Bc(40,fd,2,0,"mat-error",11),l.Sb(),l.Tb(41,"mat-form-field",18),l.Tb(42,"mat-select",20),l.Yb(43,Tb),l.Tb(44,"mat-option",21),l.Xb(45,wb),l.Sb(),l.Tb(46,"mat-option",21),l.Xb(47,Db),l.Sb(),l.Sb(),l.Bc(48,hd,2,0,"mat-error",11),l.Sb(),l.Tb(49,"mat-form-field",22),l.Tb(50,"input",23),l.Yb(51,Ib),l.Sb(),l.Bc(52,gd,2,0,"mat-error",11),l.Sb(),l.Tb(53,"mat-form-field",22),l.Tb(54,"input",24),l.Yb(55,$b),l.Sb(),l.Bc(56,pd,2,0,"mat-error",11),l.Bc(57,vd,2,0,"mat-error",11),l.Sb(),l.Sb(),l.Sb(),l.Tb(58,"mat-expansion-panel"),l.Tb(59,"mat-expansion-panel-header"),l.Tb(60,"mat-panel-title"),l.Xb(61,xb),l.Sb(),l.Tb(62,"mat-panel-description"),l.Bc(63,Cd,2,0,"mat-icon",16),l.Sb(),l.Sb(),l.Tb(64,"div",25),l.Tb(65,"mat-form-field",18),l.Tb(66,"input",26),l.Yb(67,Pb),l.Sb(),l.Bc(68,Od,2,0,"mat-error",11),l.Sb(),l.Tb(69,"mat-form-field"),l.Tb(70,"mat-select",27),l.Yb(71,_b),l.Tb(72,"mat-option",21),l.Xb(73,kb),l.Sb(),l.Tb(74,"mat-option",21),l.Xb(75,Mb),l.Sb(),l.Sb(),l.Bc(76,jd,2,0,"mat-error",11),l.Sb(),l.Sb(),l.Tb(77,"div",28),l.Tb(78,"mat-form-field",29),l.Tb(79,"input",30),l.Yb(80,zb),l.Sb(),l.Bc(81,yd,2,0,"mat-error",11),l.Sb(),l.Tb(82,"mat-form-field"),l.Tb(83,"input",31),l.Yb(84,Ab),l.ic(85,"date"),l.Sb(),l.Sb(),l.Tb(86,"mat-form-field",22),l.Tb(87,"input",32),l.Yb(88,Bb),l.Sb(),l.Bc(89,Sd,2,0,"mat-error",11),l.Sb(),l.Tb(90,"mat-form-field",29),l.Tb(91,"input",33),l.Yb(92,Rb),l.Sb(),l.Bc(93,Td,2,0,"mat-error",11),l.Sb(),l.Tb(94,"mat-form-field"),l.Tb(95,"input",31),l.Yb(96,Eb),l.ic(97,"date"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(98,"mat-expansion-panel",34),l.Tb(99,"mat-expansion-panel-header"),l.Tb(100,"mat-panel-title"),l.Xb(101,Nb),l.Sb(),l.Tb(102,"mat-panel-description"),l.Bc(103,wd,2,0,"mat-icon",16),l.Sb(),l.Sb(),l.Tb(104,"div",35),l.Ob(105,"jo-invoice-items-form",36),l.Bc(106,Dd,2,0,"mat-error",11),l.Sb(),l.Sb(),l.Tb(107,"mat-expansion-panel",34),l.Tb(108,"mat-expansion-panel-header"),l.Tb(109,"mat-panel-title"),l.Xb(110,Fb),l.Sb(),l.Ob(111,"mat-panel-description"),l.Sb(),l.Tb(112,"div",37),l.Tb(113,"mat-form-field",22),l.Tb(114,"input",31),l.Yb(115,Lb),l.ic(116,"number"),l.Sb(),l.Sb(),l.Tb(117,"mat-form-field",22),l.Tb(118,"input",31),l.Yb(119,Xb),l.ic(120,"number"),l.Sb(),l.Sb(),l.Tb(121,"mat-form-field",22),l.Tb(122,"input",31),l.Yb(123,qb),l.ic(124,"number"),l.Sb(),l.Sb(),l.Tb(125,"mat-form-field",22),l.Tb(126,"input",31),l.Yb(127,Hb),l.ic(128,"number"),l.Sb(),l.Sb(),l.Tb(129,"mat-form-field",22),l.Tb(130,"input",31),l.Yb(131,Ub),l.ic(132,"number"),l.Sb(),l.Sb(),l.Tb(133,"mat-form-field",22),l.Tb(134,"input",31),l.Yb(135,Vb),l.ic(136,"number"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(137,"mat-tab",2),l.Yb(138,Gb),l.Ob(139,"jo-texts-form-component",38),l.Sb(),l.Bc(140,$d,5,1,"mat-tab",39),l.Sb(),l.Bc(141,Ud,5,4,"div",40),l.Sb()),2&e){const e=l.sc(18);l.nc("formGroup",t.form),l.Cb(14),l.nc("matDatepicker",e),l.Cb(2),l.nc("for",e),l.Cb(3),l.nc("ngIf",t.form.get("issuedAt").hasError("required")),l.Cb(4),l.nc("ngForOf",t.receivers),l.Cb(1),l.nc("ngIf",t.form.get("receiverId").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("billingPeriod").hasError("required")),l.Cb(6),l.nc("ngIf",t.hasError(l.oc(65,Vd))),l.Cb(5),l.nc("ngForOf",t.contracts),l.Cb(1),l.nc("ngIf",t.form.get("contractId").hasError("required")),l.Cb(4),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("ngIf",t.form.get("billingMethod").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("currency").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("vatPercentage").hasError("required")),l.Cb(1),l.nc("ngIf",t.form.get("vatPercentage").hasError("pattern")),l.Cb(6),l.nc("ngIf",t.hasError(l.oc(66,Gd))),l.Cb(5),l.nc("ngIf",t.form.get("paymentTerms").hasError("required")),l.Cb(4),l.nc("value",0),l.Cb(2),l.nc("value",1),l.Cb(2),l.nc("ngIf",t.form.get("paymentMethod").hasError("required")),l.Cb(5),l.nc("ngIf",t.form.get("cashDiscountDays").hasError("required")),l.Cb(2),l.nc("value",l.jc(85,43,t.object.cashDiscountDate)),l.Cb(6),l.nc("ngIf",t.form.get("cashDiscountPercentage").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("dueInDays").hasError("required")),l.Cb(2),l.nc("value",l.jc(97,45,t.object.dueDate)),l.Cb(8),l.nc("ngIf",t.hasError(l.oc(67,Yd))),l.Cb(2),l.nc("itemsFormArray",t.form.get("items"))("object",t.object)("contract",t.invoiceContract)("isChangeable",t.isChangeable),l.Cb(1),l.nc("ngIf",t.form.get("items").hasError("minItems")),l.Cb(8),l.nc("value",l.kc(116,47,t.object.netValue,"1.2-2")),l.Cb(4),l.nc("value",l.kc(120,50,t.object.vatAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(124,53,t.object.grossValue,"1.2-2")),l.Cb(4),l.nc("value",l.kc(128,56,t.object.cashDiscountBaseAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(132,59,t.object.cashDiscountAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(136,62,t.object.paymentAmount,"1.2-2")),l.Cb(5),l.nc("textsFormGroup",t.form.get("texts"))("object",t.object)("isChangeable",t.isChangeable),l.Cb(1),l.nc("ngIf",t.object.header.id),l.Cb(1),l.nc("ngIf",t.tabIndex<2)}},directives:[ta.x,ta.q,ta.j,da.b,da.a,ua.b,ta.p,ta.h,ua.a,ma.c,fa.b,ta.c,mr.b,mr.d,ma.h,mr.a,Nn.m,ga.a,Nn.l,ha.b,ha.d,ha.e,ha.c,va.l,mb,ta.e,Yr,ma.b,pa.a,ei,Fn.b,En.a],pipes:[Nn.e,Nn.f],styles:["#invoice-form[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width:959px){#invoice-form[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]{height:4.8rem;font-size:1.4rem}#invoice-form[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%], #invoice-form[_ngcontent-%COMP%]   .mat-tab-label-content[_ngcontent-%COMP%]{font-size:1.4rem}#invoice-form[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%], #invoice-form[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}#invoice-form[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:6.4rem!important}}#cashDiscount-group[_ngcontent-%COMP%], #contract-group[_ngcontent-%COMP%], #due-group[_ngcontent-%COMP%], #main-group[_ngcontent-%COMP%], #payment-group[_ngcontent-%COMP%], #validity-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}#cashDiscount-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #contract-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #due-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #main-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #payment-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #validity-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child){margin-right:2.4rem}@media only screen and (max-width:600px){#cashDiscount-group[_ngcontent-%COMP%], #contract-group[_ngcontent-%COMP%], #due-group[_ngcontent-%COMP%], #main-group[_ngcontent-%COMP%], #payment-group[_ngcontent-%COMP%], #validity-group[_ngcontent-%COMP%]{flex-direction:column;font-size:1.6rem}}#main-group[_ngcontent-%COMP%]{padding:0 2.4rem}#totals-discounted-group[_ngcontent-%COMP%], #totals-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}#totals-discounted-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child), #totals-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child){margin-right:2.4rem}@media only screen and (max-width:600px){#totals-discounted-group[_ngcontent-%COMP%], #totals-group[_ngcontent-%COMP%]{font-size:1.6rem}}#status-group[_ngcontent-%COMP%]{margin-top:2.4rem;margin-bottom:2.4rem;padding:0 2.4rem;display:flex;flex-wrap:wrap;font-size:1.4rem}#status-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:0 1.6rem}@media only screen and (max-width:600px){#status-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:0 .8rem}}#cashDiscountAmount[_ngcontent-%COMP%], #cashDiscountBaseAmount[_ngcontent-%COMP%], #grossValue[_ngcontent-%COMP%], #netValue[_ngcontent-%COMP%], #paymentAmount[_ngcontent-%COMP%], #vatAmount[_ngcontent-%COMP%]{margin-top:.8rem}width-full[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})();const Qd=["placeholder",$localize`:Rechnungsempfänger placeholder␟996e7ab6fb58c2ad265d33ab3d53931d50fef5f2␟3449924265582634866:Rechnungsempfänger`],Jd=["placeholder",$localize`:Vertrag placeholder␟8d9d0c95aafb0d02dc9303a7c56c52df91696314␟1102846783936377980:Vertrag`],Kd=["placeholder",$localize`:Ausstellungsdatum placeholder␟dcf7a87cdaa0b60b86dee709e0a4ee1787e05089␟8405214177669701282:Ausstellungsdatum`],Wd=["placeholder",$localize`:Leistungszeitraum placeholder␟3342a3c0c94305b6b27a42d63f3a3e5d62c72350␟5110226715617494380:Leistungszeitraum`],eu=["placeholder",$localize`:Menge placeholder␟77134c293828bbe6d663d26f75252663f46c7ca4␟6137964906830522076:Menge`],tu=["placeholder",$localize`:Beschreibung placeholder␟f09ad66c1ebf16217ba1a1072be7a98de2d95eac␟3282235563480269560:Beschreibung`],nu=["placeholder",$localize`:Nettobetrag placeholder␟440811b80eb2e50e99cfd9ce3488c64effe4ac12␟4255603834735357563:Nettobetrag`],cu=["placeholder",$localize`:MwSt-Betrag placeholder␟84805a6840ccf47405474330adb672e77fb0833b␟858435599647438726:MwSt-Betrag`],au=["placeholder",$localize`:Bruttobetrag placeholder␟942585b80fc17703c1d3d4af0b2ad1053f556f2e␟3131712871196625585:Bruttobetrag`],iu=["placeholder",$localize`:Skontobasis placeholder␟ecf719a53f85ed0621501a869c199996eb58ddd3␟1849435329535756690:Skontobasis`],ou=["placeholder",$localize`:Skontobetrag placeholder␟6fceced2e8cc37fd84d728f11fe5e424d540e9ba␟5408165412793826820:Skontobetrag`],ru=["placeholder",$localize`:Zahlungsbetrag placeholder␟4e36a7e889e4ccc15542a4c4e95e077e0faf14ac␟8800748062155248797:Zahlungsbetrag`];var su,lu,bu,du,uu,mu,fu,hu;function gu(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,lu),l.Sb())}function pu(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,bu),l.Sb())}function vu(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,du),l.Sb())}function Cu(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,uu),l.Sb())}function Ou(e,t){1&e&&(l.Tb(0,"mat-error"),l.Xb(1,mu),l.Sb())}function ju(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,fu),l.Sb())}function yu(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,hu),l.Sb())}su=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`,lu=$localize`:␟fda4049544eb356b2f36c9f7b014e62e211c7622␟413760431675318522: Bitte geben Sie ein Ausstellungsdatum ein `,bu=$localize`:␟52eca136377aad607d88771b44b7ce49ccdc8c81␟7466335479873725444: Bitte geben Sie einen Leistungszeitraum ein `,du=$localize`:␟37210fac72b83d62b80af1fb81ea91f672b22537␟3434241033973129805: Bitte geben Sie eine Menge ein `,uu=$localize`:␟6e54d5a28aa0565ed3b2b9ce41adada3f74b02c2␟6070824206268826189: Die Eingabe ist ungültig `,mu=$localize`:␟88b3ac9a827098b6d328047f771e97fd46b1af06␟7393855088038119274: Bitte geben Sie eine Beschreibung ein `,fu=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,hu=$localize`:␟c47252d6cffe14a672e7ef04b2cc30e761f240ae␟8930526198656004715:Zurück`;let Su=(()=>{class e extends sa{constructor(e,t,n,c){super(e,t,n,c),this.fb=e,this.store=t,this.router=n,this.utility=c,this.onDescriptionChanged=(e,t)=>{this.object.items[0].description=e,this.changed.emit(this.object)},this.onQuantityChanged=(e,t)=>{const n=this.utility.fromLocalAmount(e);this.object.items[0].quantity=n,this.changed.emit(this.object)}}getFormTitle(){return null}buildForm(){return this.fb.group({issuedAt:["",[ta.w.required]],billingPeriod:["",[ta.w.required]],quantity:["",[ta.w.required,ta.w.pattern(na.a)]],description:["",[ta.w.required]]})}changeObject(e){const t={quantity:this.utility.fromLocalAmount(e.quantity),description:e.description},n={issuedAt:ce.DateUtility.getDateFromMoment(e.issuedAt),billingPeriod:e.billingPeriod},c=Object.assign({},Object.assign({},this.object.data),Object.assign({},n));c.items[0].quantity=t.quantity,c.items[0].description=t.description;const a=ce.InvoiceFactory.fromData(c);return this.changed.emit(a),a}listenToChanges(){this.listenToFieldChanges("issuedAt",this.onSimpleHeaderStartDateChanged),this.listenToFieldChanges("billingPeriod",this.onSimpleHeaderTextChanged),this.listenToFieldChanges("quantity",this.onQuantityChanged),this.listenToFieldChanges("description",this.onDescriptionChanged)}patchForm(){const e={receiverId:this.object.header.receiverId,contractId:this.object.header.contractId,issuedAt:this.object.header.issuedAt,billingPeriod:this.object.header.billingPeriod,quantity:this.utility.toLocalAmount(this.object.items[0].quantity),description:this.object.items[0].description,netValue:this.utility.toLocalAmount(this.object.netValue),vatAmount:this.utility.toLocalAmount(this.object.vatAmount),grossValue:this.utility.toLocalAmount(this.object.grossValue),cashDiscountBaseAmount:this.utility.toLocalAmount(this.object.cashDiscountBaseAmount),cashDiscountAmount:this.utility.toLocalAmount(this.object.cashDiscountAmount),paymentAmount:this.utility.toLocalAmount(this.object.paymentAmount)},t=Object.assign({},Object.assign({},e));this.form.patchValue(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(ta.f),l.Nb(a.h),l.Nb(s.g),l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-quick-invoice-form"]],inputs:{invoiceReceiver:"invoiceReceiver",invoiceContract:"invoiceContract"},features:[l.zb],decls:59,vars:37,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","quick-invoice-form",3,"formGroup"],[1,"width--lg"],["matInput","","readonly","",3,"value",6,"placeholder"],["matInput","","formControlName","issuedAt",3,"matDatepicker",6,"placeholder"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["matInput","","formControlName","billingPeriod",6,"placeholder"],[1,"width--sm"],["matInput","","formControlName","quantity",6,"placeholder"],["matInput","","formControlName","description",6,"placeholder"],["id","totals-group",1,"u-mt-md"],[1,"jo-btn-row"],["id","btn_cancel","type","button","mat-raised-button","",3,"click"],["id","btn_save","type","button","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(l.Tb(0,"form",0),l.Tb(1,"mat-form-field",1),l.Tb(2,"input",2),l.Yb(3,Qd),l.Sb(),l.Sb(),l.Tb(4,"mat-form-field",1),l.Tb(5,"input",2),l.Yb(6,Jd),l.Sb(),l.Sb(),l.Tb(7,"mat-form-field",1),l.Tb(8,"input",3),l.Yb(9,Kd),l.Sb(),l.Ob(10,"mat-datepicker-toggle",4),l.Ob(11,"mat-datepicker",null,5),l.Bc(13,gu,2,0,"mat-error",6),l.Sb(),l.Tb(14,"mat-form-field",1),l.Tb(15,"input",7),l.Yb(16,Wd),l.Sb(),l.Bc(17,pu,2,0,"mat-error",6),l.Sb(),l.Tb(18,"mat-form-field",8),l.Tb(19,"input",9),l.Yb(20,eu),l.Sb(),l.Bc(21,vu,2,0,"mat-error",6),l.Bc(22,Cu,2,0,"mat-error",6),l.Sb(),l.Tb(23,"mat-form-field",1),l.Tb(24,"input",10),l.Yb(25,tu),l.Sb(),l.Bc(26,Ou,2,0,"mat-error",6),l.Sb(),l.Tb(27,"div",11),l.Tb(28,"mat-form-field",8),l.Tb(29,"input",2),l.Yb(30,nu),l.ic(31,"number"),l.Sb(),l.Sb(),l.Tb(32,"mat-form-field",8),l.Tb(33,"input",2),l.Yb(34,cu),l.ic(35,"number"),l.Sb(),l.Sb(),l.Tb(36,"mat-form-field",8),l.Tb(37,"input",2),l.Yb(38,au),l.ic(39,"number"),l.Sb(),l.Sb(),l.Tb(40,"mat-form-field",8),l.Tb(41,"input",2),l.Yb(42,iu),l.ic(43,"number"),l.Sb(),l.Sb(),l.Tb(44,"mat-form-field",8),l.Tb(45,"input",2),l.Yb(46,ou),l.ic(47,"number"),l.Sb(),l.Sb(),l.Tb(48,"mat-form-field",8),l.Tb(49,"input",2),l.Yb(50,ru),l.ic(51,"number"),l.Sb(),l.Sb(),l.Sb(),l.Tb(52,"div",12),l.Tb(53,"button",13),l.dc("click",(function(e){return t.onCancel(e)})),l.Bc(54,ju,2,0,"span",6),l.Bc(55,yu,2,0,"span",6),l.Sb(),l.Tb(56,"button",14),l.dc("click",(function(){return t.onSave(t.form)})),l.Tb(57,"span"),l.Xb(58,su),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e){const e=l.sc(12);l.nc("formGroup",t.form),l.Cb(2),l.nc("value",t.object.header.receiverId+" - "+t.invoiceReceiver.header.name),l.Cb(3),l.nc("value",t.object.header.contractId+" - "+t.invoiceContract.header.description),l.Cb(3),l.nc("matDatepicker",e),l.Cb(2),l.nc("for",e),l.Cb(3),l.nc("ngIf",t.form.get("issuedAt").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("billingPeriod").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("quantity").hasError("required")),l.Cb(1),l.nc("ngIf",t.form.get("quantity").hasError("pattern")),l.Cb(4),l.nc("ngIf",t.form.get("description").hasError("required")),l.Cb(3),l.nc("value",l.kc(31,19,t.object.netValue,"1.2-2")),l.Cb(4),l.nc("value",l.kc(35,22,t.object.vatAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(39,25,t.object.grossValue,"1.2-2")),l.Cb(4),l.nc("value",l.kc(43,28,t.object.cashDiscountBaseAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(47,31,t.object.cashDiscountAmount,"1.2-2")),l.Cb(4),l.nc("value",l.kc(51,34,t.object.paymentAmount,"1.2-2")),l.Cb(5),l.nc("ngIf",t.form.dirty),l.Cb(1),l.nc("ngIf",!t.form.dirty),l.Cb(1),l.nc("disabled",!t.form.valid||!t.form.dirty)}},directives:[ta.x,ta.q,ta.j,ma.c,fa.b,ta.c,mr.b,ta.p,ta.h,mr.d,ma.h,mr.a,Nn.m,Fn.b,ma.b],pipes:[Nn.f],styles:["#quick-invoice-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0}),e})();function Tu(e,t){if(1&e){const e=l.Ub();l.Tb(0,"section"),l.Tb(1,"jo-invoice-form",5,6),l.dc("copy",(function(t){return l.tc(e),l.hc(2).onCopy(t)}))("new",(function(){return l.tc(e),l.hc(2).onNew()}))("changed",(function(t){return l.tc(e),l.hc(2).onChanged(t)}))("create",(function(t){return l.tc(e),l.hc(2).onCreate(t)}))("delete",(function(t){return l.tc(e),l.hc(2).onDelete(t)}))("update",(function(t){return l.tc(e),l.hc(2).onUpdate(t)}))("createPdf",(function(t){return l.tc(e),l.hc(2).onCreatePdf(t)}))("sendEmail",(function(t){return l.tc(e),l.hc(2).onSendEmail(t)})),l.ic(3,"async"),l.ic(4,"async"),l.ic(5,"async"),l.ic(6,"async"),l.ic(7,"async"),l.ic(8,"async"),l.Sb(),l.Sb()}if(2&e){const e=l.hc().ngIf,t=l.hc();l.Cb(1),l.nc("object",e)("invoiceReceiver",l.jc(3,8,t.invoiceReceiver$))("invoiceContract",l.jc(4,10,t.invoiceContract$))("receivers",l.jc(5,12,t.receivers$))("contracts",l.jc(6,14,t.contracts$))("isChangeable",l.jc(7,16,t.isChangeable$))("isSendable",l.jc(8,18,t.isSendable$))("mode",t.mode)}}function wu(e,t){if(1&e){const e=l.Ub();l.Tb(0,"section"),l.Tb(1,"jo-quick-invoice-form",7,6),l.dc("changed",(function(t){return l.tc(e),l.hc(2).onChanged(t)}))("create",(function(t){return l.tc(e),l.hc(2).onCreate(t)})),l.ic(3,"async"),l.ic(4,"async"),l.Sb(),l.Sb()}if(2&e){const e=l.hc().ngIf,t=l.hc();l.Cb(1),l.nc("object",e)("invoiceReceiver",l.jc(3,3,t.invoiceReceiver$))("invoiceContract",l.jc(4,5,t.invoiceContract$))}}function Du(e,t){if(1&e&&(l.Tb(0,"mat-card",1),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Tb(3,"span",2),l.Cc(4),l.Sb(),l.Tb(5,"span",3),l.Cc(6),l.Sb(),l.Sb(),l.Sb(),l.Tb(7,"mat-card-content"),l.Bc(8,Tu,9,20,"section",4),l.ic(9,"async"),l.Bc(10,wu,5,7,"section",4),l.ic(11,"async"),l.Sb(),l.Sb()),2&e){const e=t.ngIf,n=l.hc();l.Cb(4),l.Dc(n.getTitle(e)),l.Cb(2),l.Dc(n.getShortenedTitle(e)),l.Cb(2),l.nc("ngIf","quick"!==l.jc(9,4,n.task$)),l.Cb(2),l.nc("ngIf","quick"===l.jc(11,6,n.task$))}}let Iu=(()=>{class e extends ea{constructor(e,t){super(e,t),this.service=e,this.route=t}onCreatePdf(e){this.service.createPdf(e)}onSendEmail(e){this.service.sendEmail(e)}getShortenedTitle(e){return e.header.id?`${e.header.id} - ${e.header.billingPeriod}`:(0===e.header.billingMethod?"Rechnung":"Gutschriftsanforderung")+" [neu]"}getTitle(e){const t=0===e.header.billingMethod?"Rechnung":"Gutschriftsanforderung";return e.header.id?`${t} ${e.header.id} - ${e.header.billingPeriod}`:t+" [neu]"}initializeWithData(e){this.invoice$=this.service.getCurrent(),this.invoiceReceiver$=this.service.getReceiver(),this.invoiceContract$=this.service.getContract(),this.receivers$=this.service.getReceivers(),this.contracts$=this.service.getContracts(),this.mode="edit","copy"===e||"new"===e?(this.task$.next(e),this.isChangeable$=Object(te.of)(!0)):"quick"===e?this.task$.next(e):(this.task$.next("edit"),this.isChangeable$=this.service.isChangeable(),this.isSendable$=this.service.isSendable())}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(_n),l.Nb(s.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-invoice-details"]],features:[l.zb],decls:2,vars:3,consts:[["class","jo-details mat-elevation-z0",4,"ngIf"],[1,"jo-details","mat-elevation-z0"],["fxHide.lt-md",""],["fxHide.gt-sm",""],[4,"ngIf"],[3,"object","invoiceReceiver","invoiceContract","receivers","contracts","isChangeable","isSendable","mode","copy","new","changed","create","delete","update","createPdf","sendEmail"],["detailsForm",""],[3,"object","invoiceReceiver","invoiceContract","changed","create"]],template:function(e,t){1&e&&(l.Bc(0,Du,12,8,"mat-card",0),l.ic(1,"async")),2&e&&l.nc("ngIf",l.jc(1,1,t.invoice$))},directives:[Nn.m,Xn.a,Xn.e,Xn.h,Hn.b,Xn.d,Zd,Su],pipes:[Nn.b],styles:[""],changeDetection:0}),e})();var $u,xu;function Pu(e,t){1&e&&(l.Tb(0,"mat-header-cell",22),l.Xb(1,xu),l.Sb())}$u=$localize`:␟9140e68397cae48dfcde5153ad2dbeb94879c32a␟2229036289439083594:Offene Rechnungen`,xu=$localize`:␟3ecb5ffd80e534d0d8cf0376a019296c5f771f87␟3563503330091824066:Nr.`;const _u=function(e){return["/invoicing/invoices",e]};function ku(e,t){if(1&e&&(l.Tb(0,"mat-cell",22),l.Tb(1,"a",23),l.Cc(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.nc("routerLink",l.pc(2,_u,e.id)),l.Cb(1),l.Dc(e.id)}}var Mu,zu,Au,Bu,Ru,Eu,Nu,Fu,Lu;function Xu(e,t){1&e&&(l.Tb(0,"mat-header-cell",24),l.Xb(1,Mu),l.Sb())}function qu(e,t){if(1&e&&(l.Tb(0,"mat-cell",24),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",e.receiverId," ")}}function Hu(e,t){1&e&&(l.Tb(0,"mat-header-cell",25),l.Xb(1,zu),l.Sb())}function Uu(e,t){if(1&e&&(l.Tb(0,"mat-cell",25),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",e.receiverName," ")}}function Vu(e,t){1&e&&(l.Tb(0,"mat-header-cell",26),l.Xb(1,Au),l.Sb())}function Gu(e,t){if(1&e&&(l.Tb(0,"mat-cell",26),l.Cc(1),l.ic(2,"date"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.jc(2,1,e.issuedAt)," ")}}function Yu(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Tb(1,"span",25),l.Xb(2,Bu),l.Sb(),l.Tb(3,"span",27),l.Xb(4,Ru),l.Sb(),l.Sb())}function Zu(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",e.billingPeriod," ")}}function Qu(e,t){1&e&&(l.Tb(0,"mat-header-cell",25),l.Xb(1,Eu),l.Sb())}function Ju(e,t){if(1&e&&(l.Tb(0,"mat-cell",25),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.netValue,"1.2-2")," ")}}function Ku(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Tb(1,"span",25),l.Xb(2,Nu),l.Sb(),l.Tb(3,"span",27),l.Xb(4,Fu),l.Sb(),l.Sb())}function Wu(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.paymentAmount,"1.2-2")," ")}}function em(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Xb(1,Lu),l.Sb())}Mu=$localize`:␟97c5ce6ba91397715b3d50eecc97b87b041dd090␟5357494641373890764:Kunde`,zu=$localize`:␟97c5ce6ba91397715b3d50eecc97b87b041dd090␟5357494641373890764:Kunde`,Au=$localize`:␟1470eabded471793a7ef2271e2a1dc30a1a3265f␟935267939147271845:Datum`,Bu=$localize`:␟3342a3c0c94305b6b27a42d63f3a3e5d62c72350␟5110226715617494380:Leistungszeitraum`,Ru=$localize`:␟761edc4bb4bf3b074dcc6c9cc2f1c5026dadf425␟8579240404470114859:Zeitraum`,Eu=$localize`:␟440811b80eb2e50e99cfd9ce3488c64effe4ac12␟4255603834735357563:Nettobetrag`,Nu=$localize`:␟4e36a7e889e4ccc15542a4c4e95e077e0faf14ac␟8800748062155248797:Zahlungsbetrag`,Fu=$localize`:␟b1318f9a2f3af0d6dab9195065bcc438a444cc3a␟6777217996757352044:Betrag`,Lu=$localize`:␟6aeb444698c3fb62567e3c083b9957b3bb68328b␟3628816711306092195:Fällig am`;const tm=function(e){return{"past-due":e}};function nm(e,t){if(1&e&&(l.Tb(0,"mat-cell",28),l.Tb(1,"span",25),l.Cc(2),l.ic(3,"date"),l.Sb(),l.Tb(4,"span",27),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Sb()),2&e){const e=t.$implicit,n=l.hc();l.nc("ngClass",l.pc(8,tm,n.isPastDue(e))),l.Cb(2),l.Dc(l.jc(3,3,e.dueDate)),l.Cb(3),l.Dc(l.kc(6,5,e.dueDate,"dd.MM.yy"))}}function cm(e,t){1&e&&l.Ob(0,"mat-header-row")}function am(e,t){1&e&&l.Ob(0,"mat-row")}let im=(()=>{class e extends ni{constructor(){super(...arguments),this.displayedColumns=["id","receiverId","receiverName","issuedAt","billingPeriod","netValue","paymentAmount","dueDate"]}ngOnChanges(){this.dataSource.data=this.objects}isPastDue(e){return e.dueDate<new Date}}return e.\u0275fac=function(t){return om(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-open-invoice-list"]],features:[l.zb,l.Ab],decls:31,vars:3,consts:[[3,"dataSource"],["matColumnDef","id"],["class","width--sm",4,"matHeaderCellDef"],["class","width--sm",4,"matCellDef"],["matColumnDef","receiverId"],["fxHide.lt-sm","","class","width--sm",4,"matHeaderCellDef"],["fxHide.lt-sm","","class","width--sm",4,"matCellDef"],["matColumnDef","receiverName"],["fxHide.lt-md","",4,"matHeaderCellDef"],["fxHide.lt-md","",4,"matCellDef"],["matColumnDef","issuedAt"],["fxHide.lt-sm","",4,"matHeaderCellDef"],["fxHide.lt-sm","",4,"matCellDef"],["matColumnDef","billingPeriod"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","netValue"],["matColumnDef","paymentAmount"],["matColumnDef","dueDate"],[3,"ngClass",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"width--sm"],["mat-button","",3,"routerLink"],["fxHide.lt-sm","",1,"width--sm"],["fxHide.lt-md",""],["fxHide.lt-sm",""],["fxHide.gt-sm",""],[3,"ngClass"]],template:function(e,t){1&e&&(l.Tb(0,"mat-card"),l.Tb(1,"mat-card-title"),l.Xb(2,$u),l.Sb(),l.Tb(3,"mat-card-content"),l.Tb(4,"mat-table",0),l.Rb(5,1),l.Bc(6,Pu,2,0,"mat-header-cell",2),l.Bc(7,ku,3,4,"mat-cell",3),l.Qb(),l.Rb(8,4),l.Bc(9,Xu,2,0,"mat-header-cell",5),l.Bc(10,qu,2,1,"mat-cell",6),l.Qb(),l.Rb(11,7),l.Bc(12,Hu,2,0,"mat-header-cell",8),l.Bc(13,Uu,2,1,"mat-cell",9),l.Qb(),l.Rb(14,10),l.Bc(15,Vu,2,0,"mat-header-cell",11),l.Bc(16,Gu,3,3,"mat-cell",12),l.Qb(),l.Rb(17,13),l.Bc(18,Yu,5,0,"mat-header-cell",14),l.Bc(19,Zu,2,1,"mat-cell",15),l.Qb(),l.Rb(20,16),l.Bc(21,Qu,2,0,"mat-header-cell",8),l.Bc(22,Ju,3,4,"mat-cell",9),l.Qb(),l.Rb(23,17),l.Bc(24,Ku,5,0,"mat-header-cell",14),l.Bc(25,Wu,3,4,"mat-cell",15),l.Qb(),l.Rb(26,18),l.Bc(27,em,2,0,"mat-header-cell",14),l.Bc(28,nm,7,10,"mat-cell",19),l.Qb(),l.Bc(29,cm,1,0,"mat-header-row",20),l.Bc(30,am,1,0,"mat-row",21),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(4),l.nc("dataSource",t.dataSource),l.Cb(25),l.nc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.nc("matRowDefColumns",t.displayedColumns))},directives:[Xn.a,Xn.h,Xn.d,ti.j,ti.c,ti.e,ti.b,ti.g,ti.i,ti.d,ti.a,Fn.a,s.j,Hn.b,Nn.k,Hn.a,ti.f,ti.h],pipes:[Nn.e,Nn.f],styles:["mat-cell[_ngcontent-%COMP%] > a.mat-button[_ngcontent-%COMP%]{min-width:4rem;padding:0 .5rem}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]{font-size:1.6rem}}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]:first-of-type, mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:1rem}}.width--sm[_ngcontent-%COMP%]{flex:1}.width--lg[_ngcontent-%COMP%]{flex:2}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{padding-left:.5rem}}.past-due[_ngcontent-%COMP%]{color:#c62828}"],changeDetection:0}),e})();const om=l.Vb(im);var rm;function sm(e,t){if(1&e&&(l.Tb(0,"div",5),l.Cc(1),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Dc(e)}}function lm(e,t){if(1&e&&(l.Tb(0,"div",8),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Dc(l.kc(2,1,e,"1.0-0"))}}function bm(e,t){if(1&e&&(l.Tb(0,"div",6),l.Tb(1,"div",5),l.Cc(2),l.Sb(),l.Bc(3,lm,3,4,"div",7),l.Sb()),2&e){const e=t.$implicit,n=l.hc();l.Cb(2),l.Dc(e.year),l.Cb(1),l.nc("ngForOf",n.getMonths(e))}}rm=$localize`:␟d51964ee88c8f21f5bdb4cac4f3a8f290c109dec␟3803830480262269000:Umsätze`;let dm=(()=>{class e{constructor(e){this.i18nUtility=e}getHeaderLine(){return["Jahr",...this.i18nUtility.generateAbbrevMonthNames(),"Summe"]}getMonths(e){const t=e.revenuePerMonth;return t.push(e.revenuePerYear),t}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-revenue-list"]],inputs:{revenues:"revenues"},decls:8,vars:2,consts:[[1,"jo-table--title"],[1,"table"],[1,"table-header"],["class","table-cell table-cell--header",4,"ngFor","ngForOf"],["class","table-line",4,"ngFor","ngForOf"],[1,"table-cell","table-cell--header"],[1,"table-line"],["class","table-cell",4,"ngFor","ngForOf"],[1,"table-cell"]],template:function(e,t){1&e&&(l.Tb(0,"mat-card"),l.Tb(1,"mat-card-title",0),l.Xb(2,rm),l.Sb(),l.Tb(3,"mat-card-content"),l.Tb(4,"div",1),l.Tb(5,"div",2),l.Bc(6,sm,2,1,"div",3),l.Sb(),l.Bc(7,bm,4,2,"div",4),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(6),l.nc("ngForOf",t.getHeaderLine()),l.Cb(1),l.nc("ngForOf",t.revenues))},directives:[Xn.a,Xn.h,Xn.d,Nn.l],pipes:[Nn.f],styles:[".jo-table--title[_ngcontent-%COMP%]{margin-bottom:1rem}.table[_ngcontent-%COMP%]{display:grid;font-size:1.2rem}@media only screen and (max-width:1059px){.table[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,calc(100% / 4));font-size:1.4rem}}.table-header[_ngcontent-%COMP%], .table-line[_ngcontent-%COMP%]{display:grid}.table-header[_ngcontent-%COMP%]:first-of-type, .table-line[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #bfbfbf}@media only screen and (max-width:1059px){.table-header[_ngcontent-%COMP%], .table-line[_ngcontent-%COMP%]{border-bottom:1px solid #bfbfbf}}@media only screen and (min-width:1060px){.table-header[_ngcontent-%COMP%], .table-line[_ngcontent-%COMP%]{border-left:1px solid #bfbfbf;grid-template-columns:repeat(14,calc(100% / 14))}}@media only screen and (min-width:1060px){div.table-line[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #bfbfbf}}.table-cell[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid #bfbfbf;border-right:.5px solid #bfbfbf;text-align:right}.table-cell--header[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;font-weight:lighter;opacity:.7}"],changeDetection:0}),e})(),um=(()=>{class e{constructor(e){this.revenuesBusinessService=e}ngOnInit(){this.revenues$=this.revenuesBusinessService.calculateTotalRevenues(),this.openInvoices$=this.revenuesBusinessService.selectOpenInvoices()}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(An))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-overview"]],decls:5,vars:6,consts:[[1,"window","mat-elevation-z4"],[3,"objects"],[3,"revenues"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Ob(1,"jo-open-invoice-list",1),l.ic(2,"async"),l.Ob(3,"jo-revenue-list",2),l.ic(4,"async"),l.Sb()),2&e&&(l.Cb(1),l.nc("objects",l.jc(2,2,t.openInvoices$)),l.Cb(2),l.nc("revenues",l.jc(4,4,t.revenues$)))},directives:[im,dm],pipes:[Nn.b],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}"],changeDetection:0}),e})();var mm,fm;mm=$localize`:␟f73c127dcfb51c980300e537b788eb7d364e9ea8␟1354829749518262932:Länder`,fm=$localize`:␟724ca3154418d8b777c1cd41422c25217440c4c8␟7196449562707086924:Umsatzsteuer`;const hm=function(){return["/invoicing/settings/countries"]},gm=function(){return["/invoicing/settings/vats"]};let pm=(()=>{class e{constructor(e){this.service=e}ngOnInit(){this.settings$=this.service.getSettings()}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(jn))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-settings"]],decls:7,vars:4,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center, center",1,"window"],["mat-button","",1,"width--lg",3,"routerLink"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"a",1),l.Tb(2,"span"),l.Xb(3,mm),l.Sb(),l.Sb(),l.Tb(4,"a",1),l.Tb(5,"span"),l.Xb(6,fm),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(1),l.nc("routerLink",l.oc(2,hm)),l.Cb(3),l.nc("routerLink",l.oc(3,gm)))},directives:[ja.a,ja.c,ja.b,Fn.a,s.j],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}.width--md[_ngcontent-%COMP%]{width:12rem}"],changeDetection:0}),e})();var vm,Cm,Om,jm,ym,Sm=n("LvDl");function Tm(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Cm),l.Sb())}function wm(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,Om),l.Sb())}function Dm(e,t){1&e&&(l.Tb(0,"span"),l.Xb(1,jm),l.Sb())}function Im(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,ym),l.Sb(),l.Sb())}vm=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,Cm=$localize`:␟5089ec3b59c687f7191c1207989b400ad65b6ba7␟3316870872842855349:Länderbezeichnungen pflegen`,Om=$localize`:␟20baa28bf1fd3c0a05b4aa0615bacd972642b7a4␟6894394019761733214:Neues Land anlegen`,jm=$localize`:␟6743ba4b913840675b2848688c500465f55c9d27␟745272443193824543:Neue Übersetzung anlegen`,ym=$localize`:␟d2e63977267f0a7a3bda5fea43fe3072a09796c9␟6261419973361980210:Bitte geben Sie ein Land (ISO Code) ein.`;const $m=["placeholder",$localize`:Sprache placeholder␟1451a321cb66a6785cf15b8d0ada9a620071c6d9␟51574765818008149:Sprache`],xm=["placeholder",$localize`:Ländername placeholder␟21a0e3b2654f174eda8b65296100aaa487ae981b␟5164311268349388722:Ländername`];var Pm,_m,km;function Mm(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,Pm),l.Sb(),l.Sb())}function zm(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,_m),l.Sb(),l.Sb())}function Am(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,km),l.Sb(),l.Sb())}Pm=$localize`:␟04d8c27406f93d06d7f3923cf661739f8111712f␟618156714160397541:Bitte geben Sie eine Sprache ein.`,_m=$localize`:␟f9c06e985632e4a9ef63f5f293533c580c8d2cf2␟7239681445066505424:Es existiert bereits eine Übersetzung für diese Sprache.`,km=$localize`:␟4ac644b6ed93d490227e021dbfb25e76dea4c914␟1657536116083699340:Bitte geben Sie eine Bezeichnung ein.`;const Bm=function(e,t){return{"jo-flex-row":e,"jo-flex-col":t}};function Rm(e,t){if(1&e&&(l.Tb(0,"div",10),l.Tb(1,"div",11),l.Ob(2,"input",12),l.Tb(3,"div",13),l.Tb(4,"mat-form-field"),l.Tb(5,"input",14),l.Yb(6,$m),l.Sb(),l.Bc(7,Mm,3,0,"mat-error",2),l.Bc(8,zm,3,0,"mat-error",2),l.Sb(),l.Tb(9,"mat-form-field"),l.Tb(10,"input",15),l.Yb(11,xm),l.Sb(),l.Bc(12,Am,3,0,"mat-error",2),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e){const e=t.$implicit,n=t.index,c=l.hc();l.Cb(1),l.nc("formGroupName",n),l.Cb(2),l.nc("ngClass",l.qc(5,Bm,"translate"!==c.data.task,"translate"===c.data.task)),l.Cb(4),l.nc("ngIf",e.get("language").hasError("required")),l.Cb(1),l.nc("ngIf",e.get("language").hasError("translationExists")),l.Cb(4),l.nc("ngIf",e.get("name").hasError("required"))}}var Em,Nm,Fm;function Lm(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",16),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Em),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}function Xm(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",17),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Nm),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}function qm(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",18),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Fm),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}Em=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`,Nm=$localize`:␟8df88f74706b74f37a55c11e945bf373887712d9␟3127620467897431535:Anlegen`,Fm=$localize`:␟62abbac084f69510c9af6a90fed45138cdac9795␟4904138318188506340:Übersetzung hinzufügen`;let Hm=(()=>{class e{constructor(e,t,n){this.data=e,this.fb=t,this.dialogRef=n}ngOnInit(){this.form||(this.form=this.buildForm()),this.patchForm()}get translations(){return this.form.get("translations").controls}onSave(e){const t=this.changeObject(e.value);this.data.country=t,this.dialogRef.close(this.data)}addLanguage(e=!0){const t=[ta.w.required];return e||t.push(this.validateLanguageNotYetExists.bind(this)),this.fb.group({langCode:[""],language:[{value:"",disabled:e},t],name:["",[ta.w.required]]})}addLanguages(){const e=[];return this.data.task===ce.COUNTRY_TASK_EDIT?Object.keys(this.data.country.names).forEach(()=>e.push(this.addLanguage())):this.data.task===ce.COUNTRY_TASK_NEW_COUNTRY?this.data.supportedLanguages.forEach(()=>e.push(this.addLanguage())):e.push(this.addLanguage(!1)),e}buildForm(){return this.fb.group({isoCode:[{value:"",disabled:this.data.task!==ce.COUNTRY_TASK_NEW_COUNTRY}],translations:new ta.d(this.addLanguages())})}changeObject(e){const t=Object.assign({},this.data.country);return e.isoCode&&e.isoCode.length>=2&&(t.isoCode=e.isoCode),e.translations.forEach(e=>{e.language&&e.language.length>=2&&e.name&&e.name.length>0?t.names[e.language]=e.name:e.langCode&&e.langCode.length>=2&&e.name&&e.name.length>0&&(t.names[e.langCode]=e.name)}),t}logForm(){console.log("FORM: ",this.form)}patchForm(){let e;e=Object.assign({},{isoCode:this.data.country.isoCode,translations:[]}),this.data.task!==ce.COUNTRY_TASK_NEW_TRANSLATION?Object.keys(this.data.country.names).forEach(t=>e.translations.push({langCode:t,language:t,name:this.data.country.names[t]})):e.translations.push({langCode:this.data.language,language:this.data.language,name:this.data.translation}),this.form.patchValue(e)}validateLanguageNotYetExists(e){return this.data.country.names[e.value]?{translationExists:!0}:null}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Oa.a),l.Nb(ta.f),l.Nb(Oa.g))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-country-details-dialog"]],decls:17,vars:9,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","country-details-form",3,"formGroup"],["mat-dialog-title",""],[4,"ngIf"],["fxLayout","column"],["matInput","","id","isoCode","placeholder","Land","formControlName","isoCode"],["formArrayName","translations","fxLayout","column","fxLayoutGap","1rem",4,"ngFor","ngForOf"],["id","btn_save","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_create","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_addTranslation","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_cancel","mat-button","","mat-dialog-close",""],["formArrayName","translations","fxLayout","column","fxLayoutGap","1rem"],[3,"formGroupName"],["matInput","","formControlName","langCode","hidden",""],[3,"ngClass"],["matInput","","formControlName","language",1,"width--sm",6,"placeholder"],["matInput","","formControlName","name",1,"width--lg",6,"placeholder"],["id","btn_save","mat-button","",3,"disabled","click"],["id","btn_create","mat-button","",3,"disabled","click"],["id","btn_addTranslation","mat-button","",3,"disabled","click"]],template:function(e,t){1&e&&(l.Tb(0,"form",0),l.Tb(1,"h1",1),l.Bc(2,Tm,2,0,"span",2),l.Bc(3,wm,2,0,"span",2),l.Bc(4,Dm,2,0,"span",2),l.Sb(),l.Tb(5,"mat-dialog-content",3),l.Tb(6,"mat-form-field"),l.Ob(7,"input",4),l.Bc(8,Im,3,0,"mat-error",2),l.Sb(),l.Bc(9,Rm,13,8,"div",5),l.Sb(),l.Tb(10,"mat-dialog-actions"),l.Bc(11,Lm,3,1,"button",6),l.Bc(12,Xm,3,1,"button",7),l.Bc(13,qm,3,1,"button",8),l.Tb(14,"button",9),l.Tb(15,"span"),l.Xb(16,vm),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.nc("formGroup",t.form),l.Cb(2),l.nc("ngIf","edit"===t.data.task),l.Cb(1),l.nc("ngIf","new"===t.data.task),l.Cb(1),l.nc("ngIf","translate"===t.data.task),l.Cb(4),l.nc("ngIf",t.form.get("isoCode").hasError("required")),l.Cb(1),l.nc("ngForOf",t.translations),l.Cb(2),l.nc("ngIf","edit"===t.data.task),l.Cb(1),l.nc("ngIf","new"===t.data.task),l.Cb(1),l.nc("ngIf","translate"===t.data.task))},directives:[ta.x,ta.q,ta.j,Oa.h,Nn.m,Oa.e,ja.c,ma.c,fa.b,ta.c,ta.p,ta.h,Nn.l,Oa.c,Fn.b,Oa.d,ma.b,ta.e,ja.d,ta.k,Nn.k,Hn.a],styles:["form[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.6rem}h1[_ngcontent-%COMP%]{font-size:1.8rem}.width--xs[_ngcontent-%COMP%]{width:4rem}.width--sm[_ngcontent-%COMP%]{width:8rem}.width--md[_ngcontent-%COMP%]{width:12rem}.width--lg[_ngcontent-%COMP%]{width:28rem}.width--xl[_ngcontent-%COMP%]{width:36rem}mat-dialog-content[_ngcontent-%COMP%]{overflow:visible}.jo-flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.jo-flex-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}@media only screen and (max-width:959px){.jo-flex-row[_ngcontent-%COMP%]{flex-direction:column}}@media only screen and (max-width:959px){.mat-button[_ngcontent-%COMP%]{padding:0}}.jo-flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.jo-flex-col[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),e})();var Um,Vm,Gm,Ym,Zm;function Qm(e,t){1&e&&(l.Tb(0,"mat-header-cell",18),l.Tb(1,"span"),l.Xb(2,Gm),l.Sb(),l.Sb())}function Jm(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",19),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onSelect(n)})),l.Cc(1),l.Sb()}if(2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",e.isoCode," ")}}function Km(e,t){if(1&e&&(l.Tb(0,"mat-header-cell",23),l.Tb(1,"span"),l.Xb(2,Ym),l.Sb(),l.Cc(3),l.Sb()),2&e){const e=l.hc(),t=e.$implicit;l.nc("fxHide.lt-md",e.index>0),l.Cb(3),l.Ec("(",t,") ")}}function Wm(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",24),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc(2).onSelect(n)})),l.Cc(1),l.Sb()}if(2&e){const e=t.$implicit,n=l.hc(),c=n.$implicit;l.nc("fxHide.lt-md",n.index>0),l.Cb(1),l.Ec(" ",e.names[c]," ")}}function ef(e,t){if(1&e&&(l.Rb(0),l.Rb(1,20),l.Bc(2,Km,4,2,"mat-header-cell",21),l.Bc(3,Wm,2,2,"mat-cell",22),l.Qb(),l.Qb()),2&e){const e=t.$implicit;l.Cb(1),l.nc("matColumnDef","name_"+e)}}function tf(e,t){1&e&&(l.Tb(0,"mat-header-cell",25),l.Tb(1,"span"),l.Xb(2,Zm),l.Sb(),l.Sb())}function nf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",26),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onSelect(n)})),l.Cc(1),l.Sb()}if(2&e){const e=t.$implicit,n=l.hc();l.Cb(1),l.Ec(" ",n.getNamesCount(e)," ")}}function cf(e,t){1&e&&l.Ob(0,"mat-header-cell",27)}function af(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",27),l.Tb(1,"button",28),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onAddTranslation(n)})),l.Tb(2,"mat-icon",29),l.Cc(3,"playlist_add"),l.Sb(),l.Sb(),l.Sb()}}function of(e,t){1&e&&l.Ob(0,"mat-header-cell",27)}function rf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",31),l.dc("click",(function(){l.tc(e);const t=l.hc().$implicit;return l.hc().onDelete(t)})),l.Tb(1,"mat-icon",32),l.Cc(2,"delete"),l.Sb(),l.Sb()}}function sf(e,t){if(1&e&&(l.Tb(0,"mat-cell",27),l.Bc(1,rf,3,0,"button",30),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.nc("ngIf","DE"!==e.isoCode)}}function lf(e,t){1&e&&l.Ob(0,"mat-header-row")}function bf(e,t){1&e&&l.Ob(0,"mat-row")}Um=$localize`:␟91258d9e8a4471fcad91834ed8b98a3f19d40291␟5064300286565041768:Land hinzufügen`,Vm=$localize`:␟c47252d6cffe14a672e7ef04b2cc30e761f240ae␟8930526198656004715:Zurück`,Gm=$localize`:␟5c246f91bfcc7deb488adb23878699f932167b3c␟5077435806197549609:ISO Code`,Ym=$localize`:␟63997044413969ba33a9aaf33c4925effe6389b2␟23837338749578806:Übersetzung `,Zm=$localize`:␟0e52d6564a22869a81028b17f8101faffbf32302␟5896115930586524761:Mehr`;const df=function(){return["/invoicing/settings"]};let uf=(()=>{class e{constructor(e,t){this.service=e,this.dialog=t,this.displayedColumns=["isoCode","more","task","delete"],this.dataSource=new ti.k,this.selected=null}ngOnInit(){this.supportedLanguages=this.service.getSupportedLanguages(),this.supportedLanguages.forEach((e,t)=>this.displayedColumns.splice(t+1,0,"name_"+e)),this.subscription=this.service.getCountrySettings().subscribe(e=>{this.countrySettings=Sm.cloneDeep(e),this.countrySettings.values.sort((e,t)=>e.isoCode.localeCompare(t.isoCode)),this.dataSource.data=this.countrySettings.values})}ngOnDestroy(){this.subscription.unsubscribe()}getNamesCount(e){return Object.keys(e.names).length-this.supportedLanguages.length}onAddTranslation(e){this.selected=e;const t=Object.assign({},e);this.openDetailsDialog(ce.COUNTRY_TASK_NEW_TRANSLATION,t)}onDelete(e){this.selected=null,this.countrySettings.values=[...this.countrySettings.values.filter(t=>!Sm.isEqual(t,e))],this.service.update(this.countrySettings)}onNew(e){this.selected=null;const t={names:{}};this.supportedLanguages.forEach(e=>t.names[e]=null),this.openDetailsDialog(ce.COUNTRY_TASK_NEW_COUNTRY,t),e&&e.stopPropagation()}onSelect(e){this.selected=e;const t=Object.assign({},e);this.openDetailsDialog(ce.COUNTRY_TASK_EDIT,t)}openDetailsDialog(e,t){const n=this.calculateDialogDimensions(e,t),c={supportedLanguages:this.supportedLanguages,task:e,country:t};return e!==ce.COUNTRY_TASK_NEW_TRANSLATION&&(c.language=null,c.translation=null),this.detailsDialogRef=this.dialog.open(Hm,Object.assign(Object.assign({},n),{data:c})),this.detailsDialogRef.afterClosed().subscribe(e=>{e&&this.updateCountry(e)}),this.detailsDialogRef}calculateDialogDimensions(e,t){return{height:25+6*(("translate"!==e?Object.keys(t.names).length||0:3)+1)+"rem",width:"48rem"}}updateCountry(e){switch(e.task){case ce.COUNTRY_TASK_EDIT:case ce.COUNTRY_TASK_NEW_TRANSLATION:this.service.update(this.countrySettings);break;case ce.COUNTRY_TASK_NEW_COUNTRY:this.countrySettings.values.some(t=>t.isoCode===e.country.isoCode)?this.service.throwError({message:`Das Land ${e.country.isoCode} existiert bereits.`}):(this.countrySettings.values.push(e.country),this.service.update(this.countrySettings))}}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(jn),l.Nb(Oa.b))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-country-list"]],decls:24,vars:6,consts:[[1,"window","mat-elevation-z4"],["fxLayout","row","fxLayoutAlign","space-between",1,"u-mb-md"],["id","btn_new","mat-raised-button","","color","primary",3,"click"],["id","btn_back","mat-raised-button","",3,"routerLink"],[3,"dataSource"],["matColumnDef","isoCode"],["class","width--md",4,"matHeaderCellDef"],["class","width--sm",3,"click",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","more"],["class","width--xs","fxHide.lt-md","",4,"matHeaderCellDef"],["class","width--xs","fxHide.lt-md","",3,"click",4,"matCellDef"],["matColumnDef","task"],["class","width--xs",4,"matHeaderCellDef"],["class","width--xs",4,"matCellDef"],["matColumnDef","delete"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"width--md"],[1,"width--sm",3,"click"],[3,"matColumnDef"],["class","width--lg",3,"fxHide.lt-md",4,"matHeaderCellDef"],["class","width--lg",3,"fxHide.lt-md","click",4,"matCellDef"],[1,"width--lg",3,"fxHide.lt-md"],[1,"width--lg",3,"fxHide.lt-md","click"],["fxHide.lt-md","",1,"width--xs"],["fxHide.lt-md","",1,"width--xs",3,"click"],[1,"width--xs"],["mat-icon-button","",3,"click"],["aria-label","\xdcbersetzung hinzuf\xfcgen"],["mat-icon-button","","mat-button","",3,"click",4,"ngIf"],["mat-icon-button","","mat-button","",3,"click"],["color","warn","aria-label","L\xf6schen"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div",1),l.Tb(2,"button",2),l.dc("click",(function(e){return t.onNew(e)})),l.Tb(3,"span"),l.Xb(4,Um),l.Sb(),l.Sb(),l.Tb(5,"a",3),l.Tb(6,"span"),l.Xb(7,Vm),l.Sb(),l.Sb(),l.Sb(),l.Tb(8,"mat-table",4),l.Rb(9,5),l.Bc(10,Qm,3,0,"mat-header-cell",6),l.Bc(11,Jm,2,1,"mat-cell",7),l.Qb(),l.Bc(12,ef,4,1,"ng-container",8),l.Rb(13,9),l.Bc(14,tf,3,0,"mat-header-cell",10),l.Bc(15,nf,2,1,"mat-cell",11),l.Qb(),l.Rb(16,12),l.Bc(17,cf,1,0,"mat-header-cell",13),l.Bc(18,af,4,0,"mat-cell",14),l.Qb(),l.Rb(19,15),l.Bc(20,of,1,0,"mat-header-cell",13),l.Bc(21,sf,2,1,"mat-cell",14),l.Qb(),l.Bc(22,lf,1,0,"mat-header-row",16),l.Bc(23,bf,1,0,"mat-row",17),l.Sb(),l.Sb()),2&e&&(l.Cb(5),l.nc("routerLink",l.oc(5,df)),l.Cb(3),l.nc("dataSource",t.dataSource),l.Cb(4),l.nc("ngForOf",t.supportedLanguages),l.Cb(10),l.nc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.nc("matRowDefColumns",t.displayedColumns))},directives:[ja.c,ja.b,Fn.b,Fn.a,s.j,ti.j,ti.c,ti.e,ti.b,Nn.l,ti.g,ti.i,ti.d,ti.a,Hn.b,pa.a,Nn.m,ti.f,ti.h],styles:[".table-header[_ngcontent-%COMP%]{margin-top:3.6rem;display:flex}.table-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .table-header[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:0;padding:.8rem 1.2rem}.table-row[_ngcontent-%COMP%]{display:flex}.table-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{padding:.8rem 1.2rem}.table-row[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#d3d3d3}.window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}.width--xs[_ngcontent-%COMP%]{width:4rem}.width--sm[_ngcontent-%COMP%]{width:8rem}.width--md[_ngcontent-%COMP%]{width:12rem}.width--lg[_ngcontent-%COMP%]{width:28rem;flex:3}@media only screen and (max-width:959px){.width--lg[_ngcontent-%COMP%]{padding-left:.5rem}}.width--xl[_ngcontent-%COMP%]{width:36rem}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]{font-size:1.6rem}}"],changeDetection:0}),e})();var mf;mf=$localize`:␟62bb0bbdfe183f451e0ac662beecb10b25f12ecc␟6849442939139406465:Steuersatz pflegen`;const ff=["placeholder",$localize`:Steuercode placeholder␟49181af14f8ccc54fb2e931599e8b13cc300f490␟1999647039747025377:Steuercode`],hf=["placeholder",$localize`:Gültig ab placeholder␟0bf18431caaac839c1e6c838e2a27d9fd321743a␟1346750425871899275:Gültig ab`],gf=["placeholder",$localize`:Gültig bis placeholder␟984a34347041296dcc3cae9a8719c400e631988e␟8509586664655630098:Gültig bis`],pf=["placeholder",$localize`:Steuersatz % plcaeholder␟ee5d5ad01686a8f158d3aaeca491d85d48737cd0␟3725642128447996306:Steuersatz %`];var vf,Cf,Of,jf,yf,Sf,Tf,wf,Df;function If(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,Cf),l.Sb(),l.Sb())}function $f(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,Of),l.Sb(),l.Sb())}function xf(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,jf),l.Sb(),l.Sb())}function Pf(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,yf),l.Sb(),l.Sb())}function _f(e,t){1&e&&(l.Tb(0,"mat-error"),l.Tb(1,"span"),l.Xb(2,Sf),l.Sb(),l.Sb())}function kf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",15),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Tf),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}function Mf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",16),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,wf),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}function zf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",17),l.dc("click",(function(){l.tc(e);const t=l.hc();return t.onSave(t.form)})),l.Tb(1,"span"),l.Xb(2,Df),l.Sb(),l.Sb()}if(2&e){const e=l.hc();l.nc("disabled",!e.form.valid)}}vf=$localize`:␟1b24932d0f2269e4b41d0f936fdb5de1b94da401␟7624133960269641605:Abbrechen`,Cf=$localize`:␟9419d79161e61b62a030b8e1d43b002de9b89923␟4666139466262817587:Bitte geben Sie einen Steuercode ein.`,Of=$localize`:␟478b66b2bfa8c5399381ad1e550c35630562db43␟7347964765002118292:Bitte geben Sie ein Gültigkeitsdatum ein`,jf=$localize`:␟478b66b2bfa8c5399381ad1e550c35630562db43␟7347964765002118292:Bitte geben Sie ein Gültigkeitsdatum ein`,yf=$localize`:␟8077bffbbf9f4508a0c924dfff3841dea514298c␟7187223394324495132:Bitte geben Sie einen Prozentsatz ein`,Sf=$localize`:␟b8bd173fec055a201c1648f61dad406949cfb3f9␟1014393421561264116:Bitte geben Sie einen gültigen Prozentsatz ein`,Tf=$localize`:␟05d6def11b80c405276ad18c4fc5183e8cea4f75␟2854123663314832793:Speichern`,wf=$localize`:␟8df88f74706b74f37a55c11e945bf373887712d9␟3127620467897431535:Anlegen`,Df=$localize`:␟2a7f70995274e199df9287d67aa6bc90458df950␟8261782328713390804:Periode hinzufügen`;let Af=(()=>{class e{constructor(e,t,n,c){this.data=e,this.fb=t,this.dialogRef=n,this.utility=c}ngOnInit(){this.form||(this.form=this.buildForm()),this.patchForm()}onSave(e){const t=this.changeObject(e.value);this.data.vat=t,this.dialogRef.close(this.data)}buildForm(){return this.fb.group({taxCode:[{value:"",disabled:this.data.task!==ce.VAT_TASK_NEW_TAXCODE}],validFrom:[{value:"",disabled:!1},[ta.w.required]],validTo:[{value:"",disabled:!1},[ta.w.required]],percentage:["",[ta.w.required,ta.w.pattern(na.a)]]})}changeObject(e){const{vat:t}=e,n={taxCode:e.taxCode||this.data.vat.taxCode,validFrom:ca(e.validFrom).toDate(),validTo:ca(e.validTo).toDate(),percentage:this.utility.fromLocalPercent(e.percentage)};return Object.assign({},Object.assign({},this.data.vat),Object.assign({},t),Object.assign({},n))}patchForm(){const e={percentage:this.utility.toLocalPercent(this.data.vat.percentage)},t=Object.assign({},Object.assign({},this.data.vat),Object.assign({},e));this.form.patchValue(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(Oa.a),l.Nb(ta.f),l.Nb(Oa.g),l.Nb(aa))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-vat-details-dialog"]],decls:34,vars:13,consts:[["autocomplete","off","novalidate","","spellcheck","false","id","vat-details-form",3,"formGroup"],["mat-dialog-title",""],["fxLayout","column"],["matInput","","id","taxCode","formControlName","taxCode",6,"placeholder"],[4,"ngIf"],["matInput","","formControlName","validFrom",3,"matDatepicker",6,"placeholder"],["matSuffix","",3,"for"],["fromPicker",""],["matInput","","formControlName","validTo",3,"matDatepicker",6,"placeholder"],["toPicker",""],["matInput","","id","percentage","formControlName","percentage",6,"placeholder"],["id","btn_save","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_create","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_addPeriod","mat-button","",3,"disabled","click",4,"ngIf"],["id","btn_cancel","mat-button","","mat-dialog-close",""],["id","btn_save","mat-button","",3,"disabled","click"],["id","btn_create","mat-button","",3,"disabled","click"],["id","btn_addPeriod","mat-button","",3,"disabled","click"]],template:function(e,t){if(1&e&&(l.Tb(0,"form",0),l.Tb(1,"h1",1),l.Xb(2,mf),l.Sb(),l.Tb(3,"mat-dialog-content",2),l.Tb(4,"mat-form-field"),l.Tb(5,"input",3),l.Yb(6,ff),l.Sb(),l.Bc(7,If,3,0,"mat-error",4),l.Sb(),l.Tb(8,"mat-form-field"),l.Tb(9,"input",5),l.Yb(10,hf),l.Sb(),l.Ob(11,"mat-datepicker-toggle",6),l.Ob(12,"mat-datepicker",null,7),l.Bc(14,$f,3,0,"mat-error",4),l.Sb(),l.Tb(15,"mat-form-field"),l.Tb(16,"input",8),l.Yb(17,gf),l.Sb(),l.Ob(18,"mat-datepicker-toggle",6),l.Ob(19,"mat-datepicker",null,9),l.Bc(21,xf,3,0,"mat-error",4),l.Sb(),l.Tb(22,"mat-form-field"),l.Tb(23,"input",10),l.Yb(24,pf),l.Sb(),l.Bc(25,Pf,3,0,"mat-error",4),l.Bc(26,_f,3,0,"mat-error",4),l.Sb(),l.Sb(),l.Tb(27,"mat-dialog-actions"),l.Bc(28,kf,3,1,"button",11),l.Bc(29,Mf,3,1,"button",12),l.Bc(30,zf,3,1,"button",13),l.Tb(31,"button",14),l.Tb(32,"span"),l.Xb(33,vf),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e){const e=l.sc(13),n=l.sc(20);l.nc("formGroup",t.form),l.Cb(7),l.nc("ngIf",t.form.get("taxCode").hasError("required")),l.Cb(2),l.nc("matDatepicker",e),l.Cb(2),l.nc("for",e),l.Cb(3),l.nc("ngIf",t.form.get("validFrom").hasError("required")),l.Cb(2),l.nc("matDatepicker",n),l.Cb(2),l.nc("for",n),l.Cb(3),l.nc("ngIf",t.form.get("validTo").hasError("required")),l.Cb(4),l.nc("ngIf",t.form.get("percentage").hasError("required")),l.Cb(1),l.nc("ngIf",t.form.get("percentage").hasError("pattern")),l.Cb(2),l.nc("ngIf","edit"===t.data.task),l.Cb(1),l.nc("ngIf","new"===t.data.task),l.Cb(1),l.nc("ngIf","period"===t.data.task)}},directives:[ta.x,ta.q,ta.j,Oa.h,Oa.e,ja.c,ma.c,fa.b,ta.c,ta.p,ta.h,Nn.m,mr.b,mr.d,ma.h,mr.a,Oa.c,Fn.b,Oa.d,ma.b],styles:["form[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.6rem}h1[_ngcontent-%COMP%]{font-size:1.8rem}.width--xs[_ngcontent-%COMP%]{width:4rem}.width--sm[_ngcontent-%COMP%]{width:8rem}.width--md[_ngcontent-%COMP%]{width:12rem}.width--lg[_ngcontent-%COMP%]{width:28rem}.width--xl[_ngcontent-%COMP%]{width:36rem}mat-dialog-content[_ngcontent-%COMP%]{overflow:visible}.jo-flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.jo-flex-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}@media only screen and (max-width:959px){.jo-flex-row[_ngcontent-%COMP%]{flex-direction:column}}@media only screen and (max-width:959px){.mat-button[_ngcontent-%COMP%]{padding:0}}"],changeDetection:0}),e})();var Bf,Rf,Ef,Nf;function Ff(e,t){1&e&&(l.Tb(0,"mat-header-cell",19),l.Xb(1,Bf),l.Sb())}function Lf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",19),l.Tb(1,"a",20),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onSelect(n)})),l.Cc(2),l.Sb(),l.Sb()}if(2&e){const e=t.$implicit;l.Cb(2),l.Dc(e.taxCode)}}function Xf(e,t){1&e&&(l.Tb(0,"mat-header-cell",21),l.Xb(1,Rf),l.Sb())}function qf(e,t){if(1&e&&(l.Tb(0,"mat-cell",21),l.Cc(1),l.ic(2,"date"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.jc(2,1,e.validFrom)," ")}}function Hf(e,t){1&e&&(l.Tb(0,"mat-header-cell",19),l.Xb(1,Ef),l.Sb())}function Uf(e,t){if(1&e&&(l.Tb(0,"mat-cell",19),l.Tb(1,"span",22),l.Cc(2),l.ic(3,"date"),l.Sb(),l.Tb(4,"span",23),l.Cc(5),l.ic(6,"date"),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Cb(2),l.Dc(l.jc(3,2,e.validTo)),l.Cb(3),l.Dc(l.kc(6,4,e.validTo,"dd.MM.yy"))}}function Vf(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Xb(1,Nf),l.Sb())}function Gf(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Cc(1),l.ic(2,"number"),l.Sb()),2&e){const e=t.$implicit;l.Cb(1),l.Ec(" ",l.kc(2,1,e.percentage,"1.1-2")," ")}}function Yf(e,t){1&e&&l.Ob(0,"mat-header-cell")}function Zf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell"),l.Tb(1,"button",24),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onAddPeriod(n)})),l.Tb(2,"mat-icon",25),l.Cc(3,"playlist_add"),l.Sb(),l.Sb(),l.Sb()}}function Qf(e,t){1&e&&l.Ob(0,"mat-header-cell")}function Jf(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell"),l.Tb(1,"button",24),l.dc("click",(function(){l.tc(e);const n=t.$implicit;return l.hc().onDelete(n)})),l.Tb(2,"mat-icon",26),l.Cc(3,"delete"),l.Sb(),l.Sb(),l.Sb()}}function Kf(e,t){1&e&&l.Ob(0,"mat-header-row")}function Wf(e,t){1&e&&l.Ob(0,"mat-row")}Bf=$localize`:␟49181af14f8ccc54fb2e931599e8b13cc300f490␟1999647039747025377:Steuercode`,Rf=$localize`:␟0bf18431caaac839c1e6c838e2a27d9fd321743a␟1346750425871899275:Gültig ab`,Ef=$localize`:␟984a34347041296dcc3cae9a8719c400e631988e␟8509586664655630098:Gültig bis`,Nf=$localize`:␟f0485a8b1abaab68a1d67358a39c5558bf9f909e␟4050726944055278528:Steuersatz`;const eh=function(){return["/invoicing/settings"]};let th=(()=>{class e{constructor(e,t){this.service=e,this.dialog=t,this.displayedColumns=["taxCode","validFrom","validTo","percentage","task","delete"],this.dataSource=new ti.k,this.selectedVat=null}ngOnInit(){this.subscription=this.service.getVatSettings().subscribe(e=>{this.vatSettings=Sm.cloneDeep(e),this.vatSettings.values.sort((e,t)=>this.sortByTaxCodeAndValidTo(e,t)),this.dataSource.data=this.vatSettings.values})}ngOnDestroy(){this.subscription.unsubscribe()}onAddPeriod(e){this.selectedVat=e;const t=Object.assign({},e,{validFrom:ra.DateTime.utc().startOf("day").toJSDate(),validTo:ra.DateTime.utc(9999,12,31).endOf("day").toJSDate()});this.openDetailsDialog(ce.VAT_TASK_NEW_PERIOD,t)}onDelete(e){this.selectedVat=null,this.vatSettings.values=[...this.vatSettings.values.filter(t=>!Sm.isEqual(t,e))],this.service.update(this.vatSettings)}onNew(){this.selectedVat=null;const e=Object.assign({},{validFrom:ra.DateTime.utc().startOf("day").toJSDate(),validTo:ra.DateTime.utc(9999,12,31).endOf("day").toJSDate()});this.openDetailsDialog(ce.VAT_TASK_NEW_TAXCODE,e)}onSelect(e){this.selectedVat=e;const t=Object.assign({},e);this.openDetailsDialog(ce.VAT_TASK_EDIT,t)}openDetailsDialog(e,t){const n=this.calculateDialogDimensions(e,t);return this.detailsDialogRef=this.dialog.open(Af,Object.assign(Object.assign({},n),{data:{task:e,vat:t}})),this.detailsDialogRef.afterClosed().subscribe(e=>{e?this.updateVat(e):this.selectedVat=null}),this.detailsDialogRef}calculateDialogDimensions(e,t){return{height:"90%",width:"66%",minHeight:"45rem",minWidth:"36rem",maxHeight:"50rem",maxWidth:"48rem"}}createTaxCode(e){this.vatSettings.values.find(t=>t.taxCode===e.vat.taxCode)?this.service.throwError({message:`Der Steuercode ${e.vat.taxCode} existiert bereits.`}):(this.vatSettings.values.push(e.vat),this.service.update(this.vatSettings))}createValidityPeriod(e){this.selectedVat.validTo=ra.DateTime.fromJSDate(e.vat.validFrom).minus({days:1}).toJSDate(),this.vatSettings.values.push(e.vat),this.service.update(this.vatSettings)}sortByTaxCodeAndValidTo(e,t){const n=e.taxCode.localeCompare(t.taxCode);return 0===n?t.validTo.getTime()-e.validTo.getTime():n}updateTaxPercentage(e){this.selectedVat.validFrom=e.vat.validFrom,this.selectedVat.validTo=e.vat.validTo,this.selectedVat.percentage=e.vat.percentage,this.service.update(this.vatSettings)}updateVat(e){switch(e.task){case ce.VAT_TASK_EDIT:this.updateTaxPercentage(e);break;case ce.VAT_TASK_NEW_TAXCODE:this.createTaxCode(e);break;case ce.VAT_TASK_NEW_PERIOD:this.createValidityPeriod(e)}}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(jn),l.Nb(Oa.b))},e.\u0275cmp=l.Hb({type:e,selectors:[["jo-vat-list"]],decls:27,vars:5,consts:[[1,"window","mat-elevation-z4"],["fxLayout","row","fxLayoutAlign","space-between",1,"u-mb-md"],["id","btn_new","mat-raised-button","","color","primary",3,"click"],["id","btn_back","mat-raised-button","",3,"routerLink"],[3,"dataSource"],["matColumnDef","taxCode"],["class","width--md",4,"matHeaderCellDef"],["class","width--md",4,"matCellDef"],["matColumnDef","validFrom"],["class","width--md","fxHide.lt-md","",4,"matHeaderCellDef"],["class","width--md","fxHide.lt-md","",4,"matCellDef"],["matColumnDef","validTo"],["matColumnDef","percentage"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","task"],["matColumnDef","delete"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"width--md"],[3,"click"],["fxHide.lt-md","",1,"width--md"],["fxHide.lt-md",""],["fxHide.gt-sm",""],["mat-icon-button","",3,"click"],["aria-label","Steuersatz hinzuf\xfcgen"],["color","warn","aria-label","L\xf6schen"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div",1),l.Tb(2,"button",2),l.dc("click",(function(){return t.onNew()})),l.Cc(3,"Steuersatz hinzuf\xfcgen"),l.Sb(),l.Tb(4,"a",3),l.Cc(5,"Zur\xfcck"),l.Sb(),l.Sb(),l.Tb(6,"mat-table",4),l.Rb(7,5),l.Bc(8,Ff,2,0,"mat-header-cell",6),l.Bc(9,Lf,3,1,"mat-cell",7),l.Qb(),l.Rb(10,8),l.Bc(11,Xf,2,0,"mat-header-cell",9),l.Bc(12,qf,3,3,"mat-cell",10),l.Qb(),l.Rb(13,11),l.Bc(14,Hf,2,0,"mat-header-cell",6),l.Bc(15,Uf,7,7,"mat-cell",7),l.Qb(),l.Rb(16,12),l.Bc(17,Vf,2,0,"mat-header-cell",13),l.Bc(18,Gf,3,4,"mat-cell",14),l.Qb(),l.Rb(19,15),l.Bc(20,Yf,1,0,"mat-header-cell",13),l.Bc(21,Zf,4,0,"mat-cell",14),l.Qb(),l.Rb(22,16),l.Bc(23,Qf,1,0,"mat-header-cell",13),l.Bc(24,Jf,4,0,"mat-cell",14),l.Qb(),l.Bc(25,Kf,1,0,"mat-header-row",17),l.Bc(26,Wf,1,0,"mat-row",18),l.Sb(),l.Sb()),2&e&&(l.Cb(4),l.nc("routerLink",l.oc(4,eh)),l.Cb(2),l.nc("dataSource",t.dataSource),l.Cb(19),l.nc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.nc("matRowDefColumns",t.displayedColumns))},directives:[ja.c,ja.b,Fn.b,Fn.a,s.j,ti.j,ti.c,ti.e,ti.b,ti.g,ti.i,ti.d,ti.a,Hn.b,pa.a,ti.f,ti.h],pipes:[Nn.e,Nn.f],styles:[".window[_ngcontent-%COMP%]{margin:2.5rem 5rem}@media only screen and (max-width:959px){.window[_ngcontent-%COMP%]{margin:.5rem 1rem}}@media only screen and (max-width:959px){mat-cell[_ngcontent-%COMP%]{font-size:1.6rem}}.mat-row[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}a[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-width:959px){.width--md[_ngcontent-%COMP%]{padding-left:.5rem}}"],changeDetection:0}),e})(),nh=(()=>{class e{constructor(e){this.store=e}canActivate(){return this.checkStore().pipe(Object(K.a)(()=>Object(te.of)(!0)),Object(je.a)(()=>Object(te.of)(!1)))}checkStore(){return this.store.pipe(Object(a.r)(this.getObjectLoadedSelector()),Object(Oe.a)(e=>!e&&this.store.dispatch(this.getQueryAction())),Object(Ce.a)(e=>e),Object(Sn.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),ch=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return Ee}getQueryAction(){return new J.A}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),ah=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return qe}getQueryAction(){return new J.B}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),ih=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return We}getQueryAction(){return new J.w}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),oh=(()=>{class e{constructor(e){this.store=e}canActivate(e){return this.checkStore(e).pipe(Object(K.a)(()=>"copy"===e.params.id||"new"===e.params.id||"quick"===e.params.id?this.hasCurrentObject():this.hasObject(e.params.id)),Object(je.a)((e,t)=>(this.store.dispatch(new In.b({path:["/invoicing"]})),Object(te.of)(!1))))}checkStore(e){return Object(te.combineLatest)([this.store.pipe(Object(a.r)(Ee)),this.store.pipe(Object(a.r)(We)),this.store.pipe(Object(a.r)(qe)),this.store.pipe(Object(a.r)(st))]).pipe(Object(Oe.a)(t=>{t[0]||this.store.dispatch(new J.A),t[1]||this.store.dispatch(new J.w),t[2]||this.store.dispatch(new J.B),t[3]||this.store.dispatch(new J.z),this.store.dispatch(new J.y({objectType:e.url[0].path,id:e.params.id}))}),Object(ee.a)(([e,t,n,c])=>e&&t&&n&&c),Object(Oe.a)(e=>console.log("[Guard] all dependencies loaded: "+e)),Object(Ce.a)(e=>e),Object(Sn.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),rh=(()=>{class e extends oh{constructor(e){super(e),this.store=e}hasCurrentObject(){return this.store.pipe(Object(a.r)(He),Object(ee.a)(e=>!!e),Object(Sn.a)(1))}hasObject(e){return this.store.pipe(Object(a.r)(Le),Object(Oe.a)(t=>this.store.dispatch(new J.G(t[e]))),Object(ee.a)(t=>!!t[e]),Object(Sn.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),sh=(()=>{class e extends oh{constructor(e){super(e),this.store=e}hasCurrentObject(){return this.store.pipe(Object(a.r)(et),Object(ee.a)(e=>!!e),Object(Sn.a)(1))}hasObject(e){return this.store.pipe(Object(a.r)(Qe),Object(Oe.a)(t=>this.store.dispatch(new J.E(t[e]))),Object(ee.a)(t=>!!t[e]),Object(Sn.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),lh=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return st}getQueryAction(){return new J.z}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),bh=(()=>{class e extends oh{constructor(e){super(e),this.store=e}hasCurrentObject(){return this.store.pipe(Object(a.r)(lt),Object(ee.a)(e=>!!e),Object(Sn.a)(1))}hasObject(e){return this.store.pipe(Object(a.r)(it),Object(Oe.a)(t=>this.store.dispatch(new J.F(t[e]))),Object(ee.a)(t=>!!t[e]),Object(Sn.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),dh=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return pt}getQueryAction(){return new J.x}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})(),uh=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return Cn}getQueryAction(){return new J.C}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();var mh=n("2CEU");let fh=(()=>{class e{constructor(e){this.uiService=e}canDeactivate(e,t,n,c){return e.formComponent&&e.formComponent.form.dirty?this.uiService.openConfirmationDialog({title:"Sie haben noch ungesicherte \xc4nderungen.",text:"Wollen Sie den Dialog trotzdem verlassen?"}).pipe(Object(ee.a)(e=>e.reply)):Object(te.of)(!0)}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(mh.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();const hh=[ch,ah,rh,ih,sh,lh,bh,dh,uh,fh];let gh=(()=>{class e extends nh{constructor(e){super(e),this.store=e}getObjectLoadedSelector(){return jt}getQueryAction(){return new J.D}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.h))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac}),e})();const ph=[gh],vh=[{path:"",component:_c,canActivate:[ch,uh,gh,ah,ih,lh],children:[{path:"",component:um,canActivate:[ah,ih,lh]},{path:"receivers",component:Kc,canActivate:[ch,gh,ah,ih,lh]},{path:"receivers/:id",component:br,canActivate:[rh],canDeactivate:[fh]},{path:"contracts",component:hc,canActivate:[ch,gh,ih,ah,lh]},{path:"contracts/:id",component:Tl,canActivate:[sh],canDeactivate:[fh]},{path:"confirmations",component:b},{path:"invoices",component:Pc,canActivate:[ch,gh,ih,ah,lh]},{path:"invoices/:id",component:Iu,canActivate:[bh],canDeactivate:[fh]}]}];let Ch=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},providers:[...hh,gh],imports:[[s.k.forChild(vh)],s.k]}),e})();const Oh=[{path:"settings",canActivate:[gh],children:[{path:"",component:pm,canActivate:[gh]},{path:"countries",component:uf,canActivate:[gh]},{path:"vats",component:th,canActivate:[gh]}]}];let jh=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},providers:[gh],imports:[[s.k.forChild(Oh)],s.k]}),e})();const yh=[de];let Sh=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},providers:[...yn,...yh,...ph],imports:[[o.a,jh]]}),e})();function Th(e){return function(t,n){return"[Auth] clear state"===n.type&&(t=void 0),e(t,n)}}const wh=[Th];let Dh=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},providers:[...Bn,...he,...hh],imports:[[o.a,r.a,Sh,Ch,a.j.forFeature("invoicing",Z,{metaReducers:wh}),i.c.forFeature(Ae)]]}),e})()}}]);